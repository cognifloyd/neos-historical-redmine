#,Project,Tracker,Parent task,Status,Priority,Subject,Author,Assigned To,Updated,Category,Target version,Start date,Due date,Estimated time,% Done,Created,Story points,Velocity based estimate,Position,Remaining (hours),Affected Flow version,Description
5879,TYPO3.Fluid,Bug,"",Resolved,Should have,It's not possible to make the multiple attribute optional,Kim Lang,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-01-04,2010-06-21,"",100,2010-01-03 19:34,"","",2598000,"","","In my extension i have a flexform where i can configure the attributes of every formfield.
I use the IF inline syntax in the ""view"" to achieve this.

This works well for all attributes except for the multiple attribute.


Example:
<pre>
<f:form.Select 
	property=""{fieldHelper.name}"" 

 	options=""{fieldHelper.config.options}""

	id=""{form.name}_{fieldHelper.name}""

	disabled=""{f:if(condition: fieldHelper.config.disabled, then: 'disabled')}""
	multiple=""{f:if(condition: fieldHelper.config.multiple, then: 'multiple')}""
	
	accesskey=""{fieldHelper.config.accesskey}""
	tabindex=""{f:if(condition: fieldHelper.config.tabindex, then: fieldHelper.config.tabindex)}""
/>
</pre>

The problem is in the SelectViewHelper it checks only if the attribute is given not have a value.
Lines: 111, 125, 213
if ($this->arguments->hasArgument('multiple')) {


this syntax is unfortunately not working:
<pre>
<f:form.Select 
	{f:if(condition: fieldHelper.config.multiple, then: 'multiple=""multiple""')}
/>
</pre>
"
5882,TYPO3.Flow,Feature,"",Closed,Could have,Caching for Package Manager/Package file listing,Manuel Strausz,"",2012-01-26 09:24,Package,"",2010-01-04,"","",50,2010-01-04 08:30,"","",1780850,"","","Currently, everytime FLOW3's Package Manager initializes it will traverse the folder structure via a DirectoryIterator. And for each active package, an array of class files will be built in much the same way.
This doesn't have much of a performance impact when deploying in a linux environment, however it seems to take about 0.5 - 1.0 seconds to do on a windows machine (at least that's the number I got from my tests).
I think the package manager and the packages themselves could really use some caching to solve this performance impact, and could generally be useful to minimize the number of filesystem operations. The difficult part about that is that at this point in the bootstrap process, there isn't any way to access the CacheManager (except by pre-loading it and circumventing the ObjectManager). So a different way of caching would be needed, maybe similarly to the way configuration files are cached."
5889,TYPO3.Flow,Bug,"",Resolved,Could have,Kickstart twice defined as svn:external,Thomas Allmer,Robert Lemke,2010-10-20 05:40,"",1.0 alpha 7,2010-01-05,"","",100,2010-01-05 08:33,"","",1799350,"","","In the base distribution (https://svn.typo3.org/FLOW3/Distributions/Base) the Kickstart is defined twise as svn:external 
just a consmetical fix; but as I just saw it though well report it... :p

<pre>
[...]
Fluid https://svn.typo3.org/FLOW3/Packages/Fluid/trunk/
Kickstart https://svn.typo3.org/FLOW3/Packages/Kickstart/trunk/
Party https://svn.typo3.org/FLOW3/Packages/Party/trunk/
[...]
Kickstart https://svn.typo3.org/FLOW3/Packages/Kickstart/trunk/
</pre>"
5927,TYPO3.Flow,Task,Task #27561: Complete documentation,Resolved,Must have,Write documentation for Cache Framework,Robert Lemke,Karsten Dambekalns,2011-06-21 10:31,- Documentation -,1.0 beta 1,2010-01-08,"","",100,2010-01-08 03:32,"","",25700,"","",The basic use of the cache framework and the setup of its different backends needs to be documented.
5933,TYPO3.Fluid,Feature,"",Accepted,Should have,Optional section rendering,Nathan L,Sebastian Kurfuerst,2012-05-21 10:18,ViewHelpers,"",2010-06-18,2010-06-25,2.00,20,2010-01-08 10:34,"","",2597950,"","","It would be nice to be able to make a section optional.

If a template does not define the ""food"" section, then the default food will be shown if optional is set:
<f:render section=""food"" optional=""true"">
    <p>Default food: potato chips</p>
</f:render>

If a default value is not set, then it will render nothing:
<f:render section=""food"" optional=""true"" />


If optional=""true"" is not set, then an exception will be thrown. This is the normal behavior so nothing should change for anyone unless they add the optional parameter."
5963,TYPO3.Fluid,Bug,"",Closed,Won't have this time,Multiple Select Form helper fails when value is Tx_Extbase_Persistence_ObjectStorage,Nathan L,"",2010-10-20 05:44,ViewHelpers,"",2010-01-11,"","",0,2010-01-11 18:02,"","",2597900,"","","<f:form.select multiple=""true"" size=""4"" property=""dishTypes"" options=""{allDishTypes}"" optionLabelField=""name""></f:form.select>

This failed to mark selected items as selected when recipe->getDishTypes() returns a Tx_Extbase_Persistence_ObjectStorage

See the patch for the change I made to make it functional.

Basically the getOptions method converts the values away from objects.

Actually, this change I made should probably be done in getSelectedValue() but I have no time and have to catch my carpool.



"
5995,TYPO3.Flow,Feature,"",Resolved,Could have,Implicitly call __toString method if action result is an object,Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 7,2010-01-13,"","",100,2010-01-13 05:57,"","",1799300,"","","If an action method returns an object, the ActionController should check if a __toString method exists and if so call it and append its result to the response content."
5998,TYPO3.Flow,Feature,"",Resolved,Should have,More flexible subpackage directory structure,Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 7,2010-01-13,"","",100,2010-01-13 06:32,"","",1799250,"","","Currently there is an option to set a @subpackage in a route configuration which will later be translated into a class name by the Request object (see getControllerObjectName()). The pattern for such a class name / object name is hardcoded and reads like this:

<pre>
F3\@package\@subpackage\Controller\@controllerController
</pre>

If an application for its own reasons wants to structure controller differently, routes cannot resolve the object name of the controller anymore. For example if a set of controllers dealing with the account of a user need to be collected in one directory, this structure would be nice:

<pre>
  MyPackage\
     Classes\
        Controller\
           Account\
              RegistrationController.php
              PersonalInfo.php
              CancellationController.php

</pre>

which would result in the following pattern:

<pre>
F3\@package\Controller\@subpackage\@controllerController
</pre>

This is, however, not possible at the moment because the pattern is not configurable and even if so, it would conflict with other packages relying on other patterns. Additionally ""sub package"" doesn't really fit anymore once we refer to a sub structure below ""Controllers"".

We could for example allow @controller to contain namespace separators:

<pre>
   @package: ""MyPackage""
   @controller: ""Account\Registration""
</pre>
"
6003,TYPO3.Fluid,Bug,"",Resolved,Should have,ObjectAccessorNode::evaluate calls ObjectAccessor even if variable is not an object or array,Robert Lemke,Robert Lemke,2010-10-20 05:44,Core,1.0.0 alpha 7,2010-01-13,"","",100,2010-01-13 10:26,"","",2604100,"","","ObjectAccessorNode::evaluate calls ObjectAccessor even if variable is not an object or array.
"
6004,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,Closed,Should have,"Checkbox viewHelper throws exception in ""newAction"" method.",Nathan L,Bastian Waidelich,2012-01-18 15:30,ViewHelpers,"",2010-01-13,"","",0,2010-01-13 10:45,"","",26200,"","","I'm not sure if this is a bug or just the way it is supposed to work.  Maybe this should be filed under Fluid or not, I'm not sure. I made changes to my extBase model in order to make it work.

Here is an example scenario:

<pre>
class Myobj {
/**
 * iampretty
 * @param boolean
 */
 protected $iampretty;
    
 // standard getter/setter
}

/**
 * Show a form to create a new object
 *
 * @param Tx_Myext_Domain_Model_Myobj $myobj A new object that is yet to be created
 * @return string A form for providing the objects properties.
 */
function newAction($myobj = NULL) {
    $this->view->assign('myobj',$myobj);
}

<f:form method=""post"" controller=""Example"" action=""create""  name=""myobj"" object=""{myobj}"">

    <f:form.checkbox property=""iampretty"" value=""1"" /> Am I pretty?

<f:/form>
</pre>

This throws an exception: *#1243325768: No value found for key ""Tx_Fluid_ViewHelpers_FormViewHelper->formObject""*

However, if I modify my newAction to look like this, then the error isn't thrown:

<pre>
function newAction($myobj = NULL) {
    if ($myobj == NULL) {
        $myobj = t3lib_div::makeInstance('Tx_Myext_Domain_Model_Myobj');
    }
    $this->view->assign('myobj',$myobj);
}
</pre>


But there is a different issue!  Here is how the checkbox renders:

*Checkbox viewhelpers can only be bound to properties of type boolean or array. Property ""iampretty"" is of type ""NULL"".*

I can make this go away by adding this constructor to my domain object:

<pre>
public function __construct() {	
    $this->iampretty = false;
}
</pre>

Now everything works!  I'm just not sure if it this is how it is supposed to work.  

"
6005,TYPO3.Flow,Bug,"",Resolved,Should have,ObjectAccess::getProperty() behaves not as documented when property does not exist,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-01-13,"","",100,2010-01-13 10:51,"","",1803150,"","","The method should throw an exception as per it's documentation, but returns NULL, which is not really the same thing (think '' vs. NULL)."
6006,TYPO3.Flow,Feature,"",Resolved,Must have,"Base FLOW3 persistence directly on database, not on TYPO3CR",Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 7,2010-01-13,"","",100,2010-01-13 10:55,"","",1799200,"","","Once upon a time we decided to use JSR-283 for storing our content. That still makes sense for the CMS, but for the framework it turned out to be too much overhead and being in the way of elegantly using TYPO3CR for the CMS (because it always feels like using something that we shouldn't use because it's infrastructure...).

So, create a FLOW3 persistence backend that directly uses a DB."
6008,TYPO3.Flow,Feature,"",Resolved,Should have,Automatically purge files of removed resources,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Resource,1.0 alpha 8,2010-01-13,"","",100,2010-01-13 10:59,"","",1803100,"","","When a resource object is discarded, the related file should be removed as well.

However, such a mechanism requires that the persistence framework provides some kind of hook to notifiy the resource manager about the removal of resource objects."
6028,TYPO3.Flow,Bug,"",Resolved,Must have,DataMapper cannot handle wrongly typed input.,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 7,2010-01-14,"","",100,2010-01-14 11:24,"","",1799150,"","","When a property value comes back from the persistence depths as string, but is supposed to be an integer (or some other type), it is processed as string. That leads to problems when persisting again and changes data, which obviously should not happen."
6029,TYPO3.Flow,Bug,"",Resolved,Must have,PdoBackend cannot handle uninitialized DateTime properties,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 7,2010-01-14,"","",100,2010-01-14 11:26,"","",1799100,"","","Properties with a declared type of DateTime that have a NULL value break persistence, because the PdoBackend tries to use their value as DateTime object..."
6030,TYPO3.Flow,Bug,"",Resolved,Should have,"Router needlessly lowercases names of package, controller, action",Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,MVC,1.0 alpha 7,2010-01-14,"","",100,2010-01-14 11:30,"","",1799050,"","","Templates in Fluid need to be in a path whose parts have to be lowercased, which breaks consistency. That is caused by the Router applying strtolower() on a bunch of values in setControllerKeysAndFormat(). Furthermore some of those calls are double-whoppered, e.g. for the package key. Just check what happens in Request::setControllerPackageKey()..."
6047,TYPO3.Flow,Bug,"",Resolved,Should have,./flow3 - wrong flush cache controller ,Julian Kleinhans,Robert Lemke,2010-10-20 05:40,Core,1.0 alpha 7,2010-01-16,"","",100,2010-01-15 18:18,"","",1799000,"","","Hi,

the commandline script ./flow3 calls a wrong controller by flushing the cache

line 177 
CONTROLLER='Manager'

but there is no ""ManagerController"" only a ""CacheManagerController""

Change this line and it works!

CONTROLLER='CacheManager'"
6059,TYPO3.Flow,Bug,"",Resolved,Must have,./flow3 - wrong package controller,Zach Davis,Robert Lemke,2010-10-20 05:40,Core,1.0 alpha 7,2010-01-16,2010-01-18,"",100,2010-01-16 14:39,"","",1798950,"","","I believe that line 127 should be changed from:

CONTROLLER='Manager'

to:

CONTROLLER='PackageManager'

Seems that when classes were renamed, perhaps they didn't get renamed in the flow3 script (see related bug 6047)"
6069,TYPO3.Flow,Bug,"",Resolved,Must have,PdoBackend cannot handle uninitialized SplObjectStorage properties,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 7,2010-01-18,"","",100,2010-01-18 03:49,"","",1798900,"","","Properties with a declared type of @SplObjectStorage@ that have a NULL value break persistence.

Zachary Davis
> In my application, I have two models: accounts and users. Account models have a property like this:
<pre>
/**
  * @var \SplObjectStorage<\F3\MyApp\Domain\Model\User>
  */
 protected $users;
</pre> 
> Prior to upgrading the FLOW3 source, I was able to persist Account objects without setting the $users property. After upgrading, attempts to persist accounts fail with this error:
> 
> #1: Catchable Fatal Error: Argument 1 passed to F3\FLOW3\Persistence\Backend\PdoBackend::processSplObjectStorage() must be an instance of SplObjectStorage, null given, called in /opt/local/apache2/htdocs/tutorial/Packages/Framework/FLOW3/Classes/Persistence/Backend/PdoBackend.php on line 247 and defined in /opt/local/apache2/htdocs/tutorial/Packages/Framework/FLOW3/Classes/Persistence/Backend/PdoBackend.php line 388 (More information)
> 
> For now, I've fixed it by setting users to an empty SplObjectStorage instance in the User constructor.  "
6073,TYPO3.Flow,Bug,"",Resolved,Must have,ObjectAccess::getProperty() causes warning with array and non-existing property,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 7,2010-01-18,"","",100,2010-01-18 05:33,"","",1798850,"","","If you use getProperty() to ask for a non-existing property on an array, the input is eventually passed to get_object_vars(), which emits a warning because it expects an object."
6087,TYPO3.Fluid,Bug,"",Closed,Won't have this time,"#1251730702: The value must be of type ""Tx_Sffluid_Domain_Model_Customer"", but was of type ""array"". ",Stefan Froemken,"",2010-10-20 05:44,Core,"",2010-01-18,"","",100,2010-01-18 15:14,"","",2597850,"","","Hello...I just try to learn Fluid, but when I want to save some values following error appears:

#1251730702: The value must be of type ""Tx_Sffluid_Domain_Model_Customer"", but was of type ""array"". 

edit.html:
<p class=""bodytext"">Editieren Sie den Kunden:</p>
<f:form method=""post"" action=""update"" name=""customer"" object=""{customer}"">
	<label for=""firstname"">Vorname</label><br />
	<f:form.textbox property=""firstname"" /><br />
	<label for=""lastname"">Nachname</label><br />
	<f:form.textbox property=""lastname"" /><br />
	<f:form.submit class=""submit"" value=""Submit""/>
</f:form>

CustomerController.php:
 <?php
 class Tx_Sffluid_Controller_CustomerController extends Tx_Extbase_MVC_Controller_ActionController {
  protected $customerRepository;

  public function initializeAction() {
   $this->customerRepository= t3lib_div::makeInstance('Tx_Sffluid_Domain_Repository_CustomerRepository');
  }
  public function indexAction() {
   $this->view->assign('zahl', 12);
   $this->view->assign('customers', $this->customerRepository->findAll());
  }
  public function editAction(Tx_Sffluid_Domain_Model_Customer $customer) {
   $this->view->assign('customer', $customer);
  }
  public function updateAction(Tx_Sffluid_Domain_Model_Customer $customer) {
   $this->customerRepository->update($customer);
   $this->flashMessages->add('Der Kunde wurde aktualisiert.');
   $this->redirect('index');
  }
 }

I can't find an error. The code is nearly the same as in blog_example. What's wrong here?!

Stefan Frömken

Fluid: 1.0.2
TYPO3: 4.3.1"
6089,TYPO3.Flow,Bug,"",Resolved,Must have,EmailAddressValidator does not recognize multiple @,Jochen Rau,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 8,2010-01-19,"","",100,2010-01-18 18:20,"","",1803050,"","",EmailAddressValidator fails for addresses like 'andreas@foerthner@example.com'. This issue is already resolved in Extbase. Related to #5843.
6092,TYPO3.Flow,Bug,"",Resolved,Must have,Resources imported with importResource() are not published,Robert Lemke,Robert Lemke,2010-10-20 05:40,Resource,1.0 alpha 7,2010-01-19,"","",100,2010-01-19 04:05,"","",1798800,"","","If i call the ResourceManager->importResource direct, the image stores in Data/Persistance/Resources/ but NOT in the public folder _Resouces/Persistent/. So i can't use it in the frontend

[...]
$imageModel = $this->objectFactory->create('F3\Tutorials\Domain\Model\Image');
$imageModel->setTitle('Test');
$imageModel->setOriginalResource($this->recourceManager->importResource('/Users/jk/Desktop/IMG_2474.jpg'));
[...]

if i use the way over the form upload in the frontend it works!
"
6118,TYPO3.Flow,Bug,"",Resolved,Should have,Integer arguments are not validated automatically,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,MVC,1.0 alpha 8,2010-01-20,"","",0,2010-01-20 04:03,"","",1803000,"","","The annotation
<pre>
@param integer $argument
</pre>

does not add a Number or similar validator automatically
"
6120,TYPO3.Flow,Feature,"",Resolved,Should have,Re-implement lazy loading in persistence...,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-20,"",22.00,100,2010-01-20 05:11,"","",1802950,"","","We need a replacement for the lazy loading that is gone with alpha 7.

This time build it in a way that makes it really transparent (so that you don't need to take LazyLoadingProxy instances into account)."
6121,TYPO3.Flow,Feature,"",Rejected,Should have,Add validator and filter for HTML,Karsten Dambekalns,"",2012-03-12 08:51,Validation,"","","",6.00,0,2010-01-20 06:15,"","",1780800,"","",We need a validator that can check for malicious content in strings that are supposed to contain some HTML. And it would be nice to have a filter to clean up messy stuff of that kind.
6124,TYPO3.Flow,Task,"",Resolved,Must have,Reorganize and clean up persistence backend,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-20,"","",100,2010-01-20 06:51,"","",26550,"","","The new persistence backend layer needs to be cleaned up a little:
* move data mapper alongside backend (they are technically dependent anyway)
* add data mapper interface
* augment backend interface so it is actually useful for creating new backends
"
6135,TYPO3.Flow,Task,"",Resolved,Should have,Authentication Manager has to make sure that only one Party can be authenticated at a time,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 8,2010-01-20,"","",100,2010-01-20 13:07,"","",26700,"","",.
6137,TYPO3.Flow,Feature,"",Resolved,Must have,Implement a PHP Code Cache Frontend,Robert Lemke,Robert Lemke,2010-10-20 05:40,Cache,1.0 alpha 8,2010-01-20,"","",100,2010-01-20 16:23,"","",1802900,"","","The AOP framework and some other parts of FLOW3 (in the future) store and retrieve PHP code using the cache framework. However, this comes with a speed penalty because ? in order to be compatible with all kinds of cache backends - the code must be stored using the String frontend and be parsed during runtime by eval().

We need a frontend which is optimized for caching code and in turn refrains from supporting all backends.
"
6140,TYPO3.Flow,Feature,"",Resolved,Should have,ClassSchema must reset identity property and identifier property when being made value object,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-01-21,"","",100,2010-01-21 04:23,"","",1802850,"","","If a class schema exists, and the type is set to value object, properties only useful for entities must be reset."
6141,TYPO3.Flow,Feature,"",Resolved,Should have,Check prototype on entity/valueobject,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-01-21,"","",100,2010-01-21 04:26,"","",1802800,"","",Entites and value objects must be declared prototype!
6142,TYPO3.Flow,Feature,"",Resolved,Should have,Class schema must check for entity when setting identity and identifier property ,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-21,"","",100,2010-01-21 04:28,"","",1802750,"","",It should be possible to set identity and identifier properties only when the class schema type is entity
6143,TYPO3.Flow,Feature,"",Resolved,Could have,Handle expiry time smarter in memcache and APC backends,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 10,2010-06-10,"",1.00,100,2010-01-21 04:30,"","",1804950,"","","The memcache/APC backends should check expirytime limit and act accordingly, i.e. convert to a timestamp if needed (see code in TYPO3 4.3 for a way to handle this)."
6149,TYPO3.Fluid,Feature,"",Resolved,Should have,for: add iteration informations,Stefan Froemken,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-01-21,"","",100,2010-01-21 09:04,"","",2597800,"","","This is a feature request. I first saw this functionality in smarty and I think you should insert this in fluid, too. You're right, when you told me to program this viewHelper on my own. But I think this should be in Core.

Here is my first try changing forViewHelper.php:

	/**
	 * Iterates through elements of $each and renders child nodes
	 *
	 * @param array $each The array or SplObjectStorage to iterated over
	 * @param string $as The name of the iteration variable
	 * @param string $key The name of the variable to store the current array key
	 * @param boolean $reverse If enabled, the iterator will start with the last element and proceed reversely
	 * @param integer $iterate If >= 0, you got a new element {iterate} which counts through the Arrays
	 * @param integer $step If iterate is set, then you can set your prefered stepping 2 = 1,3,5,7,9
	 * @return string Rendered string
	 * @author Sebastian Kurfürst <sebastian@typo3.org>
	 * @author Bastian Waidelich <bastian@typo3.org>
	 * @author Robert Lemke <robert@typo3.org>
	 * @api
	 */
	public function render($each, $as, $key = '', $reverse = FALSE, $iterate = FALSE, $step = 1) {
		$output = '';
		if ($each === NULL) {
			return '';
		}
		if (is_object($each)) {
			if (!$each instanceof Traversable) {
				throw new Tx_Fluid_Core_ViewHelper_Exception('ForViewHelper only supports arrays and objects implementing Traversable interface' , 1248728393);
			}
			$each = $this->convertToArray($each);
		}

		if ($reverse === TRUE) {
			$each = array_reverse($each);
		}

		$output = '';
		foreach ($each as $keyValue => $singleElement) {
			$this->templateVariableContainer->add($as, $singleElement);
			if ($key !== '') {
				$this->templateVariableContainer->add($key, $keyValue);
			}
			if ($iterate !== FALSE) {
				$this->templateVariableContainer->add('iterate', $iterate);
				($step != 1)? $iterate = $iterate + $step: $iterate++;
			}
			$output .= $this->renderChildren();
			$this->templateVariableContainer->remove($as);
			if ($key !== '') {
				$this->templateVariableContainer->remove($key);
			}
			if ($iterate !== FALSE) {
				$this->templateVariableContainer->remove('iterate');
			}
		}
		return $output;
	}

Now you can do something like this:
<f:for each=""{customer.car}"" as=""car"" iterate=""2"" step=""2"">
<tr>
<td>Auto {iterate}</td>
<td>{car.type}</td>
</tr>
</f:for>

and get:
Auto 1: BMW
Auto 3: Audi
Auto 5: VW

or remove step to get:
Auto 1: BMW
Auto 2: Audi
Auto 3: VW
"
6153,TYPO3.Flow,Bug,"",Resolved,Must have,JCR_OPERATOR_LIKE in F3\FLOW3\Persistence\Backend\AbstractSqlBackend,Falk Kühnel,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-21,"",1.00,100,2010-01-21 11:30,"","",1802700,"","","This is probably a leftover from the renaming session:

JCR_OPERATOR_LIKE in line 113 should probably be OPERATOR_LIKE
"
6154,TYPO3.Flow,Bug,"",Closed,-- undefined --,F3\FLOW3\Cache\Exception thrown in file FileBackend.php,Vinícius Krolow,Robert Lemke,2010-10-20 05:39,- Error Handler Report -,"",2010-01-21,"","",0,2010-01-21 12:55,"","",1780750,"","","The cache directory ""/home/vkrolow/projects/flow3/Data/Temporary/297cdac9ea3a/Cache/Data/FLOW3_Resource_Status/f/2/"" could not be created.
6 F3\FLOW3\Cache\Backend\FileBackend::set(""packageResourcesPublished"", ""y"", array, NULL)
5 F3\FLOW3\Cache\Frontend\StringFrontend::set(""packageResourcesPublished"", ""y"", array)
4 F3\FLOW3\Resource\ResourceManager::publishPublicPackageResources(array)
3 F3\FLOW3\Core\Bootstrap::initializeResources()
2 F3\FLOW3\Core\Bootstrap::initialize()
1 require(""/home/vkrolow/projects/flow3/Packages/Framework/FLOW3/Scripts/FLOW3.php"")

Please include more helpful information!"
6162,TYPO3.Flow,Bug,"",Resolved,Should have,ReflectionService throws a Runtime Notice,Tommy Seus,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-01-22,"","",100,2010-01-21 22:13,"","",1802650,"","","Runtime Notice: Only variables should be passed by reference in /home/clfn/Development/FLOW3/FLOW3_DIst02/trunk/Packages/Framework/FLOW3/Classes/Reflection/ReflectionService.php line 787

@
00787:      if (current($this->getClassTagValues($className, 'scope')) !== 'prototype') {
@

Fix:
@$vari = $this->getClassTagValues($className, 'scope');
current($vari);
@"
6163,TYPO3.Flow,Bug,"",Resolved,Must have,Namespace-Check throws an Error with PHP 5.3.0. ,Tommy Seus,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 8,2010-01-22,"","",0,2010-01-21 22:23,"","",1802600,"","","Error:
Because FLOW3 uses namespaces, it requires at least PHP 5.3.0, you have 5.3.0 


version_compare(phpversion(), '5.3.0', '>')



Fix:
version_compare(phpversion(), '5.3.0', '>=')
"
6177,TYPO3.Flow,Feature,"",Resolved,Should have,Implement CRUD hooks in persistence,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-25,"","",100,2010-01-22 11:04,"","",1802550,"","","We need some hooks to react on persistence events, e.g. to remove a resource file if the related value object is eventually deleted."
6178,TYPO3.Flow,Feature,"",New,Should have,Implement FileType and FileSize validators,Karsten Dambekalns,"",2010-10-20 05:39,Validation,"",2010-01-22,"","",0,2010-01-22 11:08,"","",1780700,"","",.
6188,TYPO3.Flow,Bug,"",Resolved,Must have,"The properties of the AOP proxy should have a more ""internal"" name",Andreas Förthner,Andreas Förthner,2010-10-20 05:40,AOP,1.0 alpha 8,2010-01-23,"","",100,2010-01-23 13:40,"","",1802500,"","","The AOP proxy classes define several properties, e.g. $objectFactory. Now if you try to advice a class having defined one of these properties with the same name, but as static, this ends up in a fatal error.

Solution: Give these properties a name probably nobody else will use, like FLOW3_AOP_Proxy_objectFactory.

Are there any reasons this change would not work? If not, just assign this issue back to me and I will implement it."
6195,TYPO3.Flow,Bug,"",Resolved,Should have,Empty form fields converted to empty string instead of type declared for property,Fabian Guth,Robert Lemke,2010-10-20 05:40,Property,1.0 alpha 11,"","","",100,2010-01-24 15:59,"","",1806250,"","","After submitting an empty form field of an integer property i get the following error:

#1244465559: Expected property of type integer, but got string

F3\FLOW3\Persistence\Exception\UnexpectedTypeException thrown in file
Packages/Framework/FLOW3/Classes/Persistence/Backend/AbstractBackend.php in line 278.

F3\FLOW3\Persistence\Backend\AbstractBackend::checkType(""integer"", """")

After changing the property type to string it validates the Object.

Flow3/PHP is converting empty form fields to empty strings """". It would be better if they are treated as NULL. (Validation actually checks for NULL)
"
6202,TYPO3.Fluid,Bug,"",Rejected,Should have,ActionViewHelper breaks html on empty content,Georg Ortner,"",2010-10-20 05:44,ViewHelpers,"",2010-01-25,"",0.50,0,2010-01-25 08:11,"","",2597750,"","","It's not really a bug, but to me it's not very well designed.

If we do something like:

<pre>
<f:link.action action=""index"">{blog.title}</f:link.action>
</pre>

And blog.title is empty we would get:

<pre>
<a href=""someUri"" otherAttributes="""" />
</pre>

Because right now if there is no content given to a ActionViewHelper it assumes that we don't need a closing tag. This ends up in a broken html.

Of course a link-tag without content doesn't make much sense but I think this can happen easily.

This decision is taken in Fluid/Core/ViewHelper/TagBuilder at line 222

<pre>
if ($this->hasContent() || $this->forceClosingTag) {
    $output .= '>' . $this->content . '</' . $this->tagName . '>';
} else {
    $output .= ' />';
}

</pre>
So far I think there are two possible solutions:

1) We add the following to ActionViewHelper, EmailViewHelper and ExternalViewHelper (and all featured TagBasedViewHelpers which do need the closing tag):

<pre>
$this->tag->forceClosingTag(true);
</pre>

2) We make forceClosingTag default true in TagBasedViewHelper and take care that every child of this class which doesn't need a closing tag sets it on false.


Personally I prefer second because I think the number of TagBasedViewHelpers which do need the closing tag is greater than the others.


Regards "
6204,TYPO3.Flow,Bug,"",Resolved,Must have,Runtime Notice in PropertyMapper Line 249,Tommy Seus,Karsten Dambekalns,2010-10-20 05:40,Property,1.0 alpha 8,2010-01-25,"","",100,2010-01-25 08:49,"","",1802450,"","","Runtime Notice: Only variables should be passed by reference in ***/Packages/Framework/FLOW3/Classes/Property/PropertyMapper.php line 249

current() accepts only variables "
6209,TYPO3.Flow,Bug,"",Resolved,Must have,Not uploading a file for a resource leads to an error,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Property,1.0 alpha 8,2010-01-25,"","",100,2010-01-25 11:53,"","",1802400,"","","Try creating a post without uploading a file and you'll get a nice exception:
<pre>
#1259748358: A valid sha1 hash must be passed to this constructor.
</pre>
The ""uploaded file"" has an error status of UPLOAD_ERR_NO_FILE, so this need to be checked and handled accordingly."
6266,TYPO3.Flow,Bug,"",Resolved,Should have,Config of security/cryptography/hashService/encryptionKey,Georg Ortner,Karsten Dambekalns,2010-10-20 05:40,Configuration,1.0 alpha 8,2010-01-28,"","",100,2010-01-28 09:52,"","",1802350,"","","<pre>
FLOW3:
  security:
    cryptography:
      hashService:
        encryptionKey: 'change this to something *really* unique!'
</pre>

If someone changes this in the global configuration it's going to be overwritten by Packages/Framework/FLOW3/Configuration/Settings.yaml with an empty string.

<pre>
    cryptography:
      hashService:
        # A key used for various tasks, must be unique for a setup!
        encryptionKey:
</pre>

I think this is not how it's supposed to be? Or am I wrong?"
6267,TYPO3.Flow,Major Feature,"",Resolved,Should have,Speed up persistence,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-18,"",1.00,100,2010-01-28 10:36,"","",1802300,"","","Do some more profiling, get rid of useless stuff, check dirty checking, ..."
6287,TYPO3.Fluid,Bug,"",Closed,Should have,Fluid User Manual outdated / missing information,Michael Sauter,"",2011-05-06 04:22,"","",2010-01-30,"","",0,2010-01-30 09:23,"","",2597700,"","","I wrote my first ViewHelper and noticed that the manual has some bugs (I guess it's just outdated).

It's mentioned several times that a ViewHelper must extend F3\Fluid\Core\AbstractViewHelper, but this resides in F3\Fluid\Core\ViewHelper\AbstractViewHelper now.

Also, example 2.6 (for loop) doesn't note that the ViewHelper must be of scope prototype, maybe that should be included in the source code? And of course this class should also extend F3\Fluid\Core\ViewHelper\AbstractViewHelper."
6289,TYPO3.Fluid,Feature,"",Resolved,Should have,{settings} not automatically available in partials,Franz Koch,Sebastian Kurfuerst,2010-10-20 05:44,ViewHelpers,"",2010-01-30,"","",100,2010-01-30 15:12,"","",2597650,"","","Hi, I just noticed that the {settings} array is not automatically available in partials, which it should in my eyes.
This is the v4 branch, not sure if it's also the case in v5."
6290,TYPO3.Flow,Bug,"",Resolved,Must have,Dirty checking fails due to order of object reconstitution,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-01-30,"","",100,2010-01-30 15:53,"","",1802250,"","","Here is how it breaks (for the sake of simplicity in a blog with one post):
# A blog post shall be shown
# The active Blog is queried and reconstituted
# During property thawing the posts inside the blog are reconstituted
# During that the posts clean state is memorized - but the Blog contained in the Post at that moment is not yet complete, it's posts property is still NULL.
# The Blog in the Post is cloned in this incomplete state
# Only after that the Blog receives it's Posts

Now, upon persisting the Post is checked for being dirty, and since the current Blog and the cloned Blog differ (the clone has NULL as posts), the whole shebang is persisted again. Which, obviously, is an utter waste of resources.

Now, go on and fix it. :)"
6297,TYPO3.Fluid,Bug,"",Resolved,Must have,Not possible to create link to Typo3-Pages with additional piVars,Mathias Gisch,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-02-01,"","",100,2010-02-01 05:22,"","",2597600,"","","If I want to create a link to a Typo3-Page and add addtional attributes for old-style pibase-Plugins the Viewhelper throws an exception:

#1237900520: The argument additionalAttributes was registered with type array, but is of type string in viewhelper Tx_Fluid_ViewHelpers_Link_PageViewHelper

Try the following:

<f:link.page pageUid=""{detailsPage}"" additionalAttributes=""{tx_ltpdb_test[argument]: 234}"">Test</f:link.page>"
6298,TYPO3.Fluid,Bug,"",Resolved,Should have,action gets converted to lowercase,Falk Kühnel,"",2010-10-20 05:44,"","",2010-02-01,"","",0,2010-02-01 08:18,"","",2597550,"","","If i recall correctly, this was done to somehow get teh dispatcher to ignore cases for actions.

I am trying to use Fluid with an explicitly called action like this in 4.3:
$view->render('someName'); 
This makes Fluid look for a file called 'somename', which in my oppinion should not be.

TemplateView.php:
<pre>
protected function resolveTemplatePathAndFilename($actionName = NULL) {
...
   $actionName = ($actionName !== NULL ? $actionName : $this->controllerContext->getRequest()->getControllerActionName());
   $actionName = strtolower($actionName);
...
}
</pre>
This is not the right place to do this. this should be done somewhere, in getControllerActionName.
Partials dont get converted to lowercase names btw."
6315,TYPO3.Flow,Bug,"",Resolved,Should have,Input fields with a name attribute with more than 64 characters are  ignored,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Security,1.0 alpha 11,2010-02-02,"","",100,2010-02-02 04:52,"","",1806200,"","","(by Fabian Guth)

Input fields with a name attribute with more than 64 characters are 
ignored.

After hours of digging into the Flow3-Code i realized that its possibly a 
wrong PHP setting. Following test case shows, that input fields with long 
(more than 64 characters) name attributes are ignored.

I would really appreciate any hints on the bad setting variable!
I searched php.ini and http.conf without success.

Test Case:

<pre>
 <?php echo print_r($_POST); ?>

<form action= """" method=""post"">  
 <input type=""text""  
name=""aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa""/>
 <input type=""text""  
name=""bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb""/>
 <input type=""submit"" value=""Submit""/>
</form>
</pre>

Renders following after submit (both fields are filled):

<pre>
Array
(
   [bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb] => b
)
</pre>

As a workaround i edited the Token 
(F3\FLOW3\Security\Authentication\Token\UsernamePassword) to check for a 
short array key. I hope there aren't any side effects. 
I know that it's better to subclass it with a changed ""updateCredentials"" 
method to preserve the patch at the next release.

As i use the default Linux PHP Package, i am afraid its a very common 
setting."
6316,TYPO3.Kickstart,Bug,"",Resolved,Should have,Outdated reference to RenderingContext causes exception,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:48,"",1.0.0 alpha 8,2010-02-02,"","",100,2010-02-02 05:24,"","",2740500,"","","As reported by THomas Fritz:
<pre>
developer@wda ~/vhosts/flow3/www $ ./flow3 kickstart package Blog

Uncaught Exception in FLOW3 #1166550023: Object ""F3\Fluid\Core\Rendering\RenderingConfiguration"" is not registered.
thrown in file Packages/Framework/FLOW3/Classes/Object/ObjectFactory.php in line 97
</pre>"
6317,TYPO3.Flow,Task,"",Resolved,Should have,"Replace ""Granted Authority"" by ""Role""",Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 8,2010-02-02,"","",100,2010-02-02 07:11,"","",27350,"","","The (more general) concept of granted authorities doesn't seem to be necessary, as a ""role"" is the only granted authority we currently need / can imagine.
Therefore let's get rid of the GrantedAuthorityInterface and all other occurrences and use the term / class ""Role"" instead.

Also affects the ifGrantedAuthorityViewHelper."
6323,TYPO3.Flow,Bug,"",Closed,Should have,Classes in the Reflection subpackage should be instantiated via the object framework,Michael Sauter,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-02-02,"","",0,2010-02-02 11:35,"","",1802200,"","","E.g. \F3\FLOW3\Reflection\ClassReflection is instantiated throughout FLOW3 with the new operator, but shouldn't."
6338,TYPO3.Fluid,Bug,"",Closed,Could have,JSON is being parsed as string Array,Rens Admiraal,"",2013-07-17 06:07,"","",2010-02-04,"",10.00,0,2010-02-04 04:32,"","",2597500,"","","We have a fluid template with some inline javascript. The JSON objects in it are being parsed as the literal string 'Array'.

It looks like fluid is parsing all array notations in the content instead of just parsing the arrays used in the viewhelper parameters. There is a workaround for this bug, just add a property to the json containing a viewhelper.

Not working:
 flashes.push({
 	id: 'sponsorMeter',
 	flashvars: {
 		amount:5000,
 		maxAmount:700,
 		link: ""<f:uri.action pageUid='{pages.sponsor}' absolute='true' />"",
 		type:'zip'
 	},
 	parameters: {
 		wmode:'transparent'
 	},
 	width: 150,
 	height: 260,
 	src:'/<f:uri.resource path=""Flash/sponsormeter.swf"" />'
 });

Working (parameters objects has changed):
 flashes.push({
 	id: 'sponsorMeter',
 	flashvars: {
 		amount:5000,
 		maxAmount:700,
 		link: ""<f:uri.action pageUid='{pages.sponsor}' absolute='true' />"",
 		type:'zip'
 	},
 	parameters: {
 		link: ""<f:uri.action pageUid='{pages.sponsor}' absolute='true' />"",
 		wmode:'transparent'
 	},
 	width: 150,
 	height: 260,
 	src:'/<f:uri.resource path=""Flash/sponsormeter.swf"" />'
 });"
6339,TYPO3.Flow,Bug,"",Resolved,-- undefined --,F3\FLOW3\Error\Exception thrown in file ErrorHandler.php,Simon Schaufelberger,Karsten Dambekalns,2010-10-20 05:39,- Error Handler Report -,"",2010-02-04,"","",0,2010-02-04 04:33,"","",1780650,"","","Warning: touch() [<a href='function.touch'>function.touch</a>]: Unable to create file C:/xampp/htdocs/FLOW3/Data/Temporary/a5785fc0b2b4/Cache/Tags/%CLASS%F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider/FLOW3_AOP_ProxyClassCodes^F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider_AOPProxy_Development because No such file or directory in C:\xampp\htdocs\FLOW3\Packages\Framework\FLOW3\Classes\Cache\Backend\FileBackend.php line 208
9 F3\FLOW3\Error\ErrorHandler::handleError(2, ""touch() [&lt;a href='function.touch'&gt;function.touch&lt;/?roxy_Development because No such file or directory"", ""C:\xampp\htdocs\FLOW3\Packages\Framework\FLOW3\Classes\Cache\Backend\FileBackend.php"", 208, array)
8 touch(""C:/xampp/htdocs/FLOW3/Data/Temporary/a5785fc0b2b4/?istedUsernamePasswordProvider_AOPProxy_Development"")
7 F3\FLOW3\Cache\Backend\FileBackend::setTag(""F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider_AOPProxy_Development"", ""%CLASS%F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider"")
6 F3\FLOW3\Cache\Backend\FileBackend::set(""F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider_AOPProxy_Development"", ""namespace F3\FLOW3\Security\Authentication\Provide?					}?				}?			}?		}?		return $adviceChains;?	}?}"", array, NULL)
5 F3\FLOW3\Cache\Frontend\StringFrontend::set(""F3_FLOW3_Security_Authentication_Provider_PersistedUsernamePasswordProvider_AOPProxy_Development"", ""namespace F3\FLOW3\Security\Authentication\Provide?					}?				}?			}?		}?		return $adviceChains;?	}?}"", array)
4 F3\FLOW3\AOP\Framework::initialize(array)
3 F3\FLOW3\Core\Bootstrap::initializeAOP()
2 F3\FLOW3\Core\Bootstrap::initialize()
1 require(""C:\xampp\htdocs\FLOW3\Packages\Framework\FLOW3\Scripts\FLOW3.php"")

Why does it say ""No such file or directory in...""?"
6389,TYPO3.Fluid,Feature,"",Resolved,Should have,Option/Possibility to Disable Object Escaping,Marc Neuhaus,Robert Lemke,2010-10-20 05:44,Core,1.0.0 alpha 8,2010-02-07,"","",100,2010-02-06 19:51,"","",2604250,"","","Currently the ObjectAccessor will always be escaped.
In my Opinion there should be a way to Disable this behavior for certain Objects/Properties

"
6390,TYPO3.Flow,Feature,"",Resolved,Should have,ObjectAccess::getPropertyPath doesn't support Arrays,Marc Neuhaus,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-04-16,"",1.00,100,2010-02-06 21:31,"","",1802150,"","","Would be great to enable the Access of Arrays through the getPropertyPath.

It already used to work with this old implementation of the getProperty function:
static public function getPropertyPath($object, $propertyPath) {
	$propertyPathSegments = explode('.', $propertyPath);
	foreach ($propertyPathSegments as $pathSegment) {
		$object = self::getProperty($object, $pathSegment);
		if ($object === NULL) return NULL;
	}
	return $object;
}

Main Problem seems the isPropertyGettable function because it only checks the Objects getters and doesn't consider all Possibilities supported by the getProperty function.
"
6392,TYPO3.Fluid,Bug,"",Closed,Should have,#1225136013 - This Exception should never be thrown,Falk Kühnel,"",2011-05-06 04:22,"","",2010-02-07,"","",0,2010-02-07 12:52,"","",2597450,"","","#1225136013: This exception should never be thrown, as the array value has to be of some type (Value given: ""array ( 0 => '0:\'\'', 'ArrayPart' => '0:\'\'', 1 => '0:\'\'', 'Key' => '0', 2 => '0', 'DoubleQuotedString' => '', 3 => '', 'SingleQuotedString' => '', 4 => '', )""). Please post your template to the bugtracker at forge.typo3.org.

The bad boy causing this:
<f:format.printf arguments=""{0:''}"">This is what i want you to see: %s.</f:format.printf>
"
6411,TYPO3.Flow,Bug,"",Resolved,Must have,Undefined index classname in DataMapper method mapSingleObject,Alexandre Martinez,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-02-08,"","",100,2010-02-08 14:25,"","",1802100,"","","When the same object is referenced more than once in the data retrieved from database, the classname field is just set once, the second and subsequent references only return an identifier, fine if the order used to map the properties is the same, which cannot be guaranteed because the properties list is returned by reflection.

An exemple to make it clear:

A class named Link has two properties fromCondition and toCondition that reference the same object. The data array used to map the object Link has a classname value only for fromCondition. 

If in the Link class definition fromCondition property preceeds toCondition property definition, everything is fine. 

If the order of properties is reversed, the error is thrown.

Possible fixes could consist in always returning a classname value from database when returning multiple references to the same object or ensuring the properties are always persisted and mapped back to object in the same order.

IMHO depending on properties in fixed order should not be considered.

Bug occurs on xampp for windows 1.7.3 with FLOW3 alpha7, with default sqlite persistence backend. Didn't try it with a MySql backend.

Hope I made it clear enough."
6426,TYPO3.Flow,Feature,"",Closed,Won't have this time,Implement caching backend for other opcode caches.,Nikolas Hagelstein,"",2010-10-20 05:39,Cache,"",2010-02-10,"","",0,2010-02-10 03:15,"","",1780600,"","","Currently the flow3 caching backend as well as its typo3 backport support the APC opcode cache.
Other populare opcode caches e.g. xcache, eaccelerator also offer the the oportunity to store data the shm.

Since the shm storing api accross different opcode caches just varies a little (mainly naming of put/get functions) it might make sense to create a seperated abstract ""opcode cache backend"" class and let the actual opcode code cache specific backend inherited from it.

I attached very a rough (and not fully tested) xcache caching backend class i put together by copy and pasting from the typo3 apc cache back end. Just to illustrated the minor difference.



 





"
6456,TYPO3.Flow,Feature,"",Closed,Should have,Customization/localization of validator errors,Arjen Hoekema,"",2012-03-12 12:47,Validation,"","","",12.00,0,2010-02-12 08:00,"","",1780550,"","","Add the possibility to customize the validation error messages. For example: in Zend Framework each validator has a list of ""message templates"" and for the several types of errors each validator defines its own constants. These messages contain placeholders (%value%) which are replaced.

In the future this could be attached to a localization/translator object."
6462,TYPO3.Flow,Task,"",Resolved,Must have,Rename the ACL subpackage to Policy,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 8,2010-02-14,"","",100,2010-02-13 18:10,"","",28200,"","",Rename the ACL subpackage to Policy
6501,TYPO3.Flow,Bug,"",Closed,-- undefined --,RuntimeException thrown in file Backend.php,Test no-lastname-given,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-02-17,"","",0,2010-02-17 13:06,"","",1802050,"","","Could not create persistence tables with DSN ""sqlite:/var/www/typo3dev.co.uk/flow3/Data/Persistent/Objects.db"". PDO error: could not find driver
7 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::createTables()
6 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::connect()
5 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::initialize(array)
4 F3\FLOW3\Persistence\PersistenceManager::initialize()
3 F3\FLOW3\Core\Bootstrap::initializePersistence()
2 F3\FLOW3\Core\Bootstrap::initialize()
1 require(""/var/www/typo3dev.co.uk/flow3/Packages/Framework/FLOW3/Scripts/FLOW3.php"")

- The above happened during the first install (permissions and virtual host set properly) 
- Debian 5
- PHP 5.3.1

Application requires apparently sqlite which is not necessary application on the given server.

"
6514,TYPO3.Fluid,Bug,"",Resolved,Must have,HMAC error when rendering links inside forms,Christine Gerpheide,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-02-18,"","",100,2010-02-18 07:47,"","",2597400,"","","When adding a link viewhelper inside of a form, an invalid HMAC exception is thrown on submit:
---
#1255082824: Request hash (HMAC) checking failed. The parameter __hmac was invalid or not set, and objects were modified.  
---

For example, this form throws the error:

<f:form method=""post""  action=""update"" name=""updateList"" object=""{updateList}"" arguments=""{mode : 'rename'}"">                   
<f:link.action action=""index"" >Subscriber Lists</f:link.action>
<f:form.textbox property=""title"" id=""listname"" class=""required"" />
<f:form.submit class=""submit"" value=""Save Changes""/>
</f:form>

If you remove the link.action element, the form will submit successfully, but you should be allowed to add such links inside a form."
6520,TYPO3.Flow,Task,"",Resolved,Should have,Differentiate between NULL and empty array/SplObjectStorage,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 10,2010-06-18,"",5.00,100,2010-02-18 13:21,"","",28500,"","","When reconstituting objects we should only thaw array/SplObjectStorage if we had that when persisting and leave NULL in place otherwise.

Info: thawProperties() NULL check; signatures of mapArray(), mapSplObjectStorage(); collectProperties()"
6521,TYPO3.Fluid,Task,"",Resolved,Should have,"form ViewHelper: add ""objectName"" argument that overrules name attribute",Mam Violeng,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-02-19,"","",100,2010-02-18 21:27,"","",28550,"","","The problem is related to XHTML Strict 1.0 validation which does not allow the attribute ""name"" for form tags, and when use id attribute instead of name then the function $this->request->getArgument('member') does not work anymore (""member"" is the name of the form)."
6529,TYPO3.Flow,Bug,"",Resolved,Should have,Fully support regular expressions for method names in pointcut expressions,Robert Lemke,Robert Lemke,2010-10-20 05:40,AOP,1.0 alpha 8,2010-02-20,"","",100,2010-02-20 05:44,"","",1802000,"","","Currently only a limited set of regular expressions can be used in a pointcut expression, for example:

<pre>
   method(MyClassName->.*Action())
</pre>

However, parentheses are not supported yet, but they would be quite useful for defining policy resources:

<pre>
   method(MyClassName->(new|edit|create|delete|update)Action())
</pre>"
6560,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,Closed,Must have,A reset button for formViewHelper [Made and attached],Soren Malling,Sebastian Kurfuerst,2011-09-30 06:27,ViewHelpers,"",2010-02-22,"","",90,2010-02-22 08:42,"","",28850,"","","Hi,

I was lacking the function of creating a reset button in my fluid template so I made a viewHelper for this purpose and attached it here. Please give me feedback whether it's useful or not :)

Regards,

Søren"
6562,TYPO3.Flow,Task,"",Resolved,Must have,Make Object Manager API more consistent,Robert Lemke,Robert Lemke,2010-10-20 05:40,Object,1.0 alpha 8,2010-02-22,"","",100,2010-02-22 09:53,"","",28950,"","","As we're finally approaching a first beta version of FLOW3, it's probably the last chance to make a few changes to the Object Manager API:

 - get rid of the Object Factory and move the create() method to the Object Manager
 - rename getObject() to get()
 - remove all registration / unregistration methods from the Object Manager (we don't need that during runtime)
 - remove too low-level functions from the Object Manager's official API"
6564,TYPO3.Flow,Task,"",Resolved,Should have,Move the YAML parser from its own package to within FLOW3,Robert Lemke,Robert Lemke,2010-10-20 05:40,Configuration,1.0 alpha 8,2010-02-22,"","",100,2010-02-22 10:00,"","",29000,"","","In order to make FLOW3 self-contained, move the YAML parser to the FLOW3 package and removed the dependency to the YAML package."
6570,TYPO3.Fluid,Bug,"",Closed,-- undefined --,RuntimeException thrown in file ViewHelperVariableContainer.php,Arno Dudek,"",2011-05-06 04:23,"","",2010-02-23,"","",0,2010-02-23 11:21,"","",2597350,"","","<pre>
No value found for key ""F3\Fluid\ViewHelpers\FormViewHelper->formObject""
44 F3\Fluid\Core\ViewHelper\ViewHelperVariableContainer::get(""F3\Fluid\ViewHelpers\FormViewHelper"", ""formObject"")
43 F3\Fluid\ViewHelpers\Form\AbstractFormFieldViewHelper::getPropertyValue()
42 F3\Fluid\ViewHelpers\Form\CheckboxViewHelper::render(NULL)
41 call_user_func_array(array, array)
40 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate()
39 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes()
38 F3\Fluid\Core\ViewHelper\AbstractViewHelper::renderChildren()
37 F3\Fluid\ViewHelpers\FormViewHelper::render(""createAddressType"", array, NULL, NULL, NULL, NULL, """", NULL, NULL)
36 call_user_func_array(array, array)
35 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate()
34 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes()
33 F3\Fluid\Core\ViewHelper\AbstractViewHelper::renderChildren()
32 F3\Fluid\ViewHelpers\SectionViewHelper::render()
31 call_user_func_array(array, array)
30 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate()
29 F3\Fluid\View\TemplateView::renderSection(""mainbox"")
28 F3\Fluid\ViewHelpers\RenderViewHelper::render(""mainbox"", """", array)
27 call_user_func_array(array, array)
26 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate()
25 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes()
24 F3\Fluid\Core\Parser\SyntaxTree\RootNode::evaluate()
23 F3\Fluid\Core\Parser\ParsingState::render(F3\Fluid\Core\Rendering\RenderingContext)
22 F3\Fluid\View\TemplateView::renderWithLayout(""master"")
21 F3\Fluid\View\TemplateView::render()
20 F3\FLOW3\MVC\Controller\ActionController::callActionMethod()
19 F3\FLOW3\MVC\Controller\ActionController::processRequest(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
18 F3\FLOW3\MVC\Dispatcher::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
17 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
16 call_user_func_array(array, array)
15 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::FLOW3_AOP_Proxy_invokeJoinPoint(F3\FLOW3\AOP\JoinPoint)
14 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
13 F3\FLOW3\Security\Aspect\RequestDispatchingAspect::checkRequestHash(F3\FLOW3\AOP\JoinPoint)
12 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
11 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
10 F3\FLOW3\Security\Aspect\RequestDispatchingAspect::blockIllegalRequests(F3\FLOW3\AOP\JoinPoint)
9 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
8 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
7 F3\FLOW3\Security\Aspect\RequestDispatchingAspect::initializeSecurity(F3\FLOW3\AOP\JoinPoint)
6 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
5 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
4 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
3 F3\FLOW3\MVC\Web\RequestHandler::handleRequest()
2 F3\FLOW3\Core\Bootstrap::run()
1 require(""/Library/WebServer/htdocs/FLOW3-1.0.0-alpha7/Packages/Framework/FLOW3/Scripts/FLOW3.php"")
</pre>

Hi!

I have nearly the same problem like http://forge.typo3.org/issues/show/4277 and http://forge.typo3.org/issues/show/6004

Error at rendering of forms only at checkboxes:
The upper Exception thrown if the new-action in the controller is like this:

<pre>
    /**
     * Index action
     *
     * @param \F3\AddressBook\Domain\Model\AddressType $newAddressType
     * @return string
     * @dontvalidate $newAddressType
     */
    public function newAddressTypeAction(\F3\AddressBook\Domain\Model\AddressType $newAddressType = NULL) {
        $this->view->assign('newAddressType', $newAddressType);
    }
</pre>

Workaround for this (like http://forge.typo3.org/issues/show/6004):

<pre>
    /**
     * Index action
     *
     * @param \F3\AddressBook\Domain\Model\AddressType $newAddressType
     * @return string
     * @dontvalidate $newAddressType
     */
    public function newAddressTypeAction(\F3\AddressBook\Domain\Model\AddressType $newAddressType = NULL) {
        if ($newAddressType === NULL) {
            $newAddressType = $this->objectFactory->create('F3\AddressBook\Domain\Model\AddressType');
        }
        $this->view->assign('newAddressType', $newAddressType);
    }
</pre>

If this is done, an form error will shown: ""Checkbox viewhelpers can only be bound to properties of type boolean or array. Property ""default"" is of type ""NULL"".""

The expecting model definitions are:
<pre>
    /**
     * @var boolean
     */
    protected $default;

    /**
     * Sets default
     *
     * @param integer
     * @return void
     */
    public function setDefault($default) {
        $this->default = $default;
    }

    /**
     * Returns default
     *
     * @return integer
     */
    public function getDefault() {
        return $this->default;
    }
</pre>

workaround
<pre>
    /**
     * Sets default
     *
     * @param integer
     * @return void
     */
    public function setDefault($default) {
        $this->default = (boolean) $default;
    }

    /**
     * Returns default
     *
     * @return integer
     */
    public function getDefault() {
        return (boolean) $this->default;
    }
</pre>

In this case, I'm not sure if this should be this way.

And at least if all is done, the checkbox is checked by default, even than when $this->default is set to false."
6581,TYPO3.Flow,Bug,"",Resolved,Must have,"Updated objects considered new, causing exception",Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-02-24,"","",100,2010-02-24 06:07,"","",1801950,"","","When updated objects are to be persisted but seen through a property of another object first a ""new"" object is ""seen"" by the persistence layer and results in the same identifier being used twice in the underlying database (leading to a constraint violation)."
6591,TYPO3.Flow,Task,"",Rejected,Should have,Refactor F3\FLOW3\Log\Backend\FileBackend : getFormattedVarDump,Lukas Lentner,"",2012-03-14 05:53,Log,"","","","",50,2010-02-24 12:50,"","",29050,"","","Hi,

I did (my first) refactoring with this function.

Now:
* Smaller
* Less control structures,
* Logic outlines the similarities of an array and an object (to nest) -> I think easier to understand and more consistent

The 'big' change is in fact that I add afterwards the keys of the array/names of the properties. Before we looked after every possibility extra!

A Question:
Why this limitation with the 100 spaces?"
6596,TYPO3.Flow,Bug,"",Resolved,Should have,"Environment variables (context, rewrite urls, ...) are not recognized with FCGI + Apache",Robert Lemke,Robert Lemke,2010-10-20 05:40,Core,1.0 alpha 8,2010-02-25,"","",100,2010-02-25 09:20,"","",1801900,"","","On a Linux server with Apache + FastCGI + PHP the SetEnv directive in the .htaccess file seem to have no effect.

The reason is that directives like
<pre>
   SetEnv FLOW3_CONTEXT
</pre>
end up in PHP's $_SERVER array as ""REDIRECT_FLOW3_CONTEXT"" _under certain circumstances_.

I can't see when / why this happens, but FLOW3 could easily detect this."
6598,TYPO3.Flow,Task,"",Resolved,Should have,"Make global objects, that should be available in runtime evaluations, configurable",Andreas Förthner,Andreas Förthner,2010-10-20 05:40,AOP,1.0 alpha 10,2010-02-25,"","",100,2010-02-25 11:56,"","",29100,"","","At the moment only current.party can be referenced within a pointcut expression. There should be a configuration setting where you can register other objects under the ""current."" scope. The setting must have an unique name like ""party"" and a PHP statement, that retrieves this object like ""$objectManager->getObject('foo')->getSomething();"""
6599,TYPO3.Flow,Task,"",Resolved,Must have,Implement new syntax for policy resources including runtime constraints,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 8,2010-02-25,"","",100,2010-02-25 12:07,"","",29150,"","","example of a Policy.yaml:

<pre>
resources:
  methods:
    Conference_Model_Paper:
      class(F3\Conference\Domain\Model\Paper)
    Conference_Model_UpdateOwnPaper:
      Conference_Model_Paper && method(setTitle()) || method(setDescription(description == 'FLOW3')) && evaluate(this.speaker.person == current.party)
</pre>"
6600,TYPO3.Flow,Task,"",Resolved,Must have,Remove the privilege concept vom ACLs,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 8,2010-02-25,"","",100,2010-02-25 12:10,"","",29200,"","","ACL entries will simply define the access privilege by defining a GRANT or DENY for a resource. Example Policy.yaml entry:

acls:
  Speaker:
    UpdateOwnPaper: GRANT
    ownAccount: GRANT
    deleteAccount: DENY

The policy service should then provide two API methods: hasAccessOnJoinPoint() and hasAccessOnResource()"
6601,TYPO3.Flow,Task,"",On Hold,Could have,Introduce a new roles definition syntax including runtime constraints,Andreas Förthner,Andreas Förthner,2010-10-20 05:39,Security,"",2010-02-25,"","",0,2010-02-25 12:13,"","",29250,"","","The roles definition in the Policy.yaml should look like that in the future:

roles:
  Administrator:
    parentRoles: []
  Speaker:
    parentRoles: [Administrator]
    constraint: party.name == ""andi"" && party.address.street == ""at home""

Note the new feature of runtime constraints!"
6602,TYPO3.Flow,Feature,"",New,Could have,Implement after invocation handling,Andreas Förthner,Andreas Förthner,2011-01-07 05:15,Security,"",2010-02-25,"","",0,2010-02-25 12:19,"","",1780500,"","",The basic idea behind after invocation handling ist to filter return values of methods according to a security policy. We would need a concept for such a policy and a use case for the whole feature.
6603,TYPO3.Flow,Feature,"",New,Must have,Provide a policy management API,Andreas Förthner,Andreas Förthner,2010-10-20 05:39,Security,"",2010-02-25,"","",0,2010-02-25 12:20,"","",1780450,"","",At some point in time we will need a good API to be able to manage the security policy not only through a yaml configuration file.
6604,TYPO3.Flow,Feature,"",Resolved,Must have,Implement QueryRewriting according to the security policy,Andreas Förthner,Andreas Förthner,2010-10-20 05:39,Security,"",2010-03-04,"",30.00,100,2010-02-25 12:30,"","",1780400,"","","Queries to the persistence layer should be automatically rewritten according to the security policy. This will speed up things a lot, as you'll only get objects you'll actually are allowed to see.

One idea was to define constraints for models in the Policy.yaml:

<pre>
resources:
  models:
    F3\Party\Domain\Model\Account:
      ownAccount: this.party == current.party && this.credentialsSourec != 'foo'
</pre>


Another idea came to my mind, that we should discuss:

Often you want to define access for specific models on a per object basis. Meaning you want to define which roles should be allowed to see a specific object. This ends up in adding roles to objects, which we could do by a cool model security advice. We'll have to discuss this in details!"
6605,TYPO3.Flow,Feature,"",Resolved,Should have,Integrate the security policy into resource management,Andreas Förthner,Andreas Förthner,2010-12-08 07:00,Security,1.0 alpha 14,"","",30.00,100,2010-02-25 12:33,"","",1809200,"","","Resources are basically objects that can be secured by model security (see #6604). We'll have to find a solution how secured files have to be handled by the resource manager.

One possiblity would be:

We have a special virtual folder named after the secure session key that holds symlinks to all resources the current user is allowed to access. We could also add a dynamic rewrite rule that restricts access to this folder to the IP of this user. The folder would have to ""expire"" with the user session."
6606,TYPO3.Flow,Task,"",Closed,Must have,RequestHash should be implemented by a firewall filter,Andreas Förthner,Andreas Förthner,2011-02-25 03:45,Security,1.0 beta 1,2010-02-25,"","",0,2010-02-25 12:39,"","",29300,"","",The currently disabled feature of a request hash checking the correctness of a submitted form has to be reimplemented as a firewall filter. It would be nice to extract the feature completely from the form view helper and put it in an advice of the security framework.
6607,TYPO3.Flow,Feature,"",Closed,Must have,Enable security for REST services,Andreas Förthner,Andreas Förthner,2011-09-30 06:24,Security,"",2010-02-25,"","",0,2010-02-25 12:41,"","",1810850,"","","We'll have to check what we need to do for that in regards of authentication, authorization and ""session"" management"
6609,TYPO3.Flow,Feature,"",Closed,Should have,Implement joins for queries,Andreas Förthner,Karsten Dambekalns,2012-03-12 12:48,Persistence,"","","","",0,2010-02-25 13:09,"","",1780350,"","","One possibility for a join implementation could work as follows: 

First a precondition has to be considered: You are only allowed to join objects that have a relation to each other. 

I.e. a person may have several e-mail-adresses. A possible join could now be, to load a person from the repository and directly load (join) all e-mail-adresses with the tld "".de"" this person has onto the person object. The technical effect would be that the person is not loaded with all her e-mail-adresses but only with the joined ones.

Of course this is conceptually not correct, because the person in fact might have other addresses that would not be there by executing this join query. There are two solutions for this:

1. If you write a join query, you have to be aware that the result is only a part of the truth, meaning there could be more objects in the aggregate you didn't get by your query.
2. All objects you didn't get directly (didn't match the join condition) are lazy loaded if you want to access them at a later point. This would need a lazy loading mechanism that can lazy load collections (array, SplObjectStorage) on a per element basis.

To conclude the whole story. Joins in the object world can be used to reduce the objects that have to be loaded at a time. Meaning they are more like a optimization than a conceptual query construct."
6620,TYPO3.Flow,Bug,"",Resolved,Should have,"./flow3 cache flush throws Exception in ""..../Cache/Backend/FileBackend.php line 197""",Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 8,2010-02-26,"","",100,2010-02-26 10:13,"","",1801850,"","","developer@wda ~ $ ./flow3 cache flush

Uncaught Exception in FLOW3 #1: Warning: Invalid argument supplied for foreach() in /home/developer/vhosts/flow3/www/Packages/Framework/FLOW3/Classes/Cache/Backend/FileBackend.php line 197
thrown in file Packages/Framework/FLOW3/Classes/Error/ErrorHandler.php
in line 82"
6628,TYPO3.Flow,Bug,"",Resolved,Should have,Default values in F3\FLOW3\Locale\Locale,Arno Dudek,Karol Gusak,2010-10-20 05:39,I18n,"","","","",100,2010-02-27 09:59,"","",1780300,"","","Hi!

If you create an locale object (\F3\FLOW3\Locale\Locale) with only the language, the default values interferes.

For example: If you create locale objects out of the browser env. 'accept-language', the locale settings are like this: de,de-DE;q=0.8,en-EN;q=0.5,en-US; ...

You'll see the first item is only ""de"". After create a locale you get:
->getLanguage() = 'de'
->getRegion() = 'EN'

Perhaps needed here an locale mapping with defaults to avoid this. I've done this once but i'm not shure if the list is completed. The proprty ""script"" is missing. I think it good enough for this time ;)

<pre>
		$this->locale = array(
			'af' => array('encode' => 'UTF-8', 'af_ZA'),
			'am' => array('encode' => 'UTF-8', 'am_ET'),
			'be' => array('encode' => 'UTF-8', 'be_BY'),
			'bg' => array('encode' => 'UTF-8', 'bg_BG'),
			'ca' => array('encode' => 'UTF-8', 'ca_ES'),
			'cz' => array('encode' => 'UTF-8', 'cs_CZ'),
			'da' => array('encode' => 'UTF-8', 'da_DK'),
			'de' => array('encode' => 'UTF-8', 'de_DE', 'de_AT', 'de_CH', 'de_LU'),
			'el' => array('encode' => 'UTF-8', 'el_GR'),
			'en' => array('encode' => 'UTF-8', 'en_GB', 'en_US', 'en_AU', 'en_CA', 'en_IE', 'en_NZ'),
			'es' => array('encode' => 'UTF-8', 'es_ES'),
			'et' => array('encode' => 'UTF-8', 'et_EE'),
			'eu' => array('encode' => 'UTF-8', 'eu_ES'),
			'fi' => array('encode' => 'UTF-8', 'fi_FI'),
			'fr' => array('encode' => 'UTF-8', 'fr_FR', 'fr_CH', 'fr_CA', 'fr_BE'),
			'he' => array('encode' => 'UTF-8', 'he_IL'),
			'hi' => array('encode' => 'UTF-8', 'hi_IN'),
			'hr' => array('encode' => 'UTF-8', 'hr_HR'),
			'hu' => array('encode' => 'UTF-8', 'hu_HU'),
			'hy' => array('encode' => 'UTF-8', 'hy_AM'),
			'is' => array('encode' => 'UTF-8', 'is_IS'),
			'it' => array('encode' => 'UTF-8', 'it_IT', 'it_CH'),
			'ja' => array('encode' => 'UTF-8', 'ja_JP'),
			'kk' => array('encode' => 'UTF-8', 'kk_KZ'),
			'ko' => array('encode' => 'UTF-8', 'ko_KR'),
			'lt' => array('encode' => 'UTF-8', 'lt_LT'),
			'nl' => array('encode' => 'UTF-8', 'nl_NL', 'nl_BE'),
			'no' => array('encode' => 'UTF-8', 'no_NO'),
			'pl' => array('encode' => 'UTF-8', 'pl_PL'),
			'pt' => array('encode' => 'UTF-8', 'pt_PT', 'pt_BR'),
			'ro' => array('encode' => 'UTF-8', 'ro_RO'),
			'ru' => array('encode' => 'UTF-8', 'ru_RU'),
			'sk' => array('encode' => 'UTF-8', 'sk_SK'),
			'sl' => array('encode' => 'UTF-8', 'sl_SI'),
			'sr' => array('encode' => 'UTF-8', 'sr_YU'),
			'sv' => array('encode' => 'UTF-8', 'sv_SE'),
			'tr' => array('encode' => 'UTF-8', 'tr_TR'),
			'uk' => array('encode' => 'UTF-8', 'uk_UA'),
			'zh' => array('encode' => 'UTF-8', 'zh_CN', 'zh_HK', 'zh_TW'),
		);

</pre>"
6640,TYPO3.Flow,Feature,"",Rejected,-- undefined --,NoSQL Persistence Backend,Alexandre Martinez,Karsten Dambekalns,2010-10-20 05:39,Persistence,"",2010-02-28,"","",0,2010-02-28 15:52,"","",1780250,"","","It would be interesting to have an implementation of a NoSQL (CouchDb, MongoDb or the like) storage engine backend for persistence layer. "
6646,TYPO3.Flow,Feature,"",Resolved,Should have,Response should send correct content type header if format is rss / atom,Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 8,2010-03-01,"","",100,2010-03-01 06:22,"","",1801800,"","","The Web Request Handler could add a Content-Type header to the response which states the correct mime type according to the request's format:

rss.xml => application/rss+xml
rss =>application/rss+xml
atom.xml => application/atom+xml
atom => application/atom+xml

"
6647,TYPO3.Flow,Bug,"",Resolved,Should have,ObjectAccess doesn't know that is*() is also a possible getter method name,Robert Lemke,Robert Lemke,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-03-01,"","",100,2010-03-01 06:56,"","",1801750,"","","ObjectAccess::getProperty() tries to call a method getFoo() in order to retrieve property ""foo"". However, it doesn't know that isFoo() is also a valid getter name for boolean properties."
6660,TYPO3.Flow,Task,"",Resolved,Must have,Write documentation for the new security features in alpha8,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 8,2010-03-02,"","",100,2010-03-02 11:07,"","",29500,"","","- New policy syntax
- New security context handling
- Runtime constraints
"
6661,TYPO3.Flow,Task,"",Resolved,Must have,Write documentation for the new dynamic AOP features,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,AOP,1.0 alpha 8,2010-03-02,"","",100,2010-03-02 11:08,"","",29550,"","",.
6680,TYPO3.Flow,Bug,"",Closed,Must have,Make FLOW3 open_basedir aware,Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Environment,1.0 alpha 8,2010-03-03,"","",0,2010-03-03 12:20,"","",1801700,"","","FLOW3 uses the Default Temporary Path for the Operating Systems. In Linux '/tmp' is used for different operations. This behaviour triggers an error on environments where a open_basedir ini setting was set. 
Perhaps it is better to use a Path within the FLOW3 Root Path in 'Data/Temporary' or determine the temporary path out of upload_tmp_dir or session_save_path ini setting."
6681,TYPO3.Flow,Feature,"",Resolved,Should have,Make the php cli executable configurable for the flow3 command,Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 8,2010-03-03,"","",100,2010-03-03 12:25,"","",1801650,"","","The Path to the php binary should be configurable outside of the flow3 command line tool to allow an easy update of the flow3 cli tool.
It should also be possible to configure some extra parameters for the cli. For example a path to the configuration file (php.ini)"
6685,TYPO3.Flow,Feature,"",Resolved,Must have,Implement countAll() and countByFoo('bar') in the Persistence Repository,Jochen Rau,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-03-03,"","",100,2010-03-03 15:14,"","",1801600,"","",I have implemented this handy methods in Extbase to invoke $query->matching()->count().
6691,TYPO3.Fluid,Bug,"",Resolved,Could have,Backslash in Textfield ViewHelper,Michael Sauter,"",2010-10-20 05:44,"","",2010-03-04,"","",0,2010-03-04 04:33,"","",2597300,"","","This:
@<f:form.textfield name=""somename"" value=""F3\"" size=""60"" />@

results in the following HTML code:

@<input type=""text"" name=""somename"" value=""F3&quot; size="" />@

I would expect the following (as is the case if you write plain HTML):

@<input type=""text"" name=""somename"" value=""F3\"" size=""60"" />@"
6693,TYPO3.Flow,Bug,"",Resolved,Should have,Request Bash if you use bash in the flow3 shell script,Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 8,2010-03-04,"","",100,2010-03-04 09:05,"","",1801550,"","","The first line of flow3 should read as @#!/bin/bash@ instead of@#!/bin/sh@.
There is no symlink on every environment from /bin/sh to /bin/bash and the flow3 script uses bash features. 
At least for all common Linux environments and Mac Environments there is bash available, so we should request it."
6694,TYPO3.Flow,Bug,"",Resolved,Could have,flow3 shell script uses non POSIX commands,Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 8,2010-03-04,"","",100,2010-03-04 09:25,"","",1801500,"","","On line 36 (rev3903):
<pre>
FLOW3ROOTPATH=""$(dirname ""$(test -L ""$0"" && readlink ""$0"" || echo ""$0"")"")""
</pre>

@readlink@ is not POSIX compliant. So there is no guarantee that the shell script works on every Unixoid OS - for instance MAC, there is no readlink.

A working solution for the above problem would be:

<pre>
#!/bin/bash
# Path the script is called from.
FLOW3_ORIGINALPATH=""$(pwd)""
cd ""$(dirname $0)""
FLOW3_ROOTPATH=""$(pwd)""
cd ""${FLOW3_ORIGINALPATH}""
</pre>
"
6712,TYPO3.Flow,Feature,"",Accepted,Should have,Implement mixin support,Robert Lemke,Robert Lemke,2011-11-07 18:18,AOP,"","","",18.00,0,2010-03-05 12:46,"","",1780200,"","","With the current implementation of introductions / intertype declarations it is -like in most other AOP frameworks - only possible to introduce interfaces. However, it would be very handy being able to introduce properties along with some methods.

A very common use case would be introducing a new property along with a getter and a setter method:

<pre>
/**
 * @entity
 * @scope prototype
 */
class BonusCustomerDetails {

  /**
    * @var string
    */
   protected $bonusCode;

   public function getBonusCode() {
       return $this->bonusCode;
   }

   public function setBonusCode($bonusCode) {
      $this->bonusCode = $bonuscode;
   }
}
</pre>

This property + methods could be introduced into the Customer class by using a new annotation:

<pre>
/**
 * @mixin F3\Bar\Domain\Model\Customer
 * @entity
 * @scope prototype
 */
class BonusCustomerDetails {

  /**
    * @var string
    */
   protected $bonusCode;

   public function getBonusCode() {
       return $this->bonusCode;
   }

   public function setBonusCode($bonusCode) {
      $this->bonusCode = $bonuscode;
   }
}
</pre>

The @mixin annotation would implicitly generate a new aspect which implements around advices for the getter and setter method. Additionally a new property will be introduced into the Customer class which refers to the BonusCustomerDetails. The implementation of the around advice now simply refers to the original methods within the BonusCustomerDetails."
6718,TYPO3.Flow,Bug,"",Resolved,-- undefined --,UnexpectedValueException thrown in file Session.php,Georg Ortner,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-03-06,"","",100,2010-03-06 04:53,"","",1801450,"","","Object not found
6 SplObjectStorage::offsetGet(F3\Test\Domain\Model\Category_AOPProxy_Development)
5 F3\FLOW3\Persistence\Session::getIdentifierByObject(F3\Test\Domain\Model\Category_AOPProxy_Development)
4 F3\FLOW3\Persistence\Session::unregisterReconstitutedEntity(F3\Test\Domain\Model\Category_AOPProxy_Development)
3 F3\FLOW3\Persistence\PersistenceManager::persistAll()
2 F3\FLOW3\Core\Bootstrap::run()
1 require(""/var/www/mydomain.dev/Packages/Framework/FLOW3/Scripts/FLOW3.php"")

This happens when the remove() Method of a repository is called. But still the Object is removed afterward.  
 
public function createAction() {
    $object = $this->objectManager->create(""F3\Test\Domain\Model\Category"");
    $this->categoryRepository->add($object);
}

public function removeAction( \F3\Test\Domain\Model\Category $category ) {
    $this->categoryRepository->remove($category);
}

I'm using latest revision at this time and mysql as persistance backend.
"
6724,TYPO3.Flow,Feature,"",Resolved,Should have,"Internationalization, locale, multi-language ect.",Arno Dudek,Karol Gusak,2010-10-20 05:39,I18n,"","","","",100,2010-03-06 12:22,"","",1780150,"","","Hi!

(first: sorry for my bad english ;)

I'm testing FLOW3 for my project with multi-language support. For that I needed a view helper which do that like the f:translate. In the attachment is my work now. It's an extended internationalization concept. I thought it's an good idea to put them all into a subpackage called ""Internationalization"". I could imagine to replace this with the current subpackage locale of FLOW3 (FLOW3/Locale/).

I hope you'll find it usefull or even inspired.

For now the package is just an application package. If you think its usefull and shoul be integrated, I will try to write a patch for the FLOW3/Locale/.

The package handles the current used locale and provide many cool features:
- extended locale class with seperatly validation by using the CLDR
- CLDR reader
- language fallback by configuration and/or by getting the accept language of the browser.
- loading of language files
- supported language files are XML (also TYPO3 files) and YAML (better for editing)
- and view helper for translated strings with more cool options

The language file handling is a little bit different to TYPO3. Every language get an own directory:
Resources/Privat/Languages/Standard/en_US or Resources/Privat/Languages/Standard/de_DE
I thought this would be better, if there are also images with text.

The view helper ""localized.string"" comes with new options ""pluralValue"" and ""splitKey"". More view helper, like localized.resource, can come.

= Examples =

Localized strings (e.g. in the YAML-file Standard/en_US/LocalizedStrings.yaml)
<pre>
exampleString1: 'Firstname:'
exampleString2:
  1: 'My %sst %s String for {split: Me, You}'
  2: 'My %snd %s String for {split: Me, You}'
  4: 'My %sth %s String for {split: Me, You}'
</pre>
Example 1
<pre>
<lang:localized.string key=""exampleString1""/> A name
</pre>
Output:
<pre>
Firstname: A name
</pre>
Example 2: Replace strings, Plurals and split options
<pre>
1: <lang:localized.string key=""exampleString2"" packageName=""AnotherPackage"" controllerName=""AnotherController"" replaceStrings=""{0: 1, 1: 'replaced'}"" pluralValue=""1"" splitKey=""0""/>
2: <lang:localized.string key=""exampleString2"" packageName=""AnotherPackage"" controllerName=""AnotherController"" replaceStrings=""{0: 2, 1: 'replaced'}"" pluralValue=""2"" splitKey=""1""/>
3: <lang:localized.string key=""exampleString2"" packageName=""AnotherPackage"" controllerName=""AnotherController"" replaceStrings=""{0: 3, 1: 'replaced'}"" pluralValue=""3"" splitKey=""0""/>
4: <lang:localized.string key=""exampleString2"" packageName=""AnotherPackage"" controllerName=""AnotherController"" replaceStrings=""{0: 4, 1: 'replaced'}"" pluralValue=""4"" splitKey=""1""/>
5: <lang:localized.string key=""exampleString2"" packageName=""AnotherPackage"" controllerName=""AnotherController"" replaceStrings=""{0: 5, 1: 'replaced'}"" pluralValue=""5"" splitKey=""0""/>
</pre>
Output:
<pre>
1: My 1st replaced String for Me
2: My 2nd replaced String for You
3: My 3nd replaced String for Me  // Here you can see ""3nd"" cause this is missing in the language file.
4: My 4th replaced String for You
5: My 5th replaced String for Me  // Plural values greater than or equal to the current value takes the last matching.
</pre>

*Nevermore ""1 Records found"" !!!* :D

lg ad"
6727,TYPO3.Flow,Task,"",Resolved,Should have,Refactor the ConjunctionValidator and DisjunctionValidator,Lukas Lentner,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 8,2010-03-15,"",1.00,100,2010-03-07 11:23,"","",29600,"","","Hi,

I changed some comments in the DisjunctionValidator which where copied from the ConjunctionValidator without adapting. I also simplified both validators not needing anymore a variable $result.

Lukas"
6736,TYPO3.Flow,Feature,"",Resolved,Should have,"Allow comfortable chaining of constraints with Query::logicalAnd() and logicalOr(), or not? ;-)",Jochen Rau,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 10,2010-06-10,"",1.00,100,2010-03-08 10:48,"","",1804900,"","","Currently it is very unhandy to chain multiple constraints via logicalAnd() or logicalOr().

I am going to implement two independent approaches in Extbase (marked a non-conform to the api as long as they are not synced with FLOW3).

This issue is related to #6735 of Extbase."
6742,TYPO3.Fluid,Bug,"",Closed,Should have,If / For ViewHelper nesting issue,Frank Mey,"",2010-10-20 05:44,ViewHelpers,"",2010-03-09,"","",100,2010-03-09 06:03,"","",2597250,"","","Hi,

I tried to implement this control structure in a Fluid section:

<pre>
...

<f:if condition=""{datasheet.strUserLang} == ESPE"">
	 
	  <p>Overall Project Data:</p>
	  <a href=""{datasheet.dateipfad}.xlsx"">Excel 2007</a><br />
	  <a href=""{datasheet.dateipfad}_2003.xlsx"">Excel 2003</a><br /><br />
	  <p>country-specific project data:</p>
	  
	  <f:for each""{datasheet.arrProjLang}"" as=""foo""><p>Download your Excelsheets (2007/2003) for country {foo}:</p><a href=""{datasheet.dateipfad}_{foo}.xlsx"">Excel 2007</a><br /><a href=""{datasheet.dateipfad}_{foo}_2003.xlsx"">Excel 2003</a><br />
	  </f:for>
	
 </f:if> 

...
</pre>

Fluid throws an error : 
<pre>
Tx_Fluid_Core_Parser_Exception

Templating tags not properly nested. Expected: Tx_Fluid_ViewHelpers_IfViewHelper; Actual: Tx_Fluid_ViewHelpers_ForViewHelper
</pre>

Isn't it possible to nest if-constructs with for each - loops by now ?
"
6757,TYPO3.Fluid,Task,Feature #26665: Fluid: Implement String comparison,Resolved,Should have,support literal strings in boolean arguments,Peter Niederlag,"",2012-08-11 11:35,Core,"",2010-03-10,"","",100,2010-03-10 04:31,"","",29850,"","","the 'if' viewhelper should support comparison on strings.

This can easily be fixed by adding [a-zA-Z] on $booleanExpressionTextNodeCheckerRegularExpression in Core/Parser/SyntaxTree/ViewHelperNode.php, see attached patch. if works like a charm with this patch.

However I fear, something else probably breaks badly?

"
6761,TYPO3.Flow,Bug,"",Resolved,Must have,Security context in session grows with each load,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:39,Security,"",2010-03-11,"",4.00,100,2010-03-10 07:33,"","",1780100,"","","Since the latest changes to security it seems something goes wrong with object serialization to the session. It grows exponentially with each page load until the memory limit is hit.

Reproducible by logging in and calling the same page again and again... Even failing login tries have that effect."
6773,TYPO3.Flow,Bug,"",Resolved,Should have,Debug Exception Handler does not escape characters in exception message,Robert Lemke,Robert Lemke,2010-10-20 05:40,Error,1.0 alpha 8,2010-03-10,"",0.10,100,2010-03-10 11:55,"","",1801400,"","","The debug exception Handler does not escape characters in exception message, so that strings like ""<type>"" are unnoticed because they are interpreted as tags."
6774,TYPO3.Flow,Feature,"",Resolved,Should have,Improve error message in Property Mapper if type hint of method parameter is invalid,Robert Lemke,Robert Lemke,2010-10-20 05:40,Property,1.0 alpha 8,2010-03-10,"",1.00,100,2010-03-10 12:00,"","",1801350,"","","If the type hint or doc comment of a parameter / property of the target object is invalid, the property mapper doesn't notice but just passes it to Utility\TypeHandling which in turn throws an InvalidArgumentException.

This exception could be caught and a more meaningful mapping error issued by the property mapper."
6778,TYPO3.Kickstart,Bug,"",Resolved,Should have,Model Doc Comment incorrect,Michael Sauter,Christopher Hlubek,2010-10-20 05:48,"",1.0 alpha 13,2010-03-13,"","",0,2010-03-10 16:57,"","",2740550,"","","When creating models, the doc comment of the attribute accessors looks like this:
@* Get/Set the ModelName propertyName>@

Attached patch removes the erroneous &gt; sign in the template."
6779,TYPO3.Fluid,Bug,"",Closed,Could have,{} parsed inconsistently?,Michael Sauter,"",2011-05-06 04:25,"","",2010-03-10,"","",0,2010-03-10 17:17,"","",2597200,"","","If the variable inside {} in Fluid is not found, Fluid displays nothing, so e.g.
@{foo}@
outputs nothing if foo does not exist.
If you have the following in your template (space inbetween brackets):
@{ }@
the output is nothing as well, but
@{}@
results in two brackets.
And this:
@{ foo }@
will output:
@{ foo }@

For example, this causes a problem in the kickstarter package: The syntax of the generated repository file is invalid, because the repository class does not contain anything between the opening and closing brackets ... which means these are not written at all."
6780,TYPO3.Flow,Bug,"",Resolved,Must have,ResourceViewHelper wrong path to persisted resources  ,Georg Ortner,Karsten Dambekalns,2010-10-20 05:40,Resource,1.0 alpha 8,2010-03-11,"",1.00,100,2010-03-11 04:36,"","",1801300,"","","Template code:
<img src=""{f:uri.resource(resource: article.image.originalResource, title: article.image.title)}"" style=""max-width: 100%"" alt=""{article.image.title}"" />

Result:
<img src=""http://mydomain.dev/_Resources/Persistent/78f83c09f79a0951591566bd464c590deb5f9218/.jpg"" style=""max-width: 100%"" alt="""" />

There is one slash too much before the extension:
78f83c09f79a0951591566bd464c590deb5f9218/.jpg



"
6781,TYPO3.Flow,Feature,"",Resolved,Should have,Implement Swift Mailer integration,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,"",1.0 alpha 8,2010-03-18,"",24.00,100,2010-03-11 05:01,"","",1801250,"","",For the App we need a mailer and Swift Mailer seems to be the right choice. We need some integration in form of a separate package.
6786,TYPO3.Flow,Bug,"",Resolved,Must have,Persistence Query Orderings integers ordered like strings,Georg Ortner,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-03-16,"",2.00,100,2010-03-11 08:59,"","",1801200,"","","Code (property order is declared as INT):
<pre>
$query->matching( $query->equals('parentUUID', ''))
    ->setOrderings(array('order' => \F3\FLOW3\Persistence\QueryInterface::ORDER_ASCENDING))
</pre>

The result is:

1
10
12
17
2
29
3

If order was a string this would be fine but for an integer everyone would expect:

1
2
3
10
12
17
29"
6787,TYPO3.Flow,Bug,"",Resolved,Must have,New accounts cannot be persisted and existing accounts cannot be found,Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 8,2010-03-11,"",1.00,100,2010-03-11 10:31,"","",1801150,"","",Since the last commit new accounts cannot be persisted and existing accounts cannot be found
6806,TYPO3.Flow,Bug,"",Resolved,Should have,EmailAddressValidator missing IP addresses,Falk Kühnel,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 8,2010-03-15,"",1.00,100,2010-03-12 05:13,"","",1801100,"","","The EmailAddressValidator misses email addresses with ip parts like 249 in them.

I do not know, if this is on purpose (i cant think of a reason why) so i attached a patch."
6807,TYPO3.Flow,Bug,"",Resolved,Must have,"Uncaught Exception in FLOW3 #1264589155: Object ""F3\FLOW3\Object\SessionRegistry"" is not registered",Thomas Fritz,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 8,2010-03-15,"",1.00,100,2010-03-12 05:20,"","",1801050,"","","<pre>
developer@wda ~ $ vhosts/flow3/www/flow3 cache flush
Flushed all caches.

Uncaught Exception in FLOW3 #1264589155: Object ""F3\FLOW3\Object\SessionRegistry"" is not registered.
thrown in file Packages/Framework/FLOW3/Classes/Object/Container/AbstractObjectContainer.php
in line 118
</pre>

This also happens when opening the welcome page.

Revision 3933. Everything deleted in Data/Temporary not Modifications."
6808,TYPO3.Fluid,Bug,"",Resolved,Should have,using f:link.action inside f:form breaks hmac verification,Peter Niederlag,"",2010-10-20 05:44,"","",2010-03-12,"","",100,2010-03-12 06:58,"","",2597150,"","","It seems impossible to link to another Page/Controller/Action/Plugin with f:link.action inside a f:form.

Test-Template:

<pre>
<f:form controller=""Mycontroller"" action=""myaction"" name=""newObject"" object=""{newObject}"">
    <!-- if we don't use a property of newObject the error is not triggered -->
    <f:form.textbox property=""foo"" />

    <f:form.submit name=""mySubmit"" value=""Submit"" />

    <!-- adding a link.action inside form with an Object triggers an ""hmac could not be verified"" error -->
    <!-- for some reason 'action' is dropped in RequestHashService->generateRequestHash() -->
    <!-- this happens only when we use a property of newObject -->
    <f:if condition=""true"">
            <f:link.action action=""baz"" pluginName=""pi3"" controller=""foobar"" pageUid=""14"">Jetzt anschliessen</f:link.action>
    </f:if>
</f:form>
</pre>

Probably that's due to the fact that the Plugin (pix) seems not to be taken into account, when generating the hmac/Requesthash?"
6809,TYPO3.Fluid,Bug,"",Resolved,Must have,using f:link.action inside f:form breaks hmac verification,Peter Niederlag,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-03-12,"","",100,2010-03-12 06:59,"","",2597100,"","","It seems impossible to link to another Page/Controller/Action/Plugin with f:link.action inside a f:form.

Test-Template:

<pre>
<f:form controller=""Mycontroller"" action=""myaction"" name=""newObject"" object=""{newObject}"">
    <!-- if we don't use a property of newObject the error is not triggered -->
    <f:form.textbox property=""foo"" />

    <f:form.submit name=""mySubmit"" value=""Submit"" />

    <!-- adding a link.action inside form with an Object triggers an ""hmac could not be verified"" error -->
    <!-- for some reason 'action' is dropped in RequestHashService->generateRequestHash() -->
    <!-- this happens only when we use a property of newObject -->
    <f:if condition=""true"">
            <f:link.action action=""baz"" pluginName=""pi3"" controller=""foobar"" pageUid=""14"">Link to somewhere else</f:link.action>
    </f:if>
</f:form>
</pre>

Probably that's due to the fact that the Plugin (pix) seems not to be taken into account, when generating the hmac/Requesthash?"
6822,TYPO3.Fluid,Bug,"",Closed,Should have,unhelpful error message if template cannot be read,Florian Staudacher,"",2011-05-06 04:25,Core,"",2010-03-14,"","",0,2010-03-14 09:28,"","",2597050,"","","I reported this bug there: http://bugs.typo3.org/view.php?id=13810 earlier and was told to put it here, so here it comes:

in typo3/sysext/fluid/Classes/View/TemplateView.php on line 358 the method parseTemplate() should return a helpful error message in case the file cannot be read.
I had forgotten to give the server read access to my template file and the only thing i got over and over was

Tx_Fluid_Core_Parser_Exception
Parse requires a template string as argument, boolean given.

from the typo3/sysext/fluid/Classes/Core/Parser/TemplateParser.php on line 271.
I mean if you know that file_get_contents returns false if there is an error, it's simple to look for the error, but even that involves looking at the code to see how the file gets read.

Please replace with/add a more suiting error message "
6844,TYPO3.Fluid,Feature,"",Resolved,Should have,"Remove ""shut-up"" operator @",Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:44,Core,1.0.0 alpha 8,2010-03-15,"",2.00,100,2010-03-15 09:55,"","",2604200,"","","Remove the ""shut-up"" operator @ and instead create a new ViewHelper ""raw""."
6846,TYPO3.Flow,Bug,"",Resolved,Should have,The static object container is not rebuilt automatically if the FLOW3 revision changed,Robert Lemke,Robert Lemke,2010-10-20 05:40,Core,1.0 alpha 8,2010-03-15,"",2.00,100,2010-03-15 10:17,"","",1801000,"","","If the FLOW3 revision changes, all caches are flushed. Because the static object container is no regular cache, it is missed and still used even if the FLOW3 revision changed. This can lead to fatal errors if classes have been deleted or otherwise modified."
6847,TYPO3.Flow,Bug,"",Resolved,Must have,Straight value property injection fails with strings in static object container,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 8,2010-03-15,"",1.00,100,2010-03-15 10:46,"","",1800950,"","","If strings are to be injected as straight values via property injection, the resulting code in the static object container leads to
<pre>
Parse error: syntax error, unexpected ':' in /Users/karsten/Sites/typo3v5/Data/Temporary/f82c7e3cb126/StaticObjectContainer.php on line ...
</pre>or other similar errors.

This is because the generated code looks like (the string misses quotes):
<pre>
$o->setLayoutRootPath(package://TYPO3/Private/TypoScript/Layouts/);
</pre>"
6868,TYPO3.Flow,Feature,"",Resolved,Should have,Classes tagged as value object must have a constructor and no setters,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-03-16,"",2.00,100,2010-03-16 05:20,"","",1800900,"","","To enforce the concept of (immutable) value objects, the class scheme builder should assure that classes which are tagged as properties

* have a constructor method which is used for setting the object's properties
* don't have any setter methods

If these rules are neglected, the persistence framework will run in trouble because it assumes that all values are set after the constructor has been called."
6869,TYPO3.Flow,Feature,"",Resolved,Must have,Enable the property mapper to create value objects,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Property,1.0 alpha 8,2010-03-16,"",2.00,100,2010-03-16 05:28,"","",1800850,"","","Immutable value objects don't have any setter methods. However we want the property mapper to be able creating such objects (e.g. after a form has been submitted). Therefore the transformToObject method needs to be aware of this situation.

If no setter methods could be found (well, if ObjectAccess doesn't allow setting the property), the mapper should check if a constructor parameter of that name exists. The challenge however is that properties cannot be set individually during the for loop but must be collected and then set while creating the object."
6894,TYPO3.Flow,Bug,"",Closed,Must have,F3\FLOW3\Security\Exception\MissingConfigurationException thrown in file HashService.php,Nys ,Karsten Dambekalns,2010-10-20 05:40,- Error Handler Report -,1.0 alpha 8,2010-03-17,"",1.00,100,2010-03-17 08:54,"","",1800800,"","","You must configure an encryption key for the HashService
15 F3\FLOW3\Security\Cryptography\HashService::injectSettings(array)
14 F3\FLOW3\Object\ObjectBuilder::injectProperties(array, F3\FLOW3\Security\Cryptography\HashService)
13 F3\FLOW3\Object\ObjectBuilder::createObject(""F3\FLOW3\Security\Cryptography\HashService"", F3\FLOW3\Object\Configuration\Configuration, array)
12 F3\FLOW3\Object\ObjectManager::getObject(""F3\FLOW3\Security\Cryptography\HashService"")
11 F3\FLOW3\Object\ObjectBuilder::injectProperties(array, F3\FLOW3\Security\Channel\RequestHashService)
10 F3\FLOW3\Object\ObjectBuilder::createObject(""F3\FLOW3\Security\Channel\RequestHashService"", F3\FLOW3\Object\Configuration\Configuration, array)
9 F3\FLOW3\Object\ObjectManager::getObject(""F3\FLOW3\Security\Channel\RequestHashService"")
8 F3\FLOW3\Object\ObjectBuilder::injectArguments(array, array)
7 F3\FLOW3\Object\ObjectBuilder::createObject(""F3\FLOW3\Security\Aspect\RequestDispatchingAspect"", F3\FLOW3\Object\Configuration\Configuration, array)
6 F3\FLOW3\Object\ObjectManager::getObject(""F3\FLOW3\Security\Aspect\RequestDispatchingAspect"")
5 F3\FLOW3\AOP\Advice\AfterThrowingAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
4 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
3 F3\FLOW3\MVC\Web\RequestHandler::handleRequest()
2 F3\FLOW3\Core\Bootstrap::run()
1 require(""C:\xampp\htdocs\tutorial\Packages\Framework\FLOW3\Scripts\FLOW3.php"")

Please include more helpful information!"
6897,TYPO3.Fluid,Bug,"",Resolved,Should have,Fluid: form.select no (pre)selected values in multiple-mode,Jan Roth,Bastian Waidelich,2010-10-20 05:44,"","",2010-03-17,"","",100,2010-03-17 11:47,"","",2597000,"","","If a select-field in my form is multiple=""multiple"" and size > 1 then is no value selected in editActions with correctly assigned property ..."
6902,TYPO3.Flow,Bug,"",Resolved,Should have,$objectName is not meaningful enough in serializeObjectAsPropertyArray(),Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 8,2010-03-17,"",2.00,100,2010-03-17 15:16,"","",1800750,"","","The method ObjectSerializer::serializeObjectAsPropertyArray() used $objectName as the key for its object registry to cache objects it already has serialized. From looking at the code this might be not clear enough because there can be two instances of the same type which need to be serialized.

Instead of $objectName it might be better to use an SPLObjectStorage as the internal registry and change the signature to
<pre>
public function serializeObjectAsPropertyArray($object)
</pre>
"
6909,TYPO3.Flow,Bug,"",Resolved,Must have,Files for persisted resources no longer deleted upon resource object removal.,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Resource,1.0 alpha 8,2010-03-18,"",2.00,100,2010-03-18 08:53,"","",1800700,"","",.
6911,TYPO3.Flow,Bug,"",Resolved,Must have,SQL error when using setOrderings() without matching(),Peter Beernink,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-03-18,"",1.00,100,2010-03-18 10:36,"","",1800650,"","","Using setOrderings() on a query object without the use of matching() results in the following SQL error.

Example: 
<pre>
$query = $this->createQuery();
return $query->setOrderings(array('lastname' => \F3\FLOW3\Persistence\QueryInterface::ORDER_ASCENDING))->execute();
</pre>
Will give the following SQL error:
<pre>
SQLSTATE[HY000]: General error: 1 no such column: d.parent
</pre>

When adding a $query->matching(), it works as expected.

Tested on alpha7 using the default SQLite."
6913,TYPO3.Flow,Feature,"",Resolved,Should have,Implement a FLOW3 optimized var_dump function,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Error,1.0 alpha 8,2010-03-18,"",7.00,100,2010-03-18 13:41,"","",1800600,"","","Because FLOW3 uses many nested objects, debugging variables can become cumbersome because almost always the object manager is included which in turn has references to most other objects resulting in an endless recursion.

We need an optimize var_dump function which takes this into account."
6914,TYPO3.Flow,Bug,"",Resolved,Should have,Static Object Container cannot handle optional arguments in constructors,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 8,2010-03-23,"",1.00,100,2010-03-18 13:42,"","",1800550,"","","For a class @Bar@ with 4 optional constructor arguments the code in the static object container looks like this:
<pre>protected function c0294($a=array()) {
  $o=new \F3\Foo\Bar($a[0],$a[1],$a[2],$a[3]);</pre>
If the arguments are not provided this leads to @undefined index@ errors. The default values should be used instead."
6928,TYPO3.Flow,Bug,"",Closed,Should have,ObjectContainerBuilder does not work for factory setups,Karsten Dambekalns,"",2010-10-20 05:40,Object,1.0 alpha 11,"","","",0,2010-03-19 16:39,"","",1806150,"","","When configuring argument injection with a factory object and no name/classname the object container builder throws an exception (after fixing the first symptom), which is:
<pre>
Notice: Undefined index: name in /.../Object/Configuration/ConfigurationBuilder.php line 162
</pre>

The line causing this reads as follows:
<pre>
static protected function parseArgumentOfTypeObject($argumentName, $objectNameOrConfiguration, $configurationSourceHint) {
	if (is_array($objectNameOrConfiguration)) {
		$objectName = $objectNameOrConfiguration['name'];
</pre>

The Objects.yaml used:
<pre>
F3\SwiftMailer\Mailer:
  arguments:
    1:
      object:
        factoryObjectName: F3\SwiftMailer\TransportFactory
        arguments:
          1:
            setting: SwiftMailer.transport.type
          2:
            setting: SwiftMailer.transport.options
</pre>

Setting a classname there is not an option, as it would not be registered anyway. For property injection the case of a missing object name is handled on ConfigurationBuilder by those lines in @parsePropertyOfTypeObject@:
<pre>
if (isset($objectNameOrConfiguration['name'])) {
	$objectName = $objectNameOrConfiguration['name'];
	unset($objectNameOrConfiguration['name']);
} else {
	$objectName = NULL;
}
</pre>

Adding this to @parseArgumentOfTypeObject@ does the trick, but then we come to the error in the object builder:
<pre>
Notice: Undefined index: in /.../Object/Container/ObjectContainerBuilder.php line 280
</pre>

The line causing this reads as follows:
<pre>
if ($argumentValue instanceof \F3\FLOW3\Object\Configuration\Configuration) {
	$argumentValueObjectName = $argumentValue->getObjectName();
	if ($this->objectConfigurations[$argumentValueObjectName]->getScope() === \F3\FLOW3\Object\Configuration\Configuration::SCOPE_PROTOTYPE) {
		$assignments[] = $assignmentPrologue . '$this->getPrototype(\'' . $argumentValueObjectName . '\', array(' . $this->buildMethodParametersCode($argumentValue->getArguments()) . '))';
</pre>

The bottom line is: using a factory with no object/class name does not work (anymore), neither for property nor argument injection."
6949,TYPO3.Flow,Task,"",Resolved,Should have,Rename \F3\FLOW3\MVC\Controller\Context back to \F3\FLOW3\MVC\Controller\ControllerContext,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,MVC,1.0 alpha 8,2010-03-23,"",1.00,100,2010-03-22 05:46,"","",31450,"","","After a discussion with Sebastian we agreed that ""ControllerContext"" fits better."
6967,TYPO3.Flow,Bug,"",Resolved,Must have,ConfigurationManager does not return all settings if asked to do so.,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Configuration,1.0 alpha 8,2010-03-23,"",1.00,100,2010-03-23 09:41,"","",1800500,"","","When calling @getConfiguration()@ with a NULL @$packageKey@ the configurationManager is supposed to return all settings for all active packages. It does not do so, leading to errors later on (in my case in the StaticObjectContainer) due to missing settings."
6968,TYPO3.Flow,Bug,"",Resolved,Must have,DynamicObjectContainer does not build methods for interfaces with only a factory,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 8,2010-03-23,"",1.00,100,2010-03-23 09:43,"","",1800450,"","","When configuring an interface that has no default implementation to be available through a factory, the static object container that is built does not include any build methods for that interface (type)."
6992,TYPO3.Flow,Bug,"",Resolved,Must have,ValidatorResolver does not build certain validators,Robert Lemke,Robert Lemke,2010-10-20 05:40,Validation,1.0 alpha 8,2010-03-18,"",10.00,100,2010-03-24 14:49,"","",1800400,"","","If object types are specified with a leading backslash, for example in a model:

<pre>
	/**
	 * @var \F3\Party\Domain\Model\PersonName
	 */
	protected $name;
</pre>

... then they are not recognized by the validator resolver because it checks if an object with exactly that name is registered at the Object Manager. However, fully qualified class names must not start with a leading backslash when used in a string ? therefore the Object Manager doesn't know such an object.

Therefore resolveValidatorObjectName() should strip a leading backslash from the given type, should one exist."
6993,TYPO3.Flow,Feature,"",Resolved,Should have,Support declaration of additional validation rules by object accessor syntax,Robert Lemke,Robert Lemke,2010-10-20 05:40,Validation,1.0 alpha 8,2010-03-24,"",7.00,100,2010-03-24 15:04,"","",1800350,"","","It is possible to declare additional validation rules in the doc comment of an action methods:

<pre>
	/**
	 * Creates a new participant + account.
	 *
	 * @param \F3\Conference\Domain\Model\Participant $newParticipant
	 * @param string $password
	 * @return void
	 * @validate $password StringLength(minimum = 5)
	 */
	public function createAction(\F3\Conference\Domain\Model\Participant $newParticipant, $password) {
	...
</pre>

However, it's not possible to declare a validation rule which refers to a sub object of one of the method arguments. In the above example it would be nice to declare that the first name of the person name of the new participant must not be empty (= is required). This could be achieved by supporting the object accessor syntax known from Fluid templates:

<pre>
	/**
	 * Creates a new participant + account.
	 *
	 * @param \F3\Conference\Domain\Model\Participant $newParticipant
	 * @param string $password
	 * @return void
	 * @validate $newParticipant.name.firstName NotEmpty
	 * @validate $password StringLength(minimum = 5)
	 */
	public function createAction(\F3\Conference\Domain\Model\Participant $newParticipant, $password) {
	...
</pre>

In its first implementation, this new syntax will only apply to @validate annotations in action methods.
"
7031,TYPO3.Flow,Task,"",Resolved,Must have,Unsafe masking of a dynamic regex pattern,Marcus Krause,Karsten Dambekalns,2010-10-20 05:40,Security,1.0 alpha 8,2010-04-15,"",1.00,100,2010-03-27 13:35,"","",32200,"","","F3\FLOW3\Security\RequestPattern\Uri has method matchRequest() that uses a dynamic regex pattern.

<pre>
return (boolean)preg_match('/^' . str_replace('/', '\/', $this->uriPattern) . '$/', $request->getRequestUri()->getPath());
</pre>

Masking is done by str_replace(). This is not sufficient; think of a pattern that contains with '\/'. There's a dedicated method preq_quote() that takes care of proper masking.

So masking itself should be
<pre>
preg_quote($this->uriPattern, '/')
</pre>

Please grep through the complete code to possibly find similiar code; I haven't done that (I am using forge repository interface right now)."
7039,TYPO3.Fluid,Bug,"",Rejected,-- undefined --,if ViewHelper: conditions always true,Nikolas Berger,"",2010-10-20 05:44,ViewHelpers,"",2010-03-28,"","",0,2010-03-28 12:31,"","",2596950,"","","My code:

<pre>{foo.bar} 

<f:if condition=""{foo.bar} == test1""><f:then> test1 </f:then></f:if>
<f:if condition=""{foo.bar} == test2""><f:then> test2 </f:then></f:if>
<f:if condition=""{foo.bar} == test3""><f:then> test3</f:then></f:if>
</pre>

The output is:

<pre>test2

test1 
test2 
test3
</pre>

But I expected this result:

<pre>test2

test2 
</pre>

Is my syntax wrong?"
7049,TYPO3.Flow,Bug,"",Resolved,Should have,PropertyMapper tries to change value objects when mapping,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Property,1.0 alpha 8,2010-03-29,"",2.00,100,2010-03-29 06:51,"","",1800300,"","","When the PropertyMapper receives data that ends up in an value object and it detects values to apply after reconstitution it tries to call map(). But value objects are immutable and thus have no setters, this ends up in mapping errors. it should build a new value object instead."
7054,TYPO3.Flow,Feature,"",Resolved,Should have,Make salted md5 generation and validation available through an API,Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 8,2010-03-29,"",1.00,100,2010-03-29 11:00,"","",1800250,"","","The algorithm for generating salted md5 hashes is used for encrypting passwords, for example for the PersistedUsernamePasswordProvider. However, this function is currently hidden in the security framework and not accessible through the public API. In some situations, for example when updating a password (and therefore the AccountFactory cannot be used), it would be handy to be able to use these functions."
7055,TYPO3.Flow,Bug,"",Closed,Should have,possible reflection problem.,Falk Kühnel,Karsten Dambekalns,2010-10-20 05:39,Reflection,"",2010-04-07,"","",0,2010-03-29 11:08,"","",1780050,"","","I have not looked into it in very much detail, but in extbase a problem occured when calling fluid from a pibased franmework. #7053

Since it is a result of the reflected Class and the parameter checking based on the type hints for the constructors, the following code results in an exception:
<pre>
/**
	 * Constructor. Can take an array, and initializes the objects with it.
	 *
	 * @param array $objectArray
	 * @author Sebastian Kurfürst <sebastian@typo3.org>
	 * @api
	 */
	public function __construct($objectArray = array()) {
		if (!is_array($objectArray)) throw new RuntimeException('Context has to be initialized with an array, ' . gettype($objectArray) . ' given.', 1224592343);
		$this->objects = $objectArray;
	}
</pre>

The @param requests an array parameter and the constructor creates an array if the constructor is called without a param.
This should somehow be considered by the reflection mechanisms.


"
7068,TYPO3.Fluid,Bug,"",Resolved,Should have,SelectViewHelper does not support SplObjectStorage as option,Robert Lemke,Robert Lemke,2010-10-20 05:44,ViewHelpers,1.0.0 alpha 8,2010-03-30,"",1.00,100,2010-03-30 05:47,"","",2604150,"","","The SelectViewHelper checks if the specified option source is an instance of ""Iterator"". However, SplObjectStorage is not and therefore cannot be used.

The check should test for Traversable instead."
7069,TYPO3.Flow,Bug,"",Closed,Should have,Value objects no longer used after being replaced are not removed,Karsten Dambekalns,Karsten Dambekalns,2011-09-09 15:46,Persistence,"","","",4.00,0,2010-03-30 05:55,"","",1780000,"","","When a value object is replaced (but not ""actively deleted"") it is not removed from the storage layer. In case of Resource objects the connected file consequently remains as well."
7113,TYPO3.Flow,Feature,"",Resolved,Should have,Make view resolution in ActionController independent from Fluid,Christopher Hlubek,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 11,2010-04-02,"","",100,2010-04-02 05:11,"","",1806100,"","","Currently the view for any ActionController is tied to Fluid. For every action processed, a Fluid @TemplateView@ will be created. Only if a template cannot be found the format is taken into account for the view object name.

This will work out as long as there is no Fluid template for an action that should be rendered with another view. Considering the case that we need format specific views (JSON, PDF, CSV, ...) for the _same_ action that also renders HTML we need to change the current mechanism.

I would propose a priority based resolver like used for the request handlers. So a view would then be resolved by a view resolver that checks if a view implementation can handle the current request (most commonly by checking the format).

"
7138,TYPO3.Fluid,Bug,"",Rejected,Must have,Changes to ObjectAccessor break usage with fluid conditions,Falk Kühnel,"",2011-08-04 02:23,Core,"",2010-04-06,"","",0,2010-04-06 06:56,"","",2596900,"","","Since the Tx_Extbase_Reflection_ObjectAccess::getProperty has changed, conditions on Arrays dont work like they used to:

<pre>
<f:if condition=""{user.otheraddresses.0}"">
</pre>
will cause an Exception
<pre>
#1263391473: The property ""classes"" on the subject was not accessible. 
</pre>
if the array is empty.

I do not know, if this is intended behaviour. Should Fluid take care of this, or the Reflection class?
Also, any unset variables in an array, cause this error, instead of not being shown.



"
7163,TYPO3.Flow,Task,"",Resolved,Could have,Remove code that is not needed anymore,Jochen Rau,Karsten Dambekalns,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-04-15,"",1.00,100,2010-04-08 03:55,"","",33250,"","","After the introduction of the TypeHandling class the following lines can be safely removed from \F3\FLOW3\Reflection\ClassSchema:

<pre>
	/**
	 * Specifies the allowed property types.
	 */
	const ALLOWED_TYPES_PATTERN = '/^\\\\?(?P<type>integer|int|float|double|boolean|bool|string|DateTime|F3\\\\[a-zA-Z0-9\\\\]+|array|ArrayObject|SplObjectStorage)(?:<(?P<elementType>[a-zA-Z0-9\\\\]+)>)?/';
</pre>"
7182,TYPO3.Flow,Bug,"",Resolved,Should have,Throw an exception if class for annotated dataType is missing,Felix Oertel,"",2012-03-14 06:20,MVC,"",2010-08-18,"",1.00,0,2010-04-08 12:48,"","",1779950,"",FLOW3 1.0.0,"Hey,

if you have a typo in the annotation of an argument of your method, FLOW3 throws some kind of confusing exception. Let's assume we want to hand over an object and want to annotate the var @F3\SomePackage\Model\Domain\SomeModel@ but we misspell and actually type @F3\SomePackage\Model\Typo\SomeModel@. What FLOW3 throws is:

@#1: Catchable Fatal Error: Argument 1 passed to F3\SomePackage\Controller\SomeController::someAction() must be an instance of F3\SomePackage\Model\Typo\SomeModel, array given in /some/fancy/path/flow3/Packages/Application/SomePackage/Classes/Controller/SomeController.php line someHighNumber@

That's confusing, because it's no problem that the argument is an array but that the corresponding class is not loaded and the DataMapper is not able to map the argument to an object.

This is generated in F3\FLOW3\MVC\Controller\Argument.php:435 where the value of an argument is simply returned if the corresponding class does not exist. This avoides mapping the argument to an object and we end up with the wrong type but not revealing this to the user.

I think we should catch this @!class_exists()@ and check, if the annotated datatype is user-/framework-defined (matching F3\-schema). If it is, we throw an exception that we were not able to map because of the missing file. If it is an primitive type (incl. validation-related types) it's ok to just return the value.

"
7198,TYPO3.Flow,Bug,"",Resolved,Should have,Reflection Service should ignore leading backslashes in class names,Robert Lemke,Robert Lemke,2010-10-20 05:40,Reflection,1.0 alpha 8,2010-04-09,"",1.00,100,2010-04-09 11:25,"","",1800200,"","","While reflecting classes it could happen that the reflection service caches for example class names of interface implementations with or without a leading backslash, depending on how the class was specified in some annotation. This is error prone and therefore the reflectClass method should silently trim a leading backslash.

While at it, the Object Manager could give some hint in its API methods that an object could probably only not be found because a leading backslash was given - which is not allowed."
7199,TYPO3.Flow,Bug,"",Resolved,Should have,Persistence Manager retrieves repository objects by class name instead of object name,Robert Lemke,Robert Lemke,2010-10-20 05:40,Persistence,1.0 alpha 8,2010-04-09,"",1.00,100,2010-04-09 11:28,"","",1800150,"","",The persistence manager uses the class name as an argument to the Object Manager's get() method. This usually works - until the object name and the class name are different. This seldomly happens but it could.
7203,TYPO3.Fluid,Feature,"",Resolved,Should have,Object accessor could work for associative arrays,Michael Sauter,"",2011-05-06 04:26,Core,"",2010-04-10,"","",50,2010-04-10 03:39,"","",2596850,"","","I'm not exactly sure if this is a bug or a missing feature:

The manual (http://flow3.typo3.org/documentation/manuals/fluid/fluid.usermanual/#d0e161) states that it is possible to traverse associative arrays with the object accessor syntax. 

I thought it should be used like this (correct my if I'm mistaken):
@$foo = array('bar' => array('baz' => 'value'));@
@$this->view->assign('foo', $foo);@
And in Fluid:
@{foo.bar.baz}@
Which would result in:
@value@

This does not work though (r4040). The problem seems to be in Parser/SyntaxTree/ObjectAccessorNode.php. There, either the property of an object is resolved or the variable is directly returned.

Applied patch adds the functionality to traverse associative arrays. It's probably not the cleanest solution though ..."
7216,TYPO3.Flow,Feature,"",Closed,Should have,Custom CLI Controller without Modification of flow3.sh,Marc Neuhaus,Bastian Waidelich,2010-10-20 05:39,Core,"",2010-04-12,"","",0,2010-04-11 19:08,"","",1779900,"","","I'm currently putting an Doctrine2 Package together and wanted to add the Doctrine2 schema-tools to the flow3 cli script.

Wouldn't it make sense to make cli controllers dynamically accessible through the flow3 script without modification to it?

the attached diff is a simple example to achieve something like this"
7221,TYPO3.Flow,Feature,"",Closed,Could have,Automatic accessor methods (especially for models),Michael Sauter,"",2010-10-20 05:39,"","","","","",0,2010-04-12 08:59,"","",1779850,"","","When writing models, there is a lot of code to be written for getters/setters. I understand why __get() and __set() is not a good solution for this problem, but maybe we could do something else to shorten this:

FLOW3 already parses annotations and builds proxies for all mdoels, so why not have something similar to the following example:
<pre>
/**
 * @var string
 * @accessors
 */
protected $title;
</pre>

FLOW3 could then build getTitle() and setTitle() in the proxy class.

I got the inspiration from the Cappucino framework, see more on this topic here: http://cappuccino.org/discuss/2008/10/26/synthesizing-accessor-methods/

In this blog post, they also suggest more options, like ""readonly"", or specifying a custom name for the getter / setter method.

What do you think?"
7243,TYPO3.Fluid,Task,"",Resolved,Must have,let's use UpperCamelCase filenames for templates as well,Felix Oertel,Bastian Waidelich,2010-10-20 05:44,Core,1.0.0 alpha 9,2010-04-13,2010-06-18,"",100,2010-04-13 17:00,"","",33600,"","","hey guys,

please let us stick to lowerCamelCase filenames for templats as we do for all the other files as well.

at the moment you have to use lowercasefilenames which look kind of ugly. on some systems (like my osx) you will never experience this ""problem"", because filesystem is case-intensitive ... things look different if your on BSD e. g.

regards, foertel"
7286,TYPO3.Flow,Bug,"",Resolved,Must have,Undefined FLOW3 root path does not issue an error in CLI mode,Robert Lemke,Robert Lemke,2010-10-20 05:40,Core,1.0 alpha 8,2010-04-15,"",1.00,100,2010-04-15 15:40,"","",1800100,"","","When FLOW3 is run in CLI context, the environment variable FLOW3_ROOTPATH must be set. If this is not the case, FLOW3 will behave unexpectedly.

However, currently the safeguard for assuring that FLOW3_ROOTPATH is set, is broken. See FLOW3's Bootstrap.php.
"
7292,TYPO3.Fluid,Bug,"",Resolved,Must have,escapeViewHelper does not take encoding of resulting web page into account,Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:44,ViewHelpers,"",2010-04-16,"","",100,2010-04-16 04:38,"","",2596800,"","","Uf I use {user.name} and username as a special char, nothing is displayed.
if I use <f:escape value=""{user.name}"" encoding=""iso-8859-1""></f:escape>, it 
works.

Solution: use the same encoding TYPO3 uses for displaying the page, as we assume that data rendered has the same encoding as well."
7389,TYPO3.Fluid,Feature,"",Resolved,Should have,GroupedForViewHelper group by object,Lienhart Woitok,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-04-20,"","",100,2010-04-20 10:02,"","",2596750,"","","Currently it is not possible to group by an object. 

Example :

<pre>
class Foo {
	/** @return array<Bar> */
	public function getBars();
}

class Bar {
	/** @return Baz */
	public function getBaz();
}

class Baz {
}
</pre>

Now, lets loop over them using the Baz objects as key.

<pre>
<f:groupedFor each=""{foo.bars}"" as=""bars"" groupBy=""baz"" groupKey=""baz"">
	{baz.title}:
	<ul>
		<f:for each=""{bars}"" as=""bar"">
			<li>{bar.name}</li>
		</f:for>
	</ul>
</f:groupedFor>
</pre>

I expected output from this loop, something like
<pre>
	A crazy baz title:
	<ul>
			<li>A named bar</li>
			<li>Another named bar</li>
	</ul>
	Second crazy baz title:
	<ul>
			<li>A further named bar</li>
			<li>And yet another named bar</li>
			<li>The last named bar</li>
	</ul>
</pre>

I got nothing. So I dug into this and created the attached patch, enabling the expected behavior."
7407,TYPO3.Flow,Feature,"",Resolved,Should have,Edit nested properties of a domain model within a form,Michael Tauer,Bastian Waidelich,2013-09-24 12:10,Property,"",2010-04-21,"","",100,2010-04-21 12:26,"","",1779800,"","","*Motivation*
This should give some background information and introduce the issue for a special example:
I am planning to build a flexible (and more or less complex) web application based on FLOW3. Therefore I want to localize titles and descriptions for different objects. Because I don't want to implement some properties like titleDE, titleEN, titleES, ... for all the domain models my idea was to define a class named _LocalizedString_ that contains a language key and a string. Every domain model that need different translations for a title or description defines this title/description property as an array of _LocalizedString_ objects. I guess this design decision is comprehensible and I hope I'm not the only one who will do it that way. Now at this point I can't see any solution to edit multiple title strings wihtin a form for the domain model because every single localized title string is no longer a property of the model itself but a property of a nested array of _LocalizedString_ instances.

*Issue*
I think it would be very helpful for the framework to edit also nested properties wihtin forms. This could be defined in the templates somethink like this:
a) for nested property objects
<pre>
<f:form.textbox property=""adress:street:number"" />
<!-- The property ""adress"" contains a nested property ""street"" that itself contains a ""name"" and a ""number"" property.-->
</pre> 
b) for nested arrays
<pre>
<f:form.textbox property=""titles(0):string"" />
<f:form.hidden property=""titles(0):language"" value=""de-DE"" />
<f:form.textbox property=""titles(1):string"" />
<f:form.hidden property=""titles(1):language"" value=""en-GB"" />
<!-- The numbers 0 and 1 are replaceable keys that only define properties of the same nested item -->
</pre> 

Currently I am doing a workaround for the PropertyMapper that will now parse nested properties as well but this is possibly not the best and smartest way to solve the problem. I also suppose that there are more places that have to be changed (possibly the persistance update function). ...and I don't know if all this will work in the end.

Please give a reply if anyone has an idea of solving the problem. I think a good solution could be interesting for many other applications too (e.g. to edit multiple comments of one post, to edit properties of multiple items of a booking order, to encapsulate items of an adress as single class and edit the street and city information directly within the form of a contact) "
7417,TYPO3.Fluid,Bug,"",Resolved,Must have,Missleading exception on wrong data type,Felix Oertel,"",2010-10-20 05:44,Core,"",2010-04-22,"","",100,2010-04-22 05:37,"","",2596700,"","","hi,

in a viewhelper I annotated an argument ""array"" but throw in an object. The missleading exception
@@
was thrown.

In Core/ViewHelper/AbstractViewHelper.php:295 validateArguments() tries to throw an ""wrong type""-exception but generates a new exception itself by calling @strval($this->arguments[$argumentName])@.

We should only output the argument's value if it's a human readable type though skipping objects and arrays."
7426,TYPO3.Flow,Bug,"",Resolved,Should have,Catch fatal error message when running PHP < 5.3,Martin H.,Karsten Dambekalns,2010-10-20 05:40,"",1.0 alpha 9,2010-04-27,"",1.00,100,2010-04-22 07:28,"","",1804200,"","","I thought that I have PHP 5.3 installed but got a fatal error message instead of FLOW3 welcome message.
Finally I realized that I'm still running PHP 5.2 but I didn't get a warning message from FLOW3 system.

The _Web/index.php_ file should be compatible to PHP versions < 5.3 and if the server is running a smaller version than 5.3 it should print an error message and the setup guide from Getting Started tutorial (or a link to it)."
7454,TYPO3.Flow,Bug,"",Resolved,Should have,Manual: Correct spelling of initializeObject(),Michael Sauter,Karsten Dambekalns,2010-10-20 05:40,- Documentation -,1.0 alpha 9,"","",1.00,100,2010-04-24 04:48,"","",1804150,"","","I just copied the method from the manual and wondered why it didn't work ;)

See here: http://flow3.typo3.org/documentation/manuals/flow3/flow3.objectframework/#id37760990

In example 5.4, it says ""intializeObject()"", but should be ""initializeObject()""."
7474,TYPO3.Flow,Feature,"",Resolved,Should have,"Implement a ""LabelValidator""",Robert Lemke,Robert Lemke,2010-10-20 05:40,Validation,1.0 alpha 9,2010-04-26,"","",100,2010-04-26 11:02,"","",1804100,"","","Many models have properties which are used as labels. These usually may contain any (unicode) character, space "" "" and certain punctuation marks. We should provide a validator for this."
7479,TYPO3.Flow,Task,"",Resolved,Should have,Move context configuration defaults to package,Robert Lemke,Robert Lemke,2010-10-20 05:40,Configuration,1.0 alpha 9,"","","",100,2010-04-27 05:27,"","",36350,"","","Currently we deliver certain configuration defaults for the Testing and Production context in the global Configuration/ directories. This is annoying, because it's really defaults of the package, not of the distribution and whenever the options / defaults change in FLOW3, everybody needs to manually update the defaults in their distribution's Configuration/ directory (such as in the TYPO3 distribution).

Additionally it gives a bad user experience: The global Configuration/ directory is meant for configuration options added by the user. These directories should actually be empty with a fresh checked out FLOW3 or TYPO3 distribution.

Solution: Move the defaults into the package's Configuration directory and add support for that into the configuration management."
7480,TYPO3.Flow,Task,"",Resolved,Must have,Integrate PHP6 features in FLOW3,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:39,Utility,"",2010-04-27,"",2.00,100,2010-04-27 06:47,"","",36400,"","","The features of the PHP6 package need to be available, but the package itself should not be there anymore. Move the stuff over to FLOW3 and get rid of t3lib_cs along the way."
7495,TYPO3.Flow,Feature,"",Resolved,Should have,Implement support for persistence of nested arrays,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 9,2010-04-28,"",6.00,100,2010-04-27 09:23,"","",1804050,"","","At the moment nested arrays cannot be persisted (see exception no. 1260284934). However, this is currently needed by the TYPO3 content model - and will surely be used by other packages in the future."
7516,TYPO3.Flow,Feature,"",Resolved,Should have,Create encryption hash if none was defined,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Security,1.0 alpha 10,2010-06-23,"",2.00,100,2010-04-28 09:18,"","",1804850,"","","Currently you'll get an exception if you didn't define an encryption hash:

<pre>
#1258991855: You must configure an encryption key for the HashService
</pre>

Most people won't see this message though because there's a default encryption key defined in the Base distibution. A bad idea, because many people will just leave it like it is.

Therefore we should:

* not provide a default encryption key
* let the HashService generate a random key if none exists and save it into the global Settings.yaml file"
7518,TYPO3.Fluid,Bug,"",Closed,Won't have this time,FLuid breaks on HTML data-* attributes,Morton Jonuschat,"",2010-10-20 05:44,"","",2010-04-28,"","",0,2010-04-28 09:36,"","",2596600,"","","Trying to use HTML5 data-* attributes in Fluid ViewHelpers breaks rendering in different ways, depending on the ViewHelper called.

For example f:link.action doesn't parse the tag completly, rendering breaks with ""You closed a templating tag which you never opened!""

Adding a data-* attribute to f:form.textbox results in the unparsed tag being put into the resulting html.

Regarding the use of data-* tags see the official W3 documentation:

http://dev.w3.org/html5/spec/Overview.html#attr-data

Bug experienced on Extbase/Fluid included with TYPO3 4.4.0beta1"
7564,TYPO3.Flow,Bug,"",Closed,Must have,Dynamic Object Container does not support scope session,Andreas Förthner,Robert Lemke,2010-12-20 11:22,Object,1.0 alpha 14,2010-04-30,"","",0,2010-04-30 10:47,"","",1809150,"","","This ends up in a duplication of session objects that are beeing injected before the static object container is built.

So in my eyes there are two things to do:

* Implement session support for the dynamic object container
* initialize the session before the object container in the FLOW3 bootstrap

"
7567,TYPO3.Flow,Bug,"",Resolved,Must have,During persistence all objects inside array/SplObjectStorage are removed,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 9,2010-04-30,"",3.00,100,2010-04-30 11:11,"","",1804000,"","","Even objects that are still in an array/SplObjectStorage are removed, due to use of the (useless) AbstractBackend->getCleanState() method."
7580,TYPO3.Flow,Bug,"",Resolved,Should have,There's no default context (anymore),Irene Höppner,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 9,2010-05-11,"","",100,2010-05-01 05:11,"","",1803950,"","","Since the possible contexts have been reduced to ""Production"" and ""Development"" you get the following error, if you didn't provide any context:
""FLOW3: Unknown context """" provided, currently only ""Production"" and ""Development"" are supported. (Error #1254216868)""

Ppl that are new to FLOW3 and just downloaded the distribution will be very confused about that. They don't get any hint to the tutorial anymore, because there's no welcome screen.

If there's no context defined, Production should be default.

"
7588,TYPO3.Flow,Feature,"",Resolved,Should have,ObjectAccess::getPropertyPath should support Closures,Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:39,"","",2010-05-02,"","",100,2010-05-02 10:20,"","",1779750,"","",We need support for Closures in ObjectAccess::getPropertyPath.
7598,TYPO3.Flow,Bug,"",Resolved,Should have,Automatically set context not checked in Bootstrap,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 9,2010-05-03,"",1.00,100,2010-05-03 05:33,"","",1803900,"","","Exception is thrown in Production context

<pre>
--- Core/Bootstrap.php	(revision 4252)
+++ Core/Bootstrap.php	(working copy)
@@ -170,8 +170,8 @@
 		$this->ensureRequiredEnvironment();
 		$this->context = (strlen($context) === 0) ? 'Production' : $context;
 
-		if ($context !== 'Production' && $context !== 'Development') {
-			exit('FLOW3: Unknown context ""' . $context . '"" provided, currently only ""Production"" and ""Development"" are supported. (Error #1254216868)');
+		if ($this->context !== 'Production' && $context !== 'Development') {
+			exit('FLOW3: Unknown context ""' . $this->context . '"" provided, currently only ""Production"" and ""Development"" are supported. (Error #1254216868)');
 		}
 		$this->FLOW3Package = new \F3\FLOW3\Package\Package('FLOW3', FLOW3_PATH_FLOW3);
 	}
@@ -648,4 +648,4 @@
 	}
 }
 
-?>
</pre>



-----

(Also there is no unittests testing if the bootstrap can be initialised with diffrent contexts - maybe thats useful. The bootstarp is just a accessible mock where the constructor seems not to be called)"
7608,TYPO3.Fluid,Feature,"",New,Could have,Configurable shorthand/object accessor delimiters,Lienhart Woitok,"",2013-11-07 08:08,Core,"",2010-05-03,"","",0,2010-05-03 09:31,"","",2596550,"","","See Mailinglist Thread ""About limitations in Fluid""

For some output formats (like LaTeX) it is not comfortable to use { and } for shorthand syntax as these symbols are used by the target language. Therefore, the possibility to configure the open and close symbols for short hand syntax is necessary. 

Attached patch provides this."
7618,TYPO3.Fluid,Feature,"",Rejected,Could have,Add support for nested evaluation.,Nikolas Hagelstein,"",2013-03-19 03:50,Core,"",2010-05-04,"","",0,2010-05-04 10:59,"","",2596500,"","","Currently it's not possible to do something like:

{myArray.{varContainingArrayKey}}

"
7676,TYPO3.Kickstart,Bug,"",Resolved,Must have,repository kickstarter create invalid PHP,Soren Malling,Karsten Dambekalns,2010-10-20 05:48,"","","","","",100,2010-05-05 16:10,"","",2740300,"","","Using FLOW3 1.0.0 Alpha 8

<pre>
./flow3 kickstart PhotoDatabase image
</pre>

created the following PHP, which is invalid due to missing {}

<pre>
class ImageRepository extends \F3\FLOW3\Persistence\Repository
</pre>

It should be 

<pre>
class ImageRepository extends \F3\FLOW3\Persistence\Repository {

}
</pre>

Sorry if this is fixed in SVN, but couldn't find any other issue on this one"
7682,TYPO3.Flow,Task,"",Resolved,Should have,Replace generic exceptions by proper exceptions,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,"",1.0 alpha 10,2010-06-10,"",2.00,100,2010-05-06 07:00,"","",37400,"","","Well, the subject says all: we shouldn't use RuntimeException, LogicException etc. because they undermine our hierarchical exception architecture. One exception though (pun not intended): InvalidArgumentException."
7687,TYPO3.Flow,Bug,"",Resolved,Should have,ObjectAccess doesn't allow numeric indexes for arrays,Robert Lemke,Robert Lemke,2010-10-20 05:40,Reflection,1.0 alpha 9,2010-05-06,"","",100,2010-05-06 10:22,"","",1803850,"","","When trying to retrieve a value from an array with a numeric index, the ObjectAccess::getProperty() method throws an exception because $propertyName must be a string. However, we should allow integers in for these cases (when $subject is an array or implements \ArrayAccess)."
7688,TYPO3.Flow,Task,"",Resolved,Should have,Don't reflect Exception classes,Robert Lemke,Robert Lemke,2010-10-20 05:40,Reflection,1.0 alpha 9,2010-05-06,"","",100,2010-05-06 10:27,"","",37450,"","","Currently the Reflection Service will even reflect *Exception classes. That's unnecessary because we never instantiate exceptions through the Object Manager nor do we need other reflection information about exceptions.

Therefore we should skip all classes whose name ends with ""Exception"""
7719,TYPO3.Flow,Task,"",Resolved,Must have,Implement Locale class,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 10:10,"","",37650,"","","Locale class is a base for all i18n / l10n functionality in FLOW3. There already exists simple Locale class, so it should be used. "
7720,TYPO3.Flow,Feature,"",Resolved,Must have,Implement automatic locale detection,Karol Gusak,Karol Gusak,2010-10-20 05:39,I18n,"","","","",100,2010-05-09 10:18,"","",1779700,"","","Locale detection can be done in web application framework in three ways: 
* using HTTP ""Accept-Language"" header
* using user preference from cookies (if he already was visiting our website)
* by letting user choose preferred locale by UI

All these methods will be supported by i18n / l10n subsystem."
7721,TYPO3.Flow,Feature,"",Resolved,Must have,Implement locale-aware resource management subsystem,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 10:34,"","",1806050,"","","Existing resource management subsystem needs to be extended in order to provide convenient API for management of locale-dependent resources, like images with text etc. "
7722,TYPO3.Flow,Feature,"",Resolved,Must have,Implement CLDR data reader,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 10:46,"","",1806000,"","","CLDR data contains information in XML format about many different aspects related to localization. FLOW3 18n / l10n subsystem will use following parts of this data:

* Plural forms - what plural forms exists in a language (zero, one, few, many, other) and how quantity relates to them
* Numbers - how to represent decimal numbers, big numbers etc
* Currencies - how values are formatted
* Date and time - short, medium and full formatting of dates and time

Parsing for all of these data types needs to be written separately, as they have not much in common (except all of them are represented in XML format). "
7723,TYPO3.Flow,Feature,"",Resolved,Must have,"Implement message resources support (XLIFF, plural forms)",Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 10:52,"","",1805950,"","","Locale-dependent messages (texts) will be stored in XLIFF format. Because of that FLOW3 needs to be capable of reading messages stored in this format, with support for plural forms."
7724,TYPO3.Flow,Feature,"",Resolved,Must have,Implement Message Formatter subsystem,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 11:03,"","",1805900,"","","Message Formatter is a class which formats a string given by substituting placeholders with properly formatted values. Placeholders consists of an unsigned integer enclosed in curly braces. Optionally format type can be set, and this one can set even more precisely by format style. Examples:

* You have {0} items in cart, total value: {1}
* You have {0,number} items in cart, total value: {1,number}
* You have {0,number,integer} items in cart, total value: {1,number,currency}

Format types are classes implementing simple API, so developers can create custom format types, and they can have custom format styles.

Number, Date, and Time format types will be implemented by default.

ViewHelpers for Fluid will be implemented in order to make use of Message Formatter subsystem in template files."
7725,TYPO3.Flow,Feature,"",Resolved,Must have,Implement Input Parser subsystem,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-05-09 11:16,"","",1805850,"","","Input Parser is a class which parses user's input based on locale used by him / her, and converts it to the internal representation of a value (number, date, time, currency).

Problems like currency conversion or timezone need to be taken into account.

Additional classes for FLOW3 Validation subsystem will be implemented, and they will use Input Parser's API."
7726,TYPO3.Kickstart,Bug,"",Resolved,Should have,model kickstarter doesn't accept comma seperated model names,Soren Malling,Karsten Dambekalns,2010-10-20 05:48,"","",2010-05-09,"","",0,2010-05-09 11:25,"","",2740250,"","","TurtleJoe:flow3 sorenmalling$ ./flow3 kickstart controller PhotoDatabase Album,Photo
+ .../Packages/Application/PhotoDatabase/Classes/Controller/AlbumController.php
+ .../Templates/Album/index.html
+ .../Packages/Application/PhotoDatabase/Classes/Controller/PhotoController.php
+ .../Templates/Photo/index.html
TurtleJoe:flow3 sorenmalling$ ./flow3 kickstart model PhotoDatabase Album,Photo
+ .../Packages/Application/PhotoDatabase/Classes/Domain/Model/Album,Photo.php

Using comma seperated value when creating controller works perfectly, but using comma seperated values in model creates a file name [commaseperated values].php (as seen above)"
7727,TYPO3.Flow,Bug,"",Resolved,Should have,"Better handling of ""wrong"" parameters in ./flow3",Soren Malling,Robert Lemke,2011-07-06 10:36,Core,1.0 beta 1,2010-05-09,"","",100,2010-05-09 13:44,"","",1779650,"","","Just did a fresh ""svn export ..."" and tried to list the available packages

<pre>
TurtleJoe:flow3 sorenmalling$ ./flow3 package list avaliable

Uncaught Exception in FLOW3 #1186669086: An action ""listavaliableAction"" does not exist in controller ""F3\FLOW3\Package\Controller\PackageManagerController"".
thrown in file Packages/Framework/FLOW3/Classes/MVC/Controller/ActionController.php
in line 148
</pre>

Due to a spelling error i get this ugly error message. I think there should be a better handling of such errors, when FLOW3 goes in to beta/RC mode"
7820,TYPO3.Flow,Bug,"",Resolved,Should have,Configuration Manager doesn't properly check for existence of uriPattern ,Robert Lemke,Robert Lemke,2010-10-20 05:40,Configuration,1.0 alpha 9,2010-05-18,"","",100,2010-05-18 11:15,"","",1803800,"","","If ""uriPattern"" is not set for a route in the YAML file, the Configuration Manager will fail:

<pre>
#1: Notice: Undefined index: uriPattern in /opt/local/apache2/htdocs/Development/FLOW3/Distributions/Base/Packages/Framework/FLOW3/Classes/Configuration/ConfigurationManager.php line 433
</pre>"
7831,TYPO3.Flow,Bug,"",Resolved,Should have,"Router interprets negative integer values of a match result as ""matched""",Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 9,2010-05-19,"","",100,2010-05-18 18:52,"","",1803750,"","","The DynamicRoutPart::match() method doesn't do strict comparison of the route's return value and therefore wrongly interprets integer values such as ""-1"" as TRUE. This leads to the route part handlers to match although they don't."
7847,TYPO3.Flow,Bug,"",Resolved,Could have,Missing trailing slash in FLOW3_ROOTPATH causes fatal error,Michael Schams,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 9,2010-05-28,"",1.00,100,2010-05-20 03:47,"","",1803700,"","","Trailing slash ""/"" at environment variable FLOW3_ROOTPATH is absolutely required in file .htaccess - a missing trailing slash causes a fatal error and FLOW3 isn't executed.

Correct:
@SetEnv FLOW3_ROOTPATH /var/www/myapp/@

Causes a fatal error:
@SetEnv FLOW3_ROOTPATH /var/www/myapp@

The path to FLOW3.php is generated in file ""Web/index.php"" at run time and a more tolerant behaviour would be desirable.

*Fatal error in logfile* (caused by missing slash between FLOW3_ROOTPATH and ""Packages/..."":
@[Thu May 20 07:06:29 2010] [error] [client 10.9.8.101] PHP Fatal error:  require(): Failed opening required '/var/www/myappPackages/Framework/FLOW3/Scripts/FLOW3.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/myapp/Web/index.php on line 31@

*Possible solution:*
Update ""index.php"" as follows (or similar)

@require(preg_replace('/\/*$/', '', $rootPath) . '/Packages/Framework/FLOW3/Scripts/FLOW3.php');@

This regular expression removes trailing slash/slashes (if exist/s) of $rootPath and adds one between $rootPath and ""Packages/..."". So, path to FLOW3.php is always as expected, regardless of @SetEnv FLOW3_ROOTPATH@ in .htaccess (with/without trailing slash)."
7882,TYPO3.Fluid,Bug,"",Closed,Should have,wrong section rendering with <f.form.textbox />,Mario Näther,"",2010-10-20 05:44,ViewHelpers,"",2010-05-24,"","",0,2010-05-24 11:35,"","",2596450,"","","I have a Section :
<pre><f:section name=""defaultSearch"">
<f:form.textbox name=""text"" class=""date"" value="""" />
</f:section>
</pre>

my html output is right...
<pre>
<input type=""text"" name=""tx_myext_pi1[text]"" value="""" />
</pre>

and i use the renderViewHelper to show the section
<pre><f:render section=""defaultSearch"" /></pre>

my html output is *wrong* (without the *""tx_myext_pi1""* prefix) ...
<pre><input type=""text"" name=""text"" value="""" /></pre>

any ideas who i find the bug?"
7929,TYPO3.Flow,Bug,"",Resolved,Should have,Wrong variable in Memcached backend,Dan Osipov,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 9,2010-05-28,"",1.00,100,2010-05-26 17:16,"","",1803650,"","","Same issue as in TYPO3 4.3:
http://bugs.typo3.org/view.php?id=14455

Patch resolves the problem."
7930,TYPO3.Flow,Feature,"",Resolved,Could have,Show versions in package list,Michael Schams,Karsten Dambekalns,2010-10-20 05:40,Package,1.0 alpha 13,2010-10-11,"","",100,2010-05-27 02:29,"","",1808400,"","","The ""FLOW3 Command Line Interface"" offers a functionality to list available and active packages. In current FLOW3 version 1.0.0-alpha8 the list shows the names of the packages only.

At least the versions of the available packages would be useful and informative - for example:

@./flow3 package list available@

@Available packages:@
@FLOW3                    1.0.0-alpha8@
@DocumentationBrowser     1.0.0-alpha8@
@Fluid                    1.0.0-alpha8@
@ExtJS                    3.2.1@
@Party                    1.0.0-alpha8@
@Welcome                  1.0.0-alpha8@
@Kickstart                1.0.0-alpha8@
@PHPUnit                  3.4.0_1@
@Testing                  0.5.0-alpha8@
@Conference@
@SwiftMailer              4.0.6@

The attached diff extends the PackageManagerController.php to show version numbers (from ""Meta/Package.xml"") in ""available packages"" view. Please treat this diff as an example/suggestion only (e.g. it cuts the package name at 24 characters), more sophisticated solutions are desirable :-)"
7960,TYPO3.Flow,Feature,"",Resolved,Should have,Implement getClassNameByObjectName(),Robert Lemke,Robert Lemke,2010-10-20 05:40,Object,1.0 alpha 9,2010-05-28,"","",100,2010-05-28 07:59,"","",1803600,"","",For the Request Builder we need an API for retrieving the class name by specifying the object name in the ObjectManager.
8056,TYPO3.Flow,Task,"",Closed,Should have,Remove configuration option for mirrorMode,Robert Lemke,Karsten Dambekalns,2012-07-25 08:49,Resource,"","","","",0,2010-06-04 05:54,"","",39400,"","","The resource publisher can mirror resources either be creating symlinks or copying the files. This can be configured through the mirrorMode setting. The default of this setting is ""copy"" to guarantee that file publishing works on any system. What most people want though is ""symlink"" because it's much faster.

This task is about checking the possibility to remove this user setting and let FLOW3 autodetect which method to use. The detection mechanism should consider

* if the OS supports symlinks
* if the webserver is configured to actually follow symlinks"
8061,TYPO3.Welcome,Bug,"",Resolved,Should have,Wrong directory case for resources,Robert Lemke,Karsten Dambekalns,2010-11-11 17:30,"",1.0 alpha 13,2010-11-11,"",1.00,100,2010-06-04 06:24,"","",2740100,"","","The public resources of the Welcome package still use lowercase directory names.

There are also some places in the templates where resources are included by hard coded paths, such as:

<pre>
<script type=""text/javascript"" src=""../../../Public/js/mootools-1.2.2-core-yc.js"">
</pre>"
8063,TYPO3.Flow,Task,"",Resolved,Should have,"Rename the resource stream wrapper's scheme from ""package://"" to ""resource://""",Robert Lemke,Robert Lemke,2010-10-20 05:40,Resource,1.0 alpha 10,2010-06-04,"","",100,2010-06-04 06:37,"","",39500,"","","The ""protocol"" we're currently using for retrieving static resources is ""package://"" - however, that doesn't fit completely. Now that we also want to use the stream wrapper for accessing package-independent persistent resources, we should use the scheme ""resource://"" instead."
8074,TYPO3.Flow,Bug,"",Resolved,Should have,memcached backend: No exception thrown if set() fails and wrong boolean comparison ,Christian Kuhn,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 10,2010-06-10,"",1.00,100,2010-06-06 09:37,"","",1804800,"","",http://bugs.typo3.org/view.php?id=14632
8082,TYPO3.Flow,Feature,"",Resolved,Should have,API for accessing persisted resources,Robert Lemke,Robert Lemke,2010-10-20 05:40,Resource,1.0 alpha 10,2010-06-07,"","",100,2010-06-07 05:46,"","",1804750,"","",Currently there is no clean way to retrieve a resource object representing a persisted resource. The only way to use persisted resource right now is Fluid's resource view helper - but this doesn't help if you want to access resources directly via PHP's file functions.
8088,TYPO3.Flow,Feature,"",Resolved,Should have,API method for retrieving the original filename of recently imported resources,Robert Lemke,Robert Lemke,2010-10-20 05:40,Resource,1.0 alpha 10,2010-06-07,"","",100,2010-06-07 08:39,"","",1804700,"","","When a file is uploaded to FLOW3, there's currently no viable way to get knowledge of the original filename - all you get is a resource object.

It would be helpful if the Resource Manager had an API function for retrieving the imported resources (of the current script run) and get some further information about the import."
8132,TYPO3.Flow,Bug,"",Resolved,Must have,Checking for objects in array properties during persistence is broken,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 10,2010-06-10,"",1.00,100,2010-06-10 06:28,"","",1804650,"","","When an object with an array property containing another object is persisted, the object is removed, as the check mistakenly thinks the object is no longer in the array property (@removeDeletedArrayEntries()@)."
8133,TYPO3.Flow,Feature,"",Resolved,Should have,ObjectAccess::setProperty() should support arrays as a subject,Robert Lemke,Robert Lemke,2010-10-20 05:40,Reflection,1.0 alpha 10,2010-06-10,"","",100,2010-06-10 06:37,"","",1804600,"","",Currently only getProperty() allows to use arrays as $subject - setProperty() doesn't support this.
8156,TYPO3.Flow,Bug,"",Resolved,Must have,ResourceStreamWrapper no longer able to handle non-existent files,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Resource,1.0 alpha 10,2010-06-10,"",2.00,100,2010-06-10 17:03,"","",1804550,"","","The ResourceStreamWrapper no longer works when trying to use it to create files or directories. This is because @evaluateResourcePath()@ checks the resolved path for existence before returning it.

This obviously does not work for a directory or file that is about to be created.

This breaks e.g. the Kickstarter."
8177,TYPO3.Kickstart,Bug,"",Resolved,Must have,Wrong Template name,Patrick Kollodzik,"",2010-10-20 05:48,"","","","","",100,2010-06-11 15:03,"","",2740200,"","","Using FLOW3 Alpha 9

<pre>
./flow3 kickstart package DummyPackage
</pre>

The filename of the index template for the StandardController is in lowercase, wich will result in a 404 error.

If you follow the documention ""Getting Started"" the example in chapter 6.2 will not work."
8179,TYPO3.Fluid,Feature,"",Resolved,Should have,Create Selenium Tests for Fluid Viewhelpertest Package / Extension,Sebastian Kurfuerst,Bastian Waidelich,2010-10-20 05:44,"","",2010-06-11,"","",100,2010-06-11 15:42,"","",2596400,"","",see above ;)
8180,TYPO3.Fluid,Feature,"",Resolved,Should have,Create a ViewhelpertestBackporter,Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-06-11,"","",100,2010-06-11 15:43,"","",2596350,"","","As a preparation for the selenium tests, create a backporter for the Viewhelpertest."
8206,TYPO3.Flow,Task,"",Resolved,Should have,Update CLDR data to current version,Karsten Dambekalns,Karol Gusak,2010-10-20 05:39,I18n,"","","",1.00,100,2010-06-14 05:28,"","",40150,"","",The CLDR data in the Resources folder is currently 1.6.1 as of 2008-07-23. An upgrade to the current version will a) ensure current locale data and b) make sure we have adjusted (if needed) to any changes in CLDR data before we actually start to use the Locale subsystem in FLOW3.
8207,TYPO3.Flow,Bug,"",Resolved,Must have,CGL naming violation in Locale subsystem,Karsten Dambekalns,Karol Gusak,2010-10-20 05:39,I18n,"","","","",100,2010-06-14 05:32,"","",1779600,"","","Currently the Locale code uses CLDR all uppercase in class names, namespaces and variable names. This violates our (almost 100% strict) naming rules. Instead it should be ""Cldr"" (or ""cldr"" at the beginning of variable names."
8208,TYPO3.Flow,Task,"",Resolved,Must have,Define public API in Locale subsystem,Karsten Dambekalns,Karol Gusak,2010-10-20 05:39,I18n,"","","",1.00,100,2010-06-14 05:43,"","",40200,"","",The Locale subsystem needs to have the public API defined (using @api annotations) on classes and methods that are intended to be used by FLOW3 users.
8233,TYPO3.Fluid,Feature,"",Resolved,Should have,Uri_ImageViewHelper // Link to a resized image,Christian Baer,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-06-15,2010-06-18,"",100,2010-06-15 04:35,"","",2596300,"","","Request: 
I think this is not possible for the moment. Either you display a (resized) image or you link to the original image (fullsize). So I think it would be nice to have a viewhelper for linking to an image, providing width/height settings.

Solution:
Here's the implementation of a ViewHelper that works like ImageViewHelper, but just renders the URI, not the whole <img>-Tag. It is based on the original ImageViewHelper and simply returns the $imageResource. Useful for the creation of XML-files where the URI of a resized image is needed.

"
8247,TYPO3.Fluid,Feature,"",Resolved,Should have,add more uri options to form viewhelper,Susanne Moog,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-06-15,"","",100,2010-06-15 08:01,"","",2596250,"","","The form view helper is missing an addQueryString param (like the link.action view helper) to easily keep the current query params when sending the form (for example you could have other extensions depending on certain params on your form page and would like to keep the current state when sending the form). 

Attached a small patch which enables this feature (though I don't know if it's the correct ""fluid"" way)."
8255,TYPO3.Flow,Bug,"",Resolved,Should have,Invalid exception class reference in signal slot component,Manuel Pichler,Karsten Dambekalns,2010-10-20 05:40,SignalSlot,1.0 alpha 10,2010-06-15,"",1.00,100,2010-06-15 10:40,"","",1804500,"","","The signal slot component throws an InvalidArgumentException[1] without a leading backslash and without a corresponding [[use]]-statement. This results in a fatal error when this branch gets executed.

[1] http://forge.typo3.org/projects/package-flow3/repository/entry/trunk/Classes/SignalSlot/Dispatcher.php#L98"
8258,TYPO3.Flow,Feature,"",Resolved,Should have,call initializeObject() also after Reconstitution,Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:40,Object,1.0 alpha 10,2010-06-15,"","",100,2010-06-15 11:04,"","",1804450,"","","for some cases, it makes sense to call the initializer method (initializeObject()) also after reconstituting an object, and re-injecting its dependencies -- so one can set up calculated properties where a dependency is needed for calculation.

We agreed to pass a parameter (constant) to initializeObject, so one can determine if it is the ""NEW"" or the ""RECONSTITUTE""-case.

TODO: also Documentation must be updated."
8299,TYPO3.Flow,Task,"",Resolved,Should have,Clean up handling of NULL in queries,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 10,2010-06-16,"",4.00,100,2010-06-16 11:14,"","",40500,"","","* When using @equals()@ comparison against NULL should work as expected.
* For collections we need @isEmpty()@.
* @contains()@ with a NULL operand should never match."
8317,TYPO3.Flow,Bug,"",Resolved,Should have,Parse Error in FLOW3 script with PHP < 5.3,Bastian Waidelich,Karsten Dambekalns,2010-10-20 05:40,Core,1.0 alpha 12,2010-09-26,"",1.00,100,2010-06-17 05:26,"","",1807650,"","","When calling @php Packages\Framework\FLOW3\Scripts\FLOW3.php@ with PHP 5.2.x I'm getting a parse error.
<pre>
$className = '\F3\FLOW3\Core\Bootstrap';
$className::defineConstants();
</pre>
should have been the workaround to prevent the parser from dying with a parse error. But the second line throws
<pre>Parse error: parse error in Packages\Framework\FLOW3\Scripts\FLOW3.php on line 38</pre>
on my windows machine with PHP 5.2.10-dev"
8319,TYPO3.Fluid,Task,"",Resolved,Should have,Add ViewInterface to ViewHelperVariableContainer again,Bastian Waidelich,Sebastian Kurfuerst,2010-10-20 05:44,Core,"",2010-06-17,"","",100,2010-06-17 10:00,"","",40650,"","","With r4273 all view typehints have been replaced by an ""object"" annotation.
Robert can't remember the exact reason.
I'd suggest to revert this change and see, whether the unit tests still run.
I think, it's really important to work with an interface rather than @object@"
8361,TYPO3.Flow,Bug,"",Closed,Must have,#1176475350: More than one.. when Request Handler Name is cgi-fcgi,Manfred Siegmund,Karsten Dambekalns,2011-07-06 09:50,MVC,"",2010-06-20,"","",0,2010-06-19 19:08,"","",1779550,"","","I installed flow on a domaingo (Domainfactory) Power XL Webhosting.

Beside some restrictions on the hosters part (setenv in .htaccess is invalid and must be set inside the index.php as putenv) the installation was easy and fast with the flow3 online help.
Everything went ok, the welcome page showed up and said i should use ./flow3 functions to deactivate the Welcome package and
setup a MyPackage. (I am testing flow3 on zox-systems.net Domaingo Power XL Webhosting) 

Using the Putty Terminal i can either type ./flow3 .... or sh flow3 ... means i can use the commandos and the flow3 script on the ssh terminal.
When running any flow3 commands i receive a Flow3 Exception #1176475350: More than one request handler with the same priority can handle the request, but only one handler may be active at a time!

After a couple cups of Coffee and the look in the sources (/Packages/Framework/FLOW3/Classes/MVC/CLI/RequestHandler.php line 87) i found following solution.

The return $this->utilityEnvironment->getSAPIName() === 'cli' is only valid for the web output, but triggers the exception above within the shell.
I changed following parts of /Packages/Framework/FLOW3/Classes/MVC/CLI/RequestHandler.php and the output of the Web, the shell works as expected on my Domaingo Power XL installation.

public function canHandleRequest() {
    if($this->utilityEnvironment->getSAPIName() == 'cgi-fcgi'){
	return ($this->utilityEnvironment->getSAPIName() === 'cgi-fcgi');
    }
    #return ($this->utilityEnvironment->getSAPIName() === 'cli');
}

public function getPriority() {
    if($this->utilityEnvironment->getSAPIName() == 'cgi-fcgi'){
      return 0;
    }else{
      return 100;
    }
}

Expect:
There should be a SetEnv or other configuration flag to configure the request handler name in such cases.

"
8411,TYPO3.Flow,Bug,"",Resolved,Must have,QOM logicalNot() does not work as expected,Andreas Förthner,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 10,2010-06-23,"",3.00,100,2010-06-21 11:25,"","",1804400,"","","@$query->logicalNot()@ seems to be completely ignored. To reproduce that bug you can add a new constraint to the query in @BlogRepository->findByBlog()@:

This works as expected (only posts with the title ""FLOW3"" are returned):

@$query->matching($query->logicalAnd($query->equals('blog', $blog), $query->equals('title', 'FLOW3')))...@

This query should return all posts, but not the ones having ""FLOW3"" as title:

@$query->matching($query->logicalAnd($query->equals('blog', $blog), $query->logicalNot($query->equals('title', 'FLOW3'))))...@

The second query ignores the title constraint and returns all posts."
8427,TYPO3.Flow,Task,"",Resolved,Should have,Access roles are not inherited,Michael Schams,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 10,2010-06-22,"","",100,2010-06-21 20:48,"","",41250,"","","Assuming, we defined the following three ACL roles in @Policy.yaml@:

* *administrator*
* *manager*
* *auditor*

""Auditor"" should be the lowest level, ""administrator"" the highest. A typical example would be: admin has access to everything (incl. user management features), ""manager"" and ""auditor"" have access to low level features. Therefore, a good approach would be to inherit all privileges an ""auditor"" has, to the ""manager"" role and all privileges a ""manager"" has, to ""administrator"".

The attached document shows the entries in ""@Policy.yaml@"" as an example. Note the two/four lines highlighted in red (at ""acl"" section). You would expect that you +do NOT+ need those lines, because ""manager"" already has access to Meter/Asset (inherited by ""auditor""), as well as ""administrator"".

But if these lines are removed, an ""Access denied"" exception is thrown when trying to access Asset/Meters with a ""manager"" or ""administrator"" user.

h2. Assumption:

Privileges are not inherited. In this example: GRANT for role ""auditor"" is not passed to ""manager"" (and ""administrator"" in the next level).

h2. Workaround:

Assign all ""admin"" users to ""auditor"" and/or ""manager"" roles, too. Or: include the additional lines in @Policy.yaml@ as shown in attached document."
8432,TYPO3.Flow,Bug,"",Resolved,Must have,Fix Symlink support for Windows OS,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:40,Resource,1.0 alpha 11,2010-06-22,"","",100,2010-06-22 04:57,"","",1805800,"","","With version 5.3 PHP supports symlinks on Windows >= Vista.
symlink($target, $link) works indeed on my Windows 7 machine. But is_link($link) returns FALSE.
That's why the unit test
<pre>
F3\FLOW3\Resource\Publishing\FileSystemPublishingTargetTest::mirrorFileSymLinksTheGivenFileIfTheSettingSaysSo()
</pre> fails on Windows.

A solution might be to use readlink() instead of is_link() as readlink() returns the same for $target and $link (the path to the target).."
8455,TYPO3.Flow,Bug,"",Resolved,Should have,"""Wrong"" default package used in ResourceInterceptor",Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Resource,1.0 alpha 10,2010-06-23,"",1.00,100,2010-06-23 04:23,"","",1804350,"","","When using a resource link in a Fluid template FLOW3's ResourceInterceptor transforms that into a Resource ViewHelper setup. If it doesn't detect a package key in the used URL the current package is used as default.

This doesn't work in TYPO3, as the current package is TYPO3, whereas the template file comes from the site's package. The intuitive behavior would be if the package the template is in was used as default."
8462,TYPO3.Flow,Feature,"",New,Should have,Check subobjects in query rewriting,Andreas Förthner,"",2010-10-20 05:39,Security,"",2010-06-23,"","",0,2010-06-23 08:49,"","",1779500,"","",For usual queries this could be done by adding join conditions. For an object retrieved by UUID this has to be discussed.
8463,TYPO3.Flow,Feature,"",New,Should have,Check security policy for objects reconstituted in the session scope,Andreas Förthner,"",2010-10-20 05:39,Security,"",2010-06-23,"","",0,2010-06-23 08:52,"","",1779450,"","","Currently persited objects that are reconstituted in the session scope are not checked against the security policy. This might be a problem, if a persisted object has changed from one request to the other and the user is no longer allowed to access this object becaouse of the change."
8464,TYPO3.Flow,Feature,"",New,Should have,Write settings using the ConfigurationManager,Karsten Dambekalns,"",2011-12-15 11:06,Configuration,"","","","",0,2010-06-23 09:44,"","",1779400,"","","It should be possible to write settings using the ConfigurationManager, similar to PackageStates.yaml.

Rules:
* constants that have been replaced upon reading should be reversed when writing
* never write changes from a context to global settings
* always write global settings

The last rule assumes that settings changes done through some interface are supposed to affect global settings, context specific changes are done manually.

Question: is this a valid assumption?
"
8468,TYPO3.Fluid,Feature,"",Resolved,Should have,Add debug viewhelper,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-06-23,"","",100,2010-06-23 11:24,"","",2596200,"","","In v4 we have a <f:debug /> viewhelper to dump objects.
We need to forward port this to v5."
8484,TYPO3.Fluid,Bug,"",Closed,Should have,Revise EscapeViewHelper,Bastian Waidelich,Bastian Waidelich,2011-07-11 08:38,ViewHelpers,1.0 beta 1,2010-06-24,"","",0,2010-06-24 08:53,"","",2596150,"","","The current implementation of the EscapeViewHelper is a bit odd IMO.
1. I find it weird to use one ViewHelper to escape html, entities & urls
2. If anything goes wrong, the EscapeViewHelper currently returns the *unchanged* input string.. That is, if you'd write @<f:escape value=""dangerous html"" type=""HTML"" />@ the value would not be htmlspecialchar'ed"
8485,TYPO3.Flow,Bug,"",Resolved,Should have,Policies/ACLs do not work (anymore),Michael Schams,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 10,2010-06-24,"","",100,2010-06-24 08:55,"","",1804300,"","","Attached file @./Configuration/Policy.yaml@ does not work.

*Issue (1)*
line 13: keyword before pointcut expression has to read ""methods"" (with ""s""), not ""method"" as documented in [1]. Keyword was ""method"" (without ""s"") before (in an older SVN revision).

*Issue (2)*
It's unknown how ACLs work now. Previously the syntax in file @Policy.yaml@ was:

<pre>
acls:
  ROLENAME:
   RESOURCE_NAME: GRANT
</pre>

This causes the following exception:

*_Notice: Undefined index: entities in /var/www/.../Packages/Framework/FLOW3/Classes/Security/Policy/PolicyService.php line 401_*

Removing the ""acls:""-section from file @Policy.yaml@ ""fixes"" the problem.

It's assumed that these two issues were introduced by changes in SVN between 23/June/2010 and 24/June/2010.

[1] = http://flow3.typo3.org/documentation/manuals/flow3/flow3.securityframework/
Example 13.10 ""Example resources definition..."""
8489,TYPO3.Flow,Task,"",Resolved,Should have,Merge policies of different packages,Andreas Förthner,"",2010-12-13 10:31,Security,1.0 alpha 14,2010-06-24,"","",0,2010-06-24 10:33,"","",41550,"","",the configuration has to be merged. Currently e.g. the acls of different packages override eachother.
8491,TYPO3.Fluid,Task,"",Needs Feedback,Should have,link.action and uri.action differ in absolute argument,Bastian Waidelich,Karsten Dambekalns,2012-03-07 11:05,ViewHelpers,"",2010-06-24,"","",0,2010-06-24 13:41,"","",41600,"","","In r3548 the ""absolute"" argument of the link.action ViewHelper has been removed with following comment:
""[~TASK][~API] Fluid (ViewHelper): The ActionViewhelper now produces only absolute URIs. The argument ""absolute"" is now obsolete.""

I don't understand why this would make sense.. And if it does, shouldn't the uri.action ViewHelper be changed accordingly?"
8535,TYPO3.Fluid,Bug,"",Resolved,Must have,CheckBoxViewHelper hidden value creates extra data when using multi-valued field names,Balisky Christophe,Bastian Waidelich,2010-10-20 05:44,"","",2010-06-28,"","",100,2010-06-28 13:40,"","",2596100,"","","In fluid 1.2.0

When creating multiple edit grids (in tables for examples)  I use the following syntax to retrieve an array of values to update in my form :

<ul>
  <f:for each=""{articles}"" as=""article"">
    <li>  
     <f:form.checkbox name=""articles[]"" value=""{article.uid}"" />
    </li>
  </f:for>
</ul>

But the new hidden field created to manage empty values actually adds a new entry in the articles array I receive.

This is a regression form previous versions of fluid.

The actual hidden field solution is only valid if uses with mono-valued fields.



"
8540,TYPO3.Fluid,Bug,"",Closed,Should have,Call to undefined method F3\\Fluid\\View\\TemplateView::parseTemplate(),Michael Schams,"",2010-10-20 05:44,"","",2010-06-29,"","",0,2010-06-28 20:52,"","",2596050,"","","PHP Fatal error after changes in *r4654* but also in *r4656*:

<pre>
[Tue Jun 29 00:45:30 2010] [error] [client xx.xx.xx.xx] PHP Fatal error:
Call to undefined method F3\\Fluid\\View\\TemplateView::parseTemplate()
in /home/flow3/www/FLOW3-subversion/trunk/Packages/Framework/Fluid/Classes/View/AbstractTemplateView.php on line 236
</pre>"
8544,TYPO3.Flow,Feature,"",Resolved,Should have,"If no role is authenticated, an ""Anonymous"" role should be returned.",Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 10,2010-06-29,"","",100,2010-06-29 07:04,"","",1804250,"","","This can be done in the security context, by returning a fixed role, when no other role is authenticated."
8554,TYPO3.Flow,Bug,"",Resolved,Must have,AOP interceptor removes default value from method argument,Bastian Waidelich,Karsten Dambekalns,2010-10-20 05:40,AOP,1.0 alpha 11,2010-08-16,"",2.00,100,2010-06-29 13:45,"","",1805750,"","","When activating an AOP interceptor for a method
<pre>
public function indexAction(array $someArray = array)
</pre>
I'm receiving following runtime notice:
<pre>
Declaration of F3\Viewhelpertest\Controller\StandardController_AOPProxy_Development::indexAction() should be compatible with that of F3\Viewhelpertest\Controller\StandardController::indexAction()
</pre>

The reason is, that in the AOP proxy class the declaration looks like
<pre>
public function indexAction(array $someArray)
</pre>"
8558,TYPO3.Flow,Bug,"",Resolved,Must have,Multiple validations will append to list of errors instead of replacing list from last validation,Christian Lerrahn,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 11,2010-08-06,"",2.00,100,2010-06-29 20:42,"","",1805700,"","","If I validate several objects one after the other and then call getErrors() the listed errors will be the set union of all errors in the different single validation processes.

This does not agree with the comments found in

@Classes/Validation/Validator/ValidatorInterface.php@

which state

<pre>
[...]
        /**
         * Checks if the given value is valid according to the validator.
         *
         * If at least one error occurred, the result is FALSE and any errors can
         * be retrieved through the getErrors() method.
         *
         * Note that all implementations of this method should set $this->errors() to an
         * empty array before validating.
         *
         * @param mixed $value The value that should be validated
         * @return boolean TRUE if the value is valid, FALSE if an error occured
         * @api
         */
        public function isValid($value);
[...]
        /**
         * Returns an array of errors which occurred during the last isValid() call.
         *
         * @return array An array of \F3\FLOW3\Validation\Error objects or an empty array if no errors occurred.
         * @api
         */
        public function getErrors();
[...]
</pre>

A piece of code like

<pre>
$validator = $this->validatorResolver->getBaseValidatorConjunction('F3\Foo\Domain\Model\Bar');
if ($validator->isValid($fooBarObject)) {
} else {
 $errorMessages = '';
 foreach ($validator->getErrors() as $error) {
  $errorMessages .= $error->getPropertyName().', ';
 }
}
</pre>

will not give the errors for the last instance of $fooBarObject that was validated but instead the set union of errors from all instances validated up to this point. In other words, if in the first instance the property ""abc"" id not validate and in the second instance the property ""bla"" didn't validate, the error lists will be

instance 1: abc,
instance 2: abc,bla,

instead of

instance 1: abc,
instance 2: bla,"
8576,TYPO3.Flow,Bug,"",Resolved,Should have,Unable to overwrite inherited ACL roles in Policy.yaml,Michael Schams,Andreas Förthner,2010-12-12 12:40,Security,1.0 alpha 14,2010-07-01,"",2.00,0,2010-06-30 22:19,"","",1809100,"","","Roles are inherited correctly but you can not overwrite a previously defined DENY with a GRANT. It's working fine to overwrite a GRANT with a DENY bit not vice versa.

See attached PDF document for clarification.

Please note: this ticket is related to #8427 (see examples there) but describes a (new) system behaviour (bug)."
8648,TYPO3.Fluid,Bug,"",New,Should have,format.crop ViewHelper should support all features of the crop stdWrap function,Bastian Waidelich,"",2011-10-21 07:37,ViewHelpers,"",2010-07-04,"","",0,2010-07-04 07:16,"","",2596000,"",FLOW3 1.0.0,"Right now the format.crop ViewHelper only works partly in BE mode (v4) and is missing some features in v5. Also it can't handle HTML content correctly yet.
All implementations should support the same feature set."
8670,TYPO3.Flow,Bug,"",Resolved,Should have,Non-required action argument throws Exception on unknown get-parameter uid,Sebastian Kurfuerst,Karsten Dambekalns,2010-10-20 05:40,MVC,1.0 alpha 11,2010-08-18,"","",100,2010-07-06 02:21,"","",1805650,"","","see related issue, I think this applies to FLOW3 as well."
8724,TYPO3.Fluid,Task,"",Resolved,Should have,remove not needed argument from renderPartial,Felix Oertel,"",2010-10-20 05:44,Core,"",2010-07-07,"","",0,2010-07-07 06:46,"","",44300,"","","hey,

in Classes/View/TemplateView.php renderPartial() the second argument @$sectionToRender@ is required (no default value) but it is not used in the method ... 

it clearly will be a breaking change if we remove that, but propably it's not too late right now ;)

or is this variable intended to be used later?

regards, foertel

ps: while checkin v5 i see that the TemaplateView looks different there. Is this intended or just un-backported refactoring?"
8732,TYPO3.Fluid,Task,"",Resolved,Should have,Small improvement of ForViewHelper,Michael Feinbier,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-07-08,"","",100,2010-07-08 03:10,"","",44400,"","","In the @Tx_Fluid_ViewHelpers_ForViewHelper@ there's a method @convertToArray()@ which extracts an array from the traversable object via foreach.
This should be replaced by the function @iterator_to_array()@ which does basically the same but more performant on huge objects than foreach'ing manually.

Patches for v4 and v5 branch are attached."
8736,TYPO3.Flow,Feature,"",Resolved,Should have,Implement generic Identity RoutePartHandler,Bastian Waidelich,Bastian Waidelich,2011-09-20 14:03,MVC - Routing,1.0.0,"","","",100,2010-07-08 07:17,"","",1779350,"","","We should provide a generic RoutePart handler, that allows to match/resolve Identities. This should be configurable through the ""options"" setting that was implemented with #2825.
Instead of
<pre>
  uriPattern:    'posts/{post}'
  defaults:
    '@package':    Blog
    '@controller': Post
    '@action':     show
  routeParts:
    post:
      handler: F3\Blog\RoutePartHandlers\PostRoutePartHandler
</pre>
I could imagine something like
<pre>
  uriPattern:    'posts/{post}'
  defaults:
    '@package':    Blog
    '@controller': Post
    '@action':     show
  routeParts:
    post:
      handler: IdentityRoutePartHandler
      options:
        model: F3\Blog\Domain\Model\Post
        pattern: '{date}/{title}'
</pre>

Then you wouldn't need a custom RoutePart handler anymore most cases..

*Note1:* the namespace of the handler can be omitted when it is in the FLOW3 package
*Note2:* the line ""handler: IdentityRoutePartHandler"" could be implicit for domain models
*Note3:* how to handle the date format here? should we somehow support regular expressions in the pattern?"
8749,TYPO3.Fluid,Bug,"",Resolved,Should have,SelectViewHelper throws fatal error on PHP 5.2,Jochen Rau,Bastian Waidelich,2010-12-14 13:21,ViewHelpers,"",2010-07-08,"","",100,2010-07-08 15:37,"","",2595900,"","","Calling the SelectViewHelper leads to the following

Fatal Error: Objects used as arrays in post/pre increment must return value by reference in ... SelectViewHelper on Line 171."
8772,TYPO3.Flow,Task,"",Resolved,Should have,"Rename the ""Locale"" sub package to ""i18n""",Robert Lemke,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,2010-07-09,"","",100,2010-07-09 08:13,"","",45300,"","",The Locale package will eventually contain more functionality than just handling the locale and CLDR. It also offers means to translate labels and otherwise localize FLOW3 applications. Therefore this sub package is really about internationalization.
8773,TYPO3.Fluid,Major Feature,"",Resolved,Should have,Implement support for Widgets,Bastian Waidelich,Sebastian Kurfuerst,2010-10-20 05:44,"",1.0 alpha 12,2010-07-09,"","",100,2010-07-09 08:46,"","",2604300,"","","h2. Considerations:

Widgets...
* ...are a special implementation of a Fluid ViewHelper
* ...behave like ""Plugins in Plugins""
* ...(can) implement their own Controller & Template
* ...should be integratable without the need to modify the orignial Package/Plugin (e.g. add pagination to Blog posts by adding the widget to your custom template)

h2. Possible widgets:

* *Pagination Widget*: If put in the template like _<f:widget.pagination items=""{posts}"" as=""postsOfThisPage"" />_ (syntax is not clear yet) will fetch a subset of posts and make it available as ""postsOfThisPage"". To prevent, that all posts are loaded, we'll need some special lazy loading proxy (see related issue)
* *Autocompletion*
* *Sortable grid*
* *(Google) maps*
* ..."
8774,TYPO3.Flow,Feature,"",Resolved,Should have,Query::execute() should return a Proxy instead of array,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:39,Persistence,"","","","",100,2010-07-09 08:56,"","",1779300,"","","While discussing a widget concept (#8773) we realized, that it would be good to be able to access a query of a resultset before actually retrieving objects from the persistence.
The Query::execute() method could instead of an array return a *LazyQueryResultList* that contains the query object. Only if this list is accessed, the objects would be loaded. But it should be possible to retrieve the related query object without fetching the objects (e.g. through *LazyQueryResultList::getQuery()* or *persistenceManager->getQueryByResult($myLazyQueryResultList)*).

That would enable us for example to copy and modify a query without actually executing it.

h2. Implications

* This will be a breaking change, cause existing array type hints will break
"
8824,TYPO3.Fluid,Task,"",Resolved,Must have,Create an abstract base class for Condition ViewHelpers to remove Code Duplication,Sebastian Kurfuerst,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-07-12,"","",100,2010-07-12 14:09,"","",45600,"","","In FLOW3, we already have quite some condition ViewHelpers (f:if, f:security.if*). It turns out they all use a private API inside the framework, as they directly implement the ChildNodeAccessInterface, which is no public API.

h3. Proposed solution
Create a new base class \F3\Fluid\Core\ViewHelper\ConditionViewHelper which should be used as a basis of condition-based ViewHelpers.

h3. Breaking change

*This is a breaking change for people who copied the ""if""-ViewHelper and did their own condition evaluation, as the internal workings of the ""if""-ViewHelper changed.*

h3. How to upgrade

Have a look at the new IfViewHelper, and see that it is now far easier to get up and running."
8834,TYPO3.Fluid,Task,"",Resolved,Should have,Add fallback for use of TagBasedViewHelper,Karsten Dambekalns,Bastian Waidelich,2010-10-20 05:44,Core,"",2010-07-13,"","",100,2010-07-13 04:00,"","",45750,"","","As discussed there should be a TagBasedViewHelper that is marked deprecated, logs that fact and extends from AbstractTagBasedViewHelper."
8835,TYPO3.Flow,Task,"",Resolved,Should have,Remove @version annotation from FLOW3 classes,Bastian Waidelich,Karsten Dambekalns,2010-10-20 05:40,"",1.0 alpha 11,2010-07-13,"","",100,2010-07-13 05:35,"","",45800,"","","Currently each PHP class contains the following line
<pre>
 * @version $Id: $
</pre>
That is replaced by SVN clients (if configured correctly) before comitting.
With the move to Git that won't be the case any longer, so we should get rid of these annotations.
AFAIK there is no corresponding feature in Git, but IMO we don't need the revision in the file or have any of you ever counted on the @version annotation? Besides, it makes backporting a very tedious job.

*Note:* If we decide to remove this annotation, we'll have to adjust the CGL document on http://flow3.typo3.org/documentation/coding-guidelines/ too"
8842,TYPO3.Flow,Feature,"",Resolved,Should have,Implement Translator class,Karol Gusak,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,"","","",100,2010-07-13 09:15,"","",1805600,"","",The translator class will be used for message (labels) translation. By default XLIFF format will be used as a storage.
8846,TYPO3.Flow,Bug,"",Resolved,Must have,AbstractXmlParserTest dies with a PHP error,Bastian Waidelich,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,2010-07-13,"","",100,2010-07-13 09:34,"","",1805550,"","","The unit test *AbstractXmlParserTest::throwsExceptionWhenBadFilenameGiven()* dies with following PHP error on my machine (Win 7, PHP 5.3):
<pre>
C:\[...]\flow3\Packages\Framework\FLOW3\Classes\Locale\Xml\AbstractXmlParser.php:88
Warning: simplexml_load_file() [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: I/O warning : failed to load external entity &quot;foo&quot; in C:\[...]\flow3\Packages\Framework\FLOW3\Classes\Locale\Xml\AbstractXmlParser.php line 88
</pre>"
8849,TYPO3.Flow,Bug,"",Resolved,Must have,Remove var_dump() call in F3\FLOW3\I18n\Cldr\Reader\DatesReader,Bastian Waidelich,Karol Gusak,2010-10-20 05:40,I18n,1.0 alpha 11,2010-07-13,"","",100,2010-07-13 14:06,"","",1805500,"","","Hi Karol and sorry for picking on you ;)
By coincidence I just found a left over var_dump() call in F3\FLOW3\I18n\Cldr\Reader\DatesReader::formatDateTime().

Besides most of the method seem to have an invalid author annotation <pre>@author Karol Gusak <firstname@lastname.eu></pre>"
8852,TYPO3.Fluid,Feature,"",Resolved,Should have,Add method overrideArgument() to AbstractViewHelper,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,Core,"",2010-07-14,"","",100,2010-07-14 03:53,"","",2595850,"","","When registering an argument twice, you'll get an exception
<pre>
#1253036401: Argument ""xyz"" has already been defined, thus it should not be defined again.
</pre>
That's intended, but we need the possibility to override argument registrations (e.g. for the form.checkbox vh that sets the ""value"" argument required)"
8854,TYPO3.Fluid,Bug,Task #26658: Make Form ViewHelpers consistent,Resolved,Must have,form.checkbox ViewHelper throws Exception in newAction,Bastian Waidelich,Bastian Waidelich,2012-01-20 06:22,ViewHelpers,1.1,2010-07-14,"","",100,2010-07-14 03:57,"","",2595800,"",Git master,"When using the form.checkbox ViewHelper in ObjectAccessorMode (bound to a property of the form object) this leads to an error when the form object is NULL (e.g. in the newAction) because the type of the property (array / boolean) can't be determined.
To avoid this issue, we need a new argument ""multiple"" that will make sure, that ""[]"" are appended to the checkbox field name."
8864,TYPO3.Flow,Task,"",Resolved,Should have,We should mention the usage of PHP Error Control Operators in the FLOW3 CGL,Bastian Waidelich,Karsten Dambekalns,2010-10-20 05:40,- Documentation -,1.0 alpha 11,"","","",100,2010-07-14 12:58,"","",45900,"","","Using the @ Error Control Operator (http://www.php.net/manual/en/language.operators.errorcontrol.php) to avoid PHP Warnings and Errors is considered bad practice.
I couldn't find anything about this in the FLOW3 Best Practices / CGL. IMO this should be added."
8865,TYPO3.Flow,Feature,"",Resolved,Should have,FlashMessage should become an object,Dennis Ahrens,Karsten Dambekalns,2011-07-06 09:59,MVC,1.0 beta 1,"","","",100,2010-07-14 14:32,"","",1779250,"","","Would be nice if a FlashMessage becomes an object :)

Currently a FlashMessage is just a string.

I think it would be nice to store more informations related to the message instead of the string. e.g. the DateTime it was created and type and maybe some other informtations which may be useful.

There is a patch with a possible solution available for extbase:

http://forge.typo3.org/issues/7098"
8879,TYPO3.Fluid,Bug,"",Closed,Should have,{ } when using as JavaScript,Adrian Föder,"",2013-12-04 07:01,"","",2010-07-15,"","",0,2010-07-15 07:43,"","",2595750,"",(any),"assuming the following FLUID code:

<pre>
<f:if condition=""foo"">
  <script type=""text/javascript"">
    var myDemoJSObject = {
      key1: 'foo',
      key2: 'bar
    }
  </script>
</f:if>
</pre>


this is outputted as

<script type=""text/javascript"">
var myDemoJSObject = Array
</script>


I think the brackets are regarded as inline view helpers and tried to be parsed. Wouldn't it be senseful to require inline view helpers may NOT have a whitespace after the opening bracket, so it should be (regex) /{\w/ and NOT /{./ or something like that."
8880,TYPO3.Fluid,Bug,"",Resolved,Should have,Be.ContainerViewHelper renders page header too early,Andreas Wolf,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-07-15,"","",100,2010-07-15 07:57,"","",2595700,"","","It is currently impossible to add something to the pageRenderer object in a child view helper of a Be.ContainerViewHelper. This is due to the children being rendered after the header has been rendered.

This bug makes it impossible to e.g. add new JS files inside child view helpers, for example inside a backported includeJavaScript view helper.

Solution: Just reverse the order in which the header and the children are rendered."
8893,TYPO3.Fluid,Bug,"",Resolved,Must have,Negative numeric values are not correctly converted to FALSE,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,Core,"",2010-07-15,"","",100,2010-07-15 13:08,"","",2595650,"","","<pre>
<f:if condition=""-1"">this should not be rendered</f:if>
</pre>
actually renders the content, cause ViewHelperNode::convertToBoolean() does not correclty determine the type as /numeric/.

Solution: move the is_numeric() check *above* the is_string() check."
8913,TYPO3.Flow,Bug,"",Resolved,Must have,Unit test failures because sys_get_temp_dir() doesn't always return directory name with trailing slash,Christian Kuhn,Andreas Förthner,2010-10-20 05:40,- Testing -,1.0 alpha 11,2010-07-17,"","",100,2010-07-16 19:35,"","",1805450,"","","php function sys_get_temp_dir() usually returns something like '/tmp/', but on some systems the trailing slash is missing (for me: a debian stable box, self compiled php 5.3.2, running as cgi). This leads to failing tests, eg. in Cache\Backend\PdoBackendTest

This could be easily fixed by always adding a slash (see attached patch), but leads to double slashes if the method returns with trailing slash.

Maybe it would be better to add / use some wrapper method to add the slash if it's missing?"
8918,TYPO3.Flow,Bug,"",Resolved,Should have,memcached backend: Remove tagIndex,Christian Kuhn,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 11,2010-08-16,"","",100,2010-07-17 13:29,"","",1805400,"","","Problem:
The memcached backend implementation currenty stores this key-value ""structure"" to map our identifier-data-keys relation:
* identifier -> data
* identifier -> keys
* key -> identifiers
* tagIndex -> All known tags

The tagIndex doesn't have any benefit at all, it just leads to more set() and get() calls.

Solution:
Completly remove tagIndex to save some operations which speeds up this backend, unit tests still show green bar.

Numbers:
Performance tests show that the backend speeds up between ~10 to 100% by removing the tagIndex. As an example, attached images show a test which set()'s a raising number of cache entries with a single attached tag to the backend. More numbers can be generated with ext:enetcacheanalytics (forge) in v4.

Notes:
Memcache is a simple key-value store and not designed to store structures of multiple related entries. Our implementation is a misuse, which leads to corrupt caches if memcache evicts entries from cache (because it needs space for new elements), or if single servers fail in a multi server environment."
8923,TYPO3.Flow,Task,Task #27561: Complete documentation,Under Review,Could have,Provide a Nginx Server Configuration for FLOW3,Thomas Fritz,Christian Müller,2014-06-19 10:34,- Documentation -,1.1.1,2010-07-18,"","",0,2010-07-18 06:40,"","",46050,"","","Provide or let the FLOW3 CLI generate a Nginx (or Apache) server configuration file or document it how one can use FLOW3 with nginx.
This is the main FLOW3 server configuration. On my blog i have posted the other configuration files needed: http://fritzthomas.com/php/600-how-to-use-flow3-with-nginx-working-server-configuration/
The only part i could not test are the ""_Resources/Persistent"" Urls. But they should work.
<pre>
server {
        listen          80; 
        server_name     flow3.local *.flow3.local;
        root            /var/www/test/flow3/Web;
        autoindex       off; 
 
        access_log      /var/www/test/logs/access.log combined;
        error_log       /var/www/test/logs/error.log info;
 
        location ~ ""^/_Resources/Persistent/"" {
                rewrite ""^(_Resources/Persistent/.{40})/.+(\..+)"" /$1$2 break;
        }   
 
        location ~ ""^/_Resources/"" {
                access_log off;
                log_not_found off;
                expires max;
                break;
        }   
 
        location / { 
                rewrite "".*"" /index.php last;
        }   
 
        location = /index.php {
                #fastcgi_param   FLOW3_CONTEXT          Development;
                fastcgi_param   FLOW3_CONTEXT           Production;
                fastcgi_param   FLOW3_REWRITEURLS       1;  
                fastcgi_intercept_errors on; 
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                include includes/fastcgi_params;
 
                # ""Upstream"" defined in nginx.conf
                fastcgi_pass    php-5.3.2; 
        }   
}
</pre>
"
8939,TYPO3.Fluid,Bug,"",Rejected,Should have,format.date does not handle TYPO3/UNIX timestamps,Xavier Perseguers,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-07-19,"","",0,2010-07-19 09:34,"","",2595600,"","","Hi,

I just upgraded an Extbase extensions I developed for TYPO3 4.3 and came across a bug in the format.date ViewHelper. My dates are not displayed anymore as the conversion from unix timestamp to DateTime object is invalid (constructor expects a string representation, not a timestamp).

Enclosed is a patch that solves this issue."
8968,TYPO3.Flow,Bug,"",Resolved,Must have,SQL errors when using setOrderings() with multiple fields,Peter Beernink,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 11,2010-08-18,"",1.00,100,2010-07-20 13:22,"","",1805350,"","","When using setOrderings() with multiple fields, an SQL error is thrown. However, when using only one field, everything works as expected.
Example:
<pre>
$query = $this->createQuery();
return $query
    ->setOrderings(array('lastname' => \F3\FLOW3\Persistence\QueryInterface::ORDER_ASCENDING, 'firstname' => \F3\FLOW3\Persistence\QueryInterface::ORDER_ASCENDING))
    ->execute();
</pre>
Will throw the following error:
<pre>
SQLSTATE[HY000]: General error: 1 ambiguous column name: _orderingtable1.parent

PDOException thrown in file
Packages/Framework/FLOW3/Classes/Persistence/Backend/GenericPdo/Backend.php in line 800.
</pre>

I've tested this on Alpha 10, with both SQLite and MySQL."
8981,TYPO3.Flow,Feature,"",New,Could have,Security/Performance: Provide Webserver Configuration file for common webservers - do not use .htaccess,Thomas Fritz,"",2010-10-20 05:39,"","",2010-07-21,"","",0,2010-07-21 10:41,"","",1779200,"","","For Security, Performance and Compatibility reasons there should be (perhaps optionally) the possibility to let the flow3 CLI generate a Configuration File for all common Webservers like Apache, and delete then the .htaccess file.

The advantages would be:
 - Even if it would be possible to write files like '.htaccess' into the public document directory of the webserver there would be no security issue then.
 - Apache would perform better because 'AllowOverride' could be set to 'None'. So Apache has not to recursively look for a .htaccess file.
 - '.htaccess' is Apache specific and should not be there if not needed."
8989,TYPO3.Fluid,Feature,"",Needs Feedback,Could have,Search path for fluid template files,Christian Winther,"",2012-03-12 13:10,View,"",2010-07-22,"","",0,2010-07-22 04:26,"","",2595550,"","","I'm currently working on a project where multiple extensions need to share some generic views, as well as be able to overwrite them locally.

I have made a patch for fluid that should not break in BC, but add the option for the TemplateView class to scan multiple extensions for view files.

Simply put I have added an ""addExtensionSearchPath"" method to TemplateView that appends extensions to a flat array (if it haven't already been added)

I have also changed so the following methods has a new optional argument called ""extension"" to overwrite the normal behavior of just calling ""getControllerExtensionKey""

* getTemplateRootPath()
* getPartialRootPath()
* getLayoutRootPath()

The protected function expandGenericPathPattern has been updated to iterate the new extensionSearchPaths class property and build search paths like before for each extension.

With the path applied you simple have to do the following in your controller to add a new search path

 $this->view->addExtensionSearchPath($_YOUR_EXT_KEY);

The search paths is processed First In First Out (FIFO) style, so your current extension always takes precedence over any additional searchable extensions added later in the request cycle.

This patch greatly improves the flexibility of the fluid rendering system, and helps keeping things DRY in your apps.

I have attached my patch to this ticket"
8992,TYPO3.Fluid,Feature,"",Resolved,Should have,Forwardport count ViewHelper,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-07-22,"","",100,2010-07-22 09:58,"","",2595500,"","",v5 is currently missing the count ViewHelper that we have in v4.
9005,TYPO3.Fluid,Feature,"",Accepted,Could have,Fluid Template Analyzer (FTA),Bastian Waidelich,Sebastian Kurfuerst,2011-05-06 05:03,"","",2010-07-23,"","",20,2010-07-23 04:55,"","",2595450,"","","We want to implement a wizard like tool, that allows developers to analyze and test their Fluid templates. Following features should be incorporated:

# Display the (highlighted) source code of a Fluid template
## All nodes should be wrapped with <span> tags and meaningful CSS classes
## Partials & Layouts could be linked, so that you only have to click the partial name in order to load the respective partial into FTA
## ViewHelper nodes could be linked with the source code of the corresponding ViewHelper
## Meta information of the node could be added to the span's title attribute (e.g. PHP doc comments of the ViewHelper's render method)
# Display the (highlighted) rendered Fluid template
## All rendered nodes should be wrapped with <span> tags and meaningful CSS classes
## Meta information of the node could be added to the span's title attribute (e.g. source code of this node, parameters of the respective ViewHelper)"
9017,TYPO3.Flow,Feature,"",Resolved,Could have,Implement redis as cache backend,Christian Kuhn,Christian Kuhn,2010-11-15 07:32,Cache,1.0 alpha 13,"","","",100,2010-07-25 15:37,"","",1808350,"","","Redis [1] is a noSQL database with very good scaling characteristics in relation to the amount of entries and data size. This makes redis perfectly fit to our needs as a caching backend. It's a young, but very active project with currently very high development speed.

Performance measurements show that this backend easily outperforms every other existing backend in most use cases, especially when in comes to larger data sizes with tons of entries. All base operations scale O(1) with the number of cache entries (not with the number of affected entries).

There are different adapters for php, this backend implementation uses phpredis, which is a redis implementation as php module [2]

This backend is tested with:
- redis version >= 2.0.0-rc2, version 1.2.0 does not work
- phpredis, git version 0abb9e5ec07b8a8c20b5 from 2010-07-18, prior versions should work, but have a major performance issue with data sizes > 8kb.

This is my first real contribution to FLOW3, i hope code quality is high enough and unit tests have acceptable code coverage. Please give feedback if anything needs to be improved.

The v4 backport of this backend already exists and is in production for early adapters, it will hopefully make it to v4.5, as soon as FLOW3 accepted the implementation.

[1] http://code.google.com/p/redis/
[2] http://github.com/owlient/phpredis"
9037,TYPO3.Fluid,Feature,"",Rejected,Won't have this time,new comparator for CheckboxViewhelper,Thomas Mammitzsch,"",2010-10-20 05:44,ViewHelpers,"",2010-07-26,"","",0,2010-07-26 10:54,"","",2595400,"","","i have a suggestion for a new ""in_array"" comparator in ViewHelperNode. Reason is that i'm creating forms in the frontend, where form definition happens in the backend. Everything works fine, even if i get validation errors, the form shows up prefilled.

The only exception is the CheckboxViewHelper. Because this is an array of values (at least if you have multiple checkboxes with the same name and different values) you can not compare it against a single value currently.
It would be nice if one can check if a value is in that array, to check the checkbox in case of validation errors, a return from a last-check-before-submit page (or generally when the form of the newAction has to be displayed again). I added one case to the evaluateComparator method in ViewHelperNode to do that and it works:

case 'in_array':
    return in_array($leftSide, $rightSide);

of course i also added 'in_array' also to the comparators static array in ViewHelperNode.
Could we add this permanently, what do you mean? "
9090,TYPO3.Fluid,Bug,"",Resolved,Must have,Chaining of ->assign() does not work anymore,Michael Feinbier,Bastian Waidelich,2010-10-20 05:44,View,"",2010-07-30,"","",100,2010-07-30 06:07,"","",2595350,"","","Since the latest release of Fluid the chaining of the ->assign() method does not work anymore
<pre>
$this->view
  ->assign('request', $request)
  ->assign('languages', $this->languageRepository->findActive());
</pre>

Throws error @Fatal error: Call to a member function assign() on a non-object@"
9093,TYPO3.Flow,Bug,"",Resolved,Must have,UUID generated but object is null,Scott MacDonald,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-08-25,"",2.00,100,2010-07-30 07:32,"","",1807600,"","","An object is created via a form and the create action redirects to another action to define the view; the second action receives a null argument. 

After setting the second action to run even if it received null and running a debugger, I found that the UUID was generated and even properly appended to the URI, but the UUID refers to nothing.

[from newsgroup/mailing list]:
<pre>
I saw an earlier thread that seemed to be similar to this but there were few details and it wasn't resolved.
 
I completed the flow3 1.0.0 alpha 7 tutorial on the web site then downloaded flow3 1.0.0 alpha 10 to work on my own project. In my project, I have a Disc object in the model:
 
<?php
declare(ENCODING = 'utf-8');
namespace F3\TrackLibrary_PHP\Domain\Model;
 
/**
 * A disc
 *
 * @scope prototype
 * @entity
 */
class Disc {...
 
In DiscController.php, I have a create action and an edit action:
 
    /**
     * Creates a new disc
     *
     * @param \F3\TrackLibrary_PHP\Domain\Model\Disc $disc A fresh Disc object which has not yet been added to the repository
     * @return void
     */
    public function createAction(\F3\TrackLibrary_PHP\Domain\Model\Disc $disc) {
        $this->discRepository->add($disc);
        $this->disc = $disc;
        $this->redirect('edit', \NULL, \NULL, array('disc' => $disc));
    }
 
    /**
     * Edit a disc
     *
     * @param \F3\TrackLibrary_PHP\Domain\Model\Disc $disc
     * @return string
     */
    public function editAction(\F3\TrackLibrary_PHP\Domain\Model\Disc $disc) {...
 
The first two lines in createAction are things I put in there while debugging in order to confirm the issue. The code of editAction doesn't matter because I never get there. The problem is that the $disc argument passed to editAction is NULL. Running a debugger, I found that those first two lines of createAction don't stick: if I get rid of the argument for editAction in order to get it to execute, $this->disc is NULL and $this->discRepository is empty once I enter editAction.
 
Can anyone see what I'm doing wrong? I'm happy to provide more details, if needed.
 
Thanks,
 
Scott</pre>"
9114,TYPO3.Fluid,Bug,"",Resolved,Must have,"TemplateView - still using $viewData instead of $variables - error ""Context has to be initialized with an array, NULL given.""",Stefan Neufeind,"",2010-10-20 05:44,View,"",2010-08-02,"","",0,2010-08-02 04:55,"","",2595300,"","","Error-message is: Context has to be initialized with an array, NULL given.

This is a follow-up to the resolved bug #7053 (filed against extbase). They share in common that initialisation was not done, but the root-cause is different!

With TYPO3 v4.3.3 in sysext/extbase/Classes/MVC/View/AbstractView.php there was an initialisation of viewData to array(). With TYPO3 v4.3.4 this was renamed from viewData to variables (inside AbstractView).

However TemplateView distributed with TYPO3 v4.3.4 still relies on viewData.

Fix: Renaming this to variables makes it work again.


        protected function buildRenderingContext($variableContainer = NULL) {
                if ($variableContainer === NULL) {
                        $variableContainer = $this->objectFactory->create('Tx_Fluid_Core_ViewHelper_TemplateVariableContainer', $this->variables);"
9135,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,Rejected,Won't have this time,FormViewHelper cannot get the value of DateTime,Michael Feinbier,Bastian Waidelich,2011-06-28 06:23,ViewHelpers,1.0.0,2010-08-04,"","",0,2010-08-04 11:14,"","",47600,"","","Hey,

not quite shure if i did something wrong but I think I found a misbehaviour in the @AbstractFormViewHelper@. It seems that @DateTime@-Fields are not read correctly.

My model has a property:
<pre>/**
 * Produktdatum
 * @var DateTime
 * @validate NotEmpty
 */
protected $product_date;</pre>

Now if I try to read the value of the field in a form like this:
<pre><f:form.hidden property=""warranty_date"" id=""hidden_warranty_date"" /></pre>
the *value* of the hidden form is *empty*.
The property itself is stored correctly because:
<pre>{f:format.date(date: '{newArticle.warranty_date}', format: 'd-m-Y')}</pre> written just next to the hidden form gives me the correct date.

So I think the @$this->getValue()@ in the @AbstractFormViewHelper@ is not able to determine the value of the DateTime object? Maybe it should echo the Unix-Timestamp? (@12353534)"
9136,TYPO3.Flow,Task,"",Resolved,Should have,Clean up View implementations,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:40,MVC,1.0 alpha 11,2010-08-04,"","",100,2010-08-04 13:47,"","",47650,"","","Currently there are four classes implementing F3\FLOW3\MVC\View\ViewInterface in the FLOW3 package: AbstractView, EmptyView, JsonView and NotFoundView.
Some of them don't implement the interface correctly (assign() should return an instance of $this to allow chaining).
We decided to move the assignment functionality back to the AbstractView.
Obviously the code should still only reference the interfaces.

Besides, the AbstractView needs a cleaned up as it contains a lot of unneeded methods and objects."
9143,TYPO3.Fluid,Feature,"",Resolved,Should have,Backport f:security.ifAuthenticated and f:security.ifHasRole ViewHelpers,Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-08-05,"","",0,2010-08-05 04:42,"","",2595250,"","","f:security.ifAuthenticated and f:security.ifHasRole ViewHelpers should be available in v4 too.

Note: The $role attribute of the ifHasRole ViewHelper could be the fe_group:
<pre>
<f:security.ifHasRole role=""{settings.editorUserGroup}"">
  <f:link action=""edit"" />
</f:security.ifHasRole>
</pre>"
9184,TYPO3.Flow,Bug,"",Resolved,Must have,No NULL safe query method,Christian Lerrahn,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 11,2010-08-18,"","",100,2010-08-06 08:31,"","",1805300,"","","As mentioned in

http://lists.typo3.org/pipermail/flow3-general/2010-May/000367.html

there is no NULL safe query method.

However, it is often required e.g. to find objects that have no parent
or no children which is indicated by a NULL value in the respective
fields."
9210,TYPO3.Fluid,Bug,"",Rejected,Won't have this time,imageViewHelper should not throw exception,Felix Oertel,"",2011-12-14 02:52,ViewHelpers,"",2011-10-15,2011-10-15,"",0,2010-08-09 06:37,"","",2595150,"","","Hey guys,

i don't like the imageViewHelper to throw exceptions if an image is not found. it should behave like the underlying cObj::getImgResource() and just don't do anything.

regards, foertel"
9211,TYPO3.Fluid,Feature,"",Rejected,Should have,Improve ViewHelper exception handling,Bastian Waidelich,"",2011-05-06 04:32,Core,"",2010-08-09,"","",0,2010-08-09 07:17,"","",2595100,"","","Currently, if a ViewHelper throws an exception, we catch that in the corresponding ViewHelperNode and simply output the exception message.
Instead, we should handle the exception depending on the current ""context"".

E.g. if in production mode, the exception should be silently ignored (and maybe logged instead). In development context, the message should be outputtet but probably with some more informations about the current template etc.

Question: in FLOW3/TYPO3 v5 we already have the notion of contexts. In v4 we don't have that yet AFAIK. Instead we could use the ""devIPmask"" setting to switch to development context.. Any ideas?"
9214,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,Closed,Must have,"Improve handling of bound properties in checkbox, radio and select ViewHelpers",Bastian Waidelich,Bastian Waidelich,2012-05-08 12:09,ViewHelpers,"",2010-08-09,"","",0,2010-08-09 08:43,"","",48050,"","","Currently the behavior for form.checkbox, form.radio & form.select ViewHelpers is not clear and leads to errors when bound to objects. See #8854 for example.

We'll have to define, what output is expected in which case to be able to properly refactor these ViewHelpers."
9244,TYPO3.Fluid,Feature,"",Resolved,Should have,Add support for subproperty and __toString() in GroupedForViewHelper,Xavier Perseguers,Jochen Rau,2012-01-29 12:06,ViewHelpers,"",2010-08-11,"","",100,2010-08-11 03:05,"","",2595050,"","","Problem 1:

I have an array of objects and I want to group them by a property being a ValueObject. The VH should ensure __toString() is called on $currentGroupKey if it's an object.


Problem 2:

I have an array of objects and I want to group them by a property of a property. Let's say we have persons that are linked to a company, I want to group them by company.name:

<pre>
<f:groupedFor each=""{persons}"" as=""personsOfCompany"" groupBy=""company.name"" groupKey=""company"">

   ...

</f:groupedFor>
</pre>"
9246,TYPO3.Flow,Feature,"",Resolved,Should have,Implement locale-aware validators,Karol Gusak,Karol Gusak,2010-10-20 05:40,Validation,1.0 alpha 11,"","","",100,2010-08-11 06:54,"","",1805250,"","",Some locale-aware validators for FLOW3 Validation subsystem should be implemented.
9296,TYPO3.Flow,Task,"",Resolved,Should have,Replace $Revision$ keyword in Bootstrap.php,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,"",1.0 alpha 11,2010-08-13,"",1.00,100,2010-08-13 11:25,"","",48350,"","","This is getting hairy with git, and I doubt it would work anyway (as the recorded revision only changes when @Bootstrap.php@ is modified, which might not be the case for every change this safety net should catch)."
9313,TYPO3.Flow,Feature,"",New,Should have,Support for currencies,Karol Gusak,"",2011-12-15 11:44,I18n,"","","","",0,2010-08-15 16:14,"","",1779150,"","","Currencies should probably be handled in a special way in FLOW3. Maybe there should be a @Currency@ class which would store the decimal value and the international currency code?

This would provide a nice way to store and display money amounts."
9327,TYPO3.Flow,Feature,"",Resolved,Should have,Make the resource argument name for REST controllers configurable,Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 11,2010-08-16,"","",100,2010-08-16 08:47,"","",1805200,"","","The (not yet fully functional) RestController automatically selects the appropriate action depending on the request type (GET, PUT, DELETE etc.) and if a resource was specified. By now the controller assumes that the resource for show() etc. is specified by an argument called ""id"". This is, however, old-fashioned, not really DDD compliant and unflexible.

Let's make ""resource"" the default argument name and allow developers to specify a differing name if necessary."
9356,TYPO3.Flow,Feature,"",Resolved,Could have,Implement getAccount() for the Security Context,Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 11,2010-08-18,"","",100,2010-08-18 04:32,"","",1805150,"","",The \F3\FLOW3\Security\Context could provide a convenience method for retrieving the currently logged in account.
9357,TYPO3.Flow,Bug,"",Resolved,Must have,Entry identifier needs to be sanitized in Cache\FileBackend,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 11,2010-08-18,"",1.00,100,2010-08-18 04:37,"","",1805100,"","",Currently the entry identifier is not checked at all in Cache\FileBackend.
9358,TYPO3.Flow,Bug,"",Resolved,Must have,isEmpty() in queries works only when used with logicalNot(),Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 11,2010-08-17,"",6.00,100,2010-08-18 05:01,"","",1805050,"","","When using the isEmpty() constraint against empty collections, this works only when combined with logicalNot(), due to a logical bug in the SQL used underneath."
9360,TYPO3.Flow,Bug,"",Resolved,Should have,ObjectSerializer does not detect recursion in object references,Robert Lemke,Robert Lemke,2010-10-20 05:40,Object,1.0 alpha 11,2010-08-18,"","",100,2010-08-18 07:21,"","",1805000,"","","Given the following object relations:

<pre>

		$objectA = new $className();
		$objectB = new $className();

		$objectA->child = $objectB;
		$objectB->parent = $objectA;
</pre>

On trying to serialize $objectA with serializeObjectAsPropertyArray(), the object serializer will end up in an infinite loop trying to recursively serialize the two objects."
9403,TYPO3.Flow,Bug,"",Closed,Should have,Authentication does not work,Michael Schams,Karsten Dambekalns,2010-10-20 05:40,Security,1.0 alpha 12,2010-09-02,"","",0,2010-08-22 22:26,"","",1807550,"","","After recent changes (and as far as I can see the issue occurs in alpha-11, too), user authentication with Security Framework does not work any more.

Exception #1222204027:
*Authentication failed: ""Could not authenticate any token. Might be missing or wrong credentials or no authentication provider matched.""*

Submitted data (username and password) are correct (see further information about name of input-tag below).
PHP Suhosin is active but configured to accept 128 characters for POST names (these settings worked in the past):

<pre>
suhosin.post.max_name_length = 128
suhosin.request.max_varname_length = 128
</pre>

Fluid template contains the following <input...> tag naming:

*DOES NOT WORK* (as in older FLOW3 version before revision r5005)
@F3\FLOW3\Security\Authentication\Token\UsernamePassword::username@
@F3\FLOW3\Security\Authentication\Token\UsernamePassword::password@

*DOES NOT WORK* (as in FLOW3-1.0.0-alpha11)
@F3.FLOW3.Security.Authentication.Token.UsernamePassword.username@
@F3.FLOW3.Security.Authentication.Token.UsernamePassword.password@

It also does not work if keywords are shortened (this proves that Suhosin or the length is not the issue) as follows.

*DOES NOT WORK* (< 64 characters)
@F3.FLOW3.Security.Authentication.Token.UsernamePassword.user@

(""user"" instead of ""username"" => string length 60 characters)

If I change FLOW3 core file @Packages/Framework/FLOW3/Classes/Security/Authentication/Token/UsernamePassword.php@ as follows (and naming of the input tag in Fluid templates as well) - +it works+:

Method updateCredentials()

<pre>
$username = \F3\FLOW3\Reflection\ObjectAccess::getPropertyPath($postArguments, 'username');
$password = \F3\FLOW3\Reflection\ObjectAccess::getPropertyPath($postArguments, 'password');
</pre>

Possibly a side effect of revision r5005 and/or issue #6315."
9429,TYPO3.Fluid,Feature,"",Closed,Should have,f:render section with arguments,Dieter Müller,Sebastian Kurfuerst,2011-05-06 04:32,View,"",2010-08-24,"","",0,2010-08-24 08:03,"","",2595000,"","","Why only partials can use arguments ?

I want to transfer some arguments to a sections, but i dont want to make every small peace of code a partial file. I think thats a little to much for smaller projects / templates.

Use within section makes it possible to write small ""functions"" in one templatefile."
9434,TYPO3.Fluid,Bug,"",Resolved,Should have,f:if condition does not treat integers right,Thomas Hempel,Sebastian Kurfuerst,2010-10-20 05:44,ViewHelpers,"",2010-08-24,"","",100,2010-08-24 11:10,"","",2594950,"","","if you compare a discrete value with a negativ number it will always return true.

Example:

In the controller:
<pre>
$this->view->assign('value', -1);
</pre>

In the Fluid template:
<pre>
{value}
<f:if condition=""{value} > -1"">
    <f:then>
        is greater than -1
    </f:then>
    <f:else>
        is smaller or even -1
    </f:else>
</f:if>
</pre>

The result is:
<pre>
-1 is greater than -1 
</pre>

Expected result:
<pre>
-1 is smaller or even -1
</pre>"
9436,TYPO3.Flow,Bug,"",Resolved,Should have,Package Manager doesn't check if directory Packages/Application exists,Robert Lemke,Robert Lemke,2010-10-20 05:40,Package,1.0 alpha 12,2010-08-24,"","",100,2010-08-24 11:38,"","",1807500,"","","On trying to create a new package, the package manager might fail because Packages/Application does not exist."
9444,TYPO3.Fluid,Bug,"",Closed,Should have,All Link_ActionViewHelper and Link_PageViewHelper should return no a-tag when linking to a hidden or non-existant page,Christian Zenker,Sebastian Kurfuerst,2010-10-20 05:44,"","",2010-08-25,"","",0,2010-08-25 03:42,"","",2594900,"","","Right now, if the linked-to page is hidden, deleted or has never even existed an <a>-tag with empty href is returned (effectively linking to the current page or the homescreen if baseUrl is used). This behaviour is unexpected and not compliant with the typolink object - so I would consider this a bug.

Patch is appended."
9454,TYPO3.Fluid,Bug,"",Rejected,Won't have this time,If condition in viewhelper attribute,Daniel Lienert,Adrian Föder,2012-11-14 02:51,ViewHelpers,"",2010-08-25,"","",0,2010-08-25 08:18,"","",2594850,"",FLOW3 1.0.0,"It should be possible to set an attribute in a viewhelper by an if condition.

For example i want to set the attribute onchange conditional by an object property: 
<f:form.checkBox name=""name"" value=""value"" additionalAttributes=""{f:if (condition: '{object.submitOnChange}', then: '{onchange : \'submit()\'}')}"" /> 

Fluid throws the exception: #1237900529: The argument ""additionalAttributes"" was registered with type ""array"", but is of type ""string""."
9456,TYPO3.Flow,Feature,"",Resolved,Should have,MVC arguments should be converted to their target type,Robert Lemke,Robert Lemke,2010-10-20 05:40,MVC,1.0 alpha 12,2010-08-25,"","",100,2010-08-25 10:11,"","",1807450,"","","MVC arguments are mapped from the arguments found in the HTTP request (GET / POST ...) to controller argument objects. Because the raw arguments provided by the requests are strings, they currently also end up as strings in the argument objects.

We should instead transform the arguments to their declared type if possible. As we already know the designated data type for each argument (from the annotations and type hints) that should be easily possible."
9457,TYPO3.Flow,Task,"",Rejected,Should have,Refactor type-conversion into ...Utility\TypeHandling,Sebastian Kurfuerst,Karsten Dambekalns,2012-03-14 06:30,"","",2010-08-25,"","",0,2010-08-25 10:59,"","",48800,"","","At some places througout the code, types are converted from String to specific types.
Example:
Classes/MVC/Controller/Argument.php around line 419.
and in Fluid this is done as well."
9502,TYPO3.Flow,Bug,"",Resolved,Should have,After and After Throwing advices intercept exceptions,Robert Lemke,Robert Lemke,2010-10-20 05:40,AOP,1.0 alpha 12,2010-08-30,"","",100,2010-08-30 08:28,"","",1807400,"","","Both, After and After Throwing advice, should be triggered after returning from a method or on an exception thrown by a method respectively. However, they must not intercept neither the return value nor the thrown exception. The latter is the case though.

So, currently, if one does not rethrow the exception in one's advice, the exception is swallowed by the advice. That's problematic when using AfterThrowing for logging an exception (e.g. AccessDeniedException) and forgetting about throwing the exception afterwards."
9504,TYPO3.Flow,Bug,"",Resolved,Must have,Mapping objects with collection properties fails on empty request argument,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Property,1.0 alpha 12,2010-08-30,"",1.00,100,2010-08-30 09:25,"","",1807350,"","","When an object contains a typed (non-literals only) collection property (array or Traversable) the PropertyMapper wants to fill that collection with the relevant objects. Now when a web form was used and there is nothing coming in (e.g. nothing selected in a select form element), this leads to @foreach@ being used on an empty string - which results in an error."
9514,TYPO3.Fluid,Feature,"",New,Should have,Support explicit Array Arguments for ViewHelpers,Sebastian Kurfuerst,"",2011-05-06 05:03,"","",2010-08-30,"","",0,2010-08-30 13:01,"","",2594800,"","","We have been brainstorming over some additions to fluid syntax.

* Imagine you have a ViewHelper with the following Render Method signature:
<code>function render(array $bla)</code>
* then it would be very nice if one could write the following:
<code><f:xy arr.someArrayKey=""foo"" /> // ""foo"" is not validated, as we do not have any more type information.</code>
* Additionally, one could override specific key/value pairs of array arguments:
<code><f:xy arr=""{myArray}"" arr.someArrayKey=""foo"" /> // ""foo"" is merged into {myArray}</code>

Additionally, one could register specific array keys, and validate them. Imagine the following argument registration:
<code>$this->registerArgument('foo.bar', 'boolean', REQUIRED=TRUE);</code>

* Now, it is validated that foo.bar is a boolean value, which exists; so you would know that $this->arguments['foo']['bar'] is really a boolean and it is set.

h2. What needs to be changed internally:

h3. On compile time: 

* TemplateParser->abortIfUnregisteredArgumentsExist($expectedViewHelperArguments, $argumentsObjectTree);
** if Argument name is ""bla.blubb"", check that either the argument ""bla.blubb"" or the argument ""bla"" has been explicitely registered (and ""bla"" is an array)
* TemplateParser->abortIfRequiredArgumentsAreMissing($expectedViewHelperArguments, $argumentsObjectTree);
** do not abort if ""bla.blubb"" is not registered, but ""bla"" is.

h3. On run-time: Type checking

* change validateArguments in AbstractVH
*# MERGING von ""arr.abcde"" und ""arr"" (Punkt-Syntax überschreibt)
*# VALIDIERUNG (von _allen_ regeln) -> d.h. wenn es eine Regel ""arr.abcde"" gibt, dann wird geschaut ob es diesen Array Key gibt

h2. Examples of possible usage

<f:widget.paginate objects=""{posts}"" configuration.position=""top"" configuration.itemsPerPage=""3"" configuration.linkCurrent=""false"" /> <==>
<f:widget.paginate  objects=""{posts}"" configuration=""{position: 'top', itemsPerPage: 3, linkCurrent: 'false'}"" />

h2. Shorthand Sxntax

Will work like the explicit syntax:
<code>{f:widget.paginate(objects: posts, configuration.position: 'top')}</code>

However, for Arrays, this is NOT ALLOWED:
{foo: {bar: '123'}} == {foo.bar: '123', foo: {bar: '123'}} <== this should be forbidden!

"
9515,TYPO3.Fluid,Bug,"",Resolved,Must have,"form ViewHelper does not render hidden identity field when using ""objectName"" argument",Bastian Waidelich,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-08-30,"","",100,2010-08-30 14:31,"","",2594750,"","","With resolving #6521 you can use the ""objectName"" argument to specify the name of a bound object rather then using the ""name"" attribute.
But if you do so, the rendered hidden identity field is not correct anymore"
9528,TYPO3.Flow,Feature,"",Resolved,Should have,Log remote IP address,Robert Lemke,Robert Lemke,2010-10-20 05:40,Log,1.0 alpha 12,2010-08-31,"","",100,2010-08-31 04:14,"","",1807300,"","","For certain kinds of logs and in certain situations it is helpful to log the remote address of the client using FLOW3.

The AbstractBackend could support an option ""logIpAddress"" which would be enabled or disabled through the logging backend options."
9532,TYPO3.Flow,Bug,"",Resolved,Must have,FLOW3 looses session data / tokens if scope session is used elsewhere,Robert Lemke,Robert Lemke,2010-10-20 05:40,Session,1.0 alpha 12,2010-08-31,"","",100,2010-08-31 05:26,"","",1807250,"","","In the TYPO3 package I started implementing a TYPO3-specific session class:

<pre>
/**
 * A TYPO3 Session
 *
 * @license http://www.gnu.org/licenses/gpl.html GNU General Public License, version 3 or later
 * @scope session
 */
class Session {

	/**
	 * @var \F3\PHPCR\SessionInterface
	 */
	protected $contentRepositorySession;

	/**
	 * Constructs the TYPO3 Session.
	 *
	 * This logs in at the Content Repository with the currently logged in
	 * TYPO3 user and attaches the CR's session to this TYPO3 session.
	 *
	 * @param \F3\PHPCR\RepositoryInterface $contentRepository
	 * @param \F3\FLOW3\Security\Context $securityContext
	 * @author Robert Lemke <robert@typo3.org>
	 */
	public function __construct(\F3\PHPCR\RepositoryInterface $contentRepository, \F3\FLOW3\Security\Context $securityContext) {
		$account = $securityContext->getAccount();
		$workspaceName = ($account !== NULL) ? 'user-' . $account->getAccountIdentifier() : 'live';
		$this->contentRepositorySession = $contentRepository->login(NULL, $workspaceName);
	}

	/**
	 * Returns the current content repository session, if any
	 *
	 * @return \F3\PHPCR\SessionInterface
	 * @author Robert Lemke <robert@typo3.org>
	 */
	public function getContentRepositorySession() {
	 return $this->contentRepositorySession;
	}
}
</pre>

So, essentially TYPO3 Session objects contain a reference to a CR session (which is of scope prototype) and some other objects attached to that session.

Now, when I login to the TYPO3 backend and then afterwards call a controller (in this case a Node service controller) which accesses this TYPO3 session, I loose the UsernamePassword token and therefore need to authenticate again. When I disable the @scope session of the TYPO3 Session class, I don't have to re-authenticate."
9534,TYPO3.Flow,Feature,"",Rejected,Could have,RAND as order posibility,Julian Kleinhans,"",2011-10-13 09:24,Persistence,"","","","",0,2010-08-31 06:01,"","",1779100,"","","It would be cool to have a possibilty to get randomize data.. for example

<pre>
$query = $this->createQuery();
return $query->matching($query->equals('X', $x))
             ->setOrderings(array('date' => \F3\FLOW3\Persistence\QueryInterface::ORDER_RAND))
             ->setLimit($limit)
             ->execute();
</pre>

or 

<pre>
$query = $this->createQuery();
return $query->matching($query->equals('X', $x))
             ->randomizeResult()
             ->setLimit($limit)
             ->execute();
</pre>

actually you cant randomize BEVORE the query executes, so you cant set a limit, must select all results and randomize per plain php code.. "
9536,TYPO3.Flow,Feature,"",Resolved,Should have,Improve logging of security related events,Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 12,2010-08-31,"","",100,2010-08-31 06:58,"","",1807200,"","","Security related actions and events should be logged into its own file / backend because

# they log data might be sensitive
# important information might drown in the amount of other messages

Additionally I'd like to see some hint if a user logged in or was re-authenticated due to an active token found in the session."
9537,TYPO3.Flow,Feature,"",New,Should have,Query criterions should be able to compare whole objects,Bastian Waidelich,"",2011-10-04 12:42,Persistence,"",2010-08-31,"","",0,2010-08-31 07:34,"","",1779050,"","","Currently it is not possible to exclude specific objects from a resultset by using query criterions.

Possible syntaxes:
<pre>
Query::equals(SELF, $object)
Query::equals($object)
Query::is($object)
Query::contains($object)
...
</pre>"
9538,TYPO3.Flow,Bug,"",Resolved,Should have,APC Backend test fails (flushRemovesAllCacheEntries),Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Cache,1.0 alpha 12,2010-08-31,"","",100,2010-08-31 09:14,"","",1807150,"","","On my machine the following test fails:

<pre>
Failure in flushRemovesAllCacheEntries
ApcBackendTest.php:210
BackendAPCTest1 Failed asserting that <boolean:true> is false.
</pre>
"
9539,TYPO3.Flow,Bug,"",Resolved,Must have,WebRedirect entry point does not work anymore,Robert Lemke,Robert Lemke,2010-10-20 05:40,Security,1.0 alpha 12,2010-08-31,"","",100,2010-08-31 09:49,"","",1807100,"","","Since the changed behavior of AfterThrowing advices, the RequestDispatchingAspect does not catch AuthenticationRequired exceptions anymore. Therefore the security framework does not forward to the authentication entry point - or more clearly: On hitting http://host/typo3 you'll see an exception instead of the login screen.
"
9540,TYPO3.Flow,Bug,"",Resolved,Must have,Ordering of result sets does not work,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-08-31,"",2.00,100,2010-08-31 09:57,"","",1807050,"","","Ordering doesn't work. No errors appear, but results are in seemingly random order."
9547,TYPO3.Flow,Feature,"",Rejected,Must have,Reactivate HMAC or implement substitute,Bastian Waidelich,"",2011-01-07 05:10,Security,"",2010-09-01,"","",0,2010-09-01 05:50,"","",1779000,"","","Currently Fluid Forms still create a hidden ""__hmac"" field, but apparently that is no longer validated on the server side.
IMO we need this request hash validation to prevent CSRF (http://en.wikipedia.org/wiki/Cross-site_request_forgery) attacks.
A possible alternative solution might be to store the form fields in a request stack (#3620)"
9557,TYPO3.Flow,Bug,"",Rejected,Should have,It's possible to persist multiple entities with the same identity properties,Bastian Waidelich,Christian Müller,2012-03-14 10:19,Persistence,"",2010-09-01,"","",0,2010-09-01 13:27,"","",1809050,"",FLOW3 1.0.0,"I annotated the ""email"" property of my test model with an @identity annotation. Now I would expect the persistence layer to prevent me from storing multiple instances with the same email in a repository.
But that's not the case. Is that a (missing) feature or a bug?"
9568,TYPO3.Flow,Task,"",Resolved,Should have,Improve speed of AOP proxy building / reflection,Robert Lemke,Robert Lemke,2012-03-15 21:41,"",1.1,2010-09-02,"","",100,2010-09-02 11:24,"","",49100,"","","The process of AOP proxy building and the extensive use of relfection has slowed down FLOW3 immensely, especially in Development context.

There are several possible measures to make it faster again - on the one hand in the proxy building mechanism itself, but also in the ReflectionService.

The initialization of the AOP framework currently takes 96% of the overall script execution time (ie. 11,0145364 seconds in my test case).

We should bring this below 2 seconds for the following scenario:

  - TYPO3 base distribution
  - one change in a single class (e.g. a controller)
  - next hit should be below 2 secs."
9569,TYPO3.Flow,Bug,"",Resolved,Should have,RestController handles HEAD requests incorrectly,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,MVC,1.0 alpha 12,2010-09-02,"",1.00,100,2010-09-02 12:04,"","",1807000,"","","HEAD requests are not mapped to show/list like GET, but end up targeting the indexAction."
9585,TYPO3.Flow,Bug,"",Resolved,Should have,PDOException thrown if array contains NULL as value,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-09-03,"","",100,2010-09-03 10:21,"","",1806950,"","","<pre>
SQLSTATE[HY000]: General error: 1 table properties_data has no column named null
10 PDO::prepare(""INSERT INTO &quot;properties_data&quot; (&quot;parent&quot;, &quot;name&quot;, &quot;index&quot;, &quot;type&quot;, &quot;null&quot;) VALUES (?, ?, ?, ?, ?)"")
9 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::storePropertyData(""bc924de7-72e7-420e-9019-96fda74d1c4a"", ""contentObject"", array)
8 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::setProperties(array, 1)
7 F3\FLOW3\Persistence\Backend\GenericPdo\Backend::persistObject(F3\TYPO3CR\Domain\Model\Node_AOPProxy_Development)
6 F3\FLOW3\Persistence\Backend\AbstractBackend::persistObjects()
</pre>

This happens if you try to persist an array as follows:

<pre>
   protected $myVar = array(0 => NULL);
</pre>"
9586,TYPO3.Flow,Feature,"",Resolved,Should have,"Support @var/@param type ""object""",Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-09-03,"","",100,2010-09-03 10:24,"","",1806900,"","","Currently ""object"" is not supported as param type:

<pre>
class MyClass {

   /**
    * @var object
    */
   protected $myVar;

}
</pre>

results in exception:

<pre>
#1264093630: Invalid type encountered: 'object' 
</pre>"
9587,TYPO3.Flow,Bug,"",Rejected,Should have,ArrayObject cannot be persisted as part of an array,Robert Lemke,"",2012-03-14 07:32,Persistence,"",2010-09-03,"","",0,2010-09-03 10:31,"","",1778950,"",FLOW3 1.0.0,"I tried to persist this:

<pre>
   /**
    * @var array
    */
   protected $myVar = array();
</pre>

resulting in this error:

<pre>
Fatal error: Call to undefined method ArrayObject::FLOW3_AOP_Proxy_getProxyTargetClassName() in /opt/local/apache2/htdocs/Development/TYPO3v5/Distributions/Base/Packages/Framework/FLOW3/Classes/Persistence/Backend/GenericPdo/Backend.php on line 236
</pre>"
9625,TYPO3.Flow,Task,"",Resolved,Must have,Remove references of ObjectFactory,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 12,2010-09-07,"","",100,2010-09-07 06:28,"","",49600,"","",The ObjectFactory (F3\FLOW3\Object\ObjectFactory) and its interface are deprecated since alpha 8. Therefore: Remove the factory and all its reference for the next release.
9626,TYPO3.Flow,Feature,"",Resolved,Should have,Switch off autowiring for single methods via @autowiring annotation,Robert Lemke,Robert Lemke,2010-10-20 05:40,Object,1.0 alpha 12,2010-09-07,"","",100,2010-09-07 06:38,"","",1806850,"","","It would be nice to be able to switch off autowiring for certain (inject) methods and the constructor by adding an ""@autowiring off"" annotation to the respective method:

<pre>
/**
 * @param Foo $foo
 * @autowiring off
 */
public function injectFoo(Foo $foo) {
   ...
}
</pre>

It should also be possible to switch off autowiring completely for the whole class by means of an @autowiring off annotation (currently that's only possible through some configuration in the Objects.yaml)."
9627,TYPO3.Fluid,Bug,"",Resolved,Should have,Two test failures in Tx_Fluid_ViewHelpers_Persistence_IdentityViewHelperTest,Oliver Klee,"",2011-05-06 04:33,ViewHelpers,"",2010-09-07,"","",0,2010-09-07 06:41,"","",2594700,"","","Tx_Fluid_ViewHelpers_Persistence_IdentityViewHelperTest

renderGetsIdentityForObjectFromPersistenceManager
! Error in test case renderGetsIdentityForObjectFromPersistenceManager
in file /home/klee/eclipse/typo3_src/typo3/sysext/extbase/Tests/BaseTestCase.php
on line 96:
Message:
Class Tx_Fluid_ViewHelpers_Persistence_IdentityViewHelper does not exist

renderOutputsEmptyStringForNullIdentity
! Error in test case renderOutputsEmptyStringForNullIdentity
in file /home/klee/eclipse/typo3_src/typo3/sysext/extbase/Tests/BaseTestCase.php
on line 96:
Message:
Class Tx_Fluid_ViewHelpers_Persistence_IdentityViewHelper does not exist

I'm using the Fluid version from the TYPO3 V4 Core trunk."
9679,TYPO3.Flow,Bug,"",Resolved,Should have,PdoHelper fails if username / password are NULL,Robert Lemke,Robert Lemke,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-09-10,"","",100,2010-09-10 06:46,"","",1806800,"","","By default the username and password passed to the PDO backend are NULL because SQLite does not need a username / password in our case.

The recent refactoring in the static object container now detects that NULL is passed to the PDO backend but a string is expected:

<pre>
#1283859777: Tried to create instance of class F3\FLOW3\Utility\PdoHelper without passing constructor argument $user in Packages/Framework/FLOW3/Classes/Persistence/Backend/GenericPdo/Backend.php line 122
</pre>

This error is triggered when no Objects.db exists and the backend tries to create one.
"
9684,TYPO3.Flow,Bug,"",Resolved,Should have,Datamapper fails to thaw reused objects if in certain order,Robert Lemke,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,2010-09-10,"","",100,2010-09-10 12:40,"","",1806750,"","","Consider the following properties of an entity:

<pre>
	/**
	 * Paths of this workspace, indexed by nodes
	 *
	 * @var \SplObjectStorage
	 */
	protected $nodesAndPaths;

	/**
	 * Nodes of this workspace, indexed by their absolute path
	 *
	 * @var array<\F3\TYPO3CR\Domain\Model\Node>
	 */
	protected $pathsAndNodes = array();
</pre>

If I put a Node object into both containers at the same time, it works if the properties are defined in the above order but it does not if they are defined the other way around."
9707,TYPO3.Flow,Bug,"",Resolved,Must have,Switching autowiring off breaks production context,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Object,1.0 alpha 12,2010-09-13,"","",100,2010-09-13 09:31,"","",1806700,"","","Phoenix exhibits a bug introduced with https://review.typo3.org/57 in commit:e8e03d9f that leads to an UnresolvedDependencyInjection on all but the first requests:
@Uncaught exception #1283859777. Tried to create instance of class F3\FLOW3\Cache\CacheFactory without passing constructor argument $objectManager in  Packages/Framework/FLOW3/Classes/Core/Bootstrap.php line 367. in line 1294 of .../StaticObjectContainer.php.@
"
9709,TYPO3.Flow,Feature,"",Resolved,Should have,Allow ordering to be customizable (more easily) in repositories,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,"","","",100,2010-09-13 12:15,"","",1806650,"","","When using findAll() or findBy*() the order of the result cannot be customized without writing your own methods to inject the ordering.

It should be possible to define the (default) ordering to be used in your repository subclass by some easy way."
9710,TYPO3.Flow,Task,"",Resolved,Must have,Refactor QueryResultProxy behaviour,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Persistence,1.0 alpha 12,"","","",100,2010-09-13 12:20,"","",50000,"","","The following seems reasonable:
* rename @QueryResultProxy@ to @QueryResult@
* get rid of @FETCH_*@ and have @execut()@e always return @QueryResult@
* add @QueryResult->getFirst()@ (or similar) to replicate FETCH_OBJECT
* add @toArray()@ (or similar) to @QueryResult@ to ease @iterator_to_array()@ hassle

Hint: inject @DataMapper@ and @PersistenceManager@ to @QueryResult@ to get actual data there instead of through no-loger-existing-FETCH_ARRAY..."
9768,TYPO3.Fluid,Feature,"",Closed,Should have,Idea: Connector to use fluid templates for ###MARKER### based extensions,Jonas Felix,"",2011-05-06 04:33,"","",2010-09-16,"","",0,2010-09-16 09:43,"","",2594650,"","","Imagine:
1.) You install an oldschool extension as comments
2.) You insert the plugin and use the extension as you did it always
3.) You create your own template for the extension with fluid and not with the oldschool .html ###MARKER_BASED###
4.) The TYPO3 built in ###TEMPLATE-CLASS### recognizes the fluid template and instead of replacing markers it collects the marker and suppart data to assign it to the template:
- You get all supparts as an array containing the markers of that supparts as an array
- You get the markers as an array
- You can use them and list them within your fluid extensions
5.) You don't have to change a single line within the comments pi1 php code

How:
- makeitfluid extension xclasses the TYPO3 Template classes, checks if it is fluid or HTML and just uses the regular templating if it's HTML
- it just tries to collect the data and parse the template as fluid if it is fluid :-)
- the extension would need some very special index to remember which subparts and markers belong to which fluid template, and it will be quite difficult to asure that the extension gets the correct HTML code in every constellation
- the makeitfluid extension does everything in the background so no extension has to be changed at all, also fluid or the core don't need any changes :-P

Why:
- Fluid puts the need to change PHP aside in moste cases!
- If you have a fluid template you can perfectly customize and exten existing extensions without any modfication to it selfe.
- You could easily load the commerce module to show a product within an mm_forum post wihtout change the PHP code of one of those extensions!!!
- A lot of oldschool extensions are great, but their templating sucks....

This is of course not something to be put directly into the FLUID extension, but it's a connector extension and maybe you are interessted in such a solution..."
9805,TYPO3.Fluid,Bug,"",Rejected,Must have,"Code mismatch in ""FormViewHelper.php""?!",Gabriel Kaufmann,"",2011-05-06 03:59,ViewHelpers,"",2010-09-17,"","",0,2010-09-17 12:18,"","",2594600,"","","Hello,

I just found this code, after trying to figure out the PHP-Error
<pre>
Fatal error: Call to a member function reset() on a non-object in /[..]/typo3_src-4.4.2/typo3/sysext/fluid/Classes/ViewHelpers/FormViewHelper.php on line 167
</pre> 

<pre>
Looking into that file there is the following code:
00165                            $uriBuilder = $this->controllerContext->getUriBuilder();
00166                            $formActionUri = $uriBuilder
00167                                     ->reset()
00168                                     ->setTargetPageUid($this->arguments['pageUid'])
00169                                     ->setTargetPageType($this->arguments['pageType'])
</pre>


Please note the missing variables in front of the class-functions ""->"" and the missing semicolon. I don't think this can be right - or I missed a change in the PHP-core allowing such things.

The problem appears after trying to use the ""<f:form>[..]<f:/form>"" tag in a fluid-template. Without using this tags, the template works just fine. So i think this is a bug.
"
9855,TYPO3.Flow,Bug,"",Resolved,Should have,Recursive validators cannot be built due to endless recursion,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 12,2010-09-20,"","",100,2010-09-20 17:47,"","",1806600,"","","When the ValidatorResolver tries to build a baseValidatorConjunction for a class that has a reference to itself, endless recursion is the result."
9861,TYPO3.Flow,Feature,"",Needs Feedback,Should have,Leave logging up and running as long as possible,Karsten Dambekalns,"",2012-03-15 05:53,Log,"","","","",0,2010-09-21 09:38,"","",1778900,"","","Currently the shutdown phase can/does shut down logging before the request run ends, thus leaving some messages out of the log."
9862,TYPO3.Flow,Bug,"",Resolved,Must have,Base validators are built incorrectly,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 12,2010-09-21,"","",100,2010-09-21 10:38,"","",1806550,"","","When a base validator is built, any property that
* has a @validate annotations
* or holds a class for which a base validator exists
gets a validator attached. Then any custom validator for a class is added.

Currently this is not working as expected. Consider this example:
<pre>
class Node {

	/**
	 * Workspace this node is contained in
	 *
	 * @var \F3\TYPO3CR\Domain\Model\Workspace
	 */
	protected $workspace;

	/**
	 * Identifier of this node which is unique within its workspace
	 *
	 * @var string
	 * @validate uuid
	 */
	protected $identifier;
</pre>

This will check the $identifier to be an UUID and it will also check validity on $workspace (if the validator for that is not NULL). But if the uuid validation annotation is removed the $workspace property will no longer be validated as well."
9874,TYPO3.Flow,Bug,"",Resolved,Must have,Recursive validators cannot be used (endless recursion),Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Validation,1.0 alpha 12,2010-09-22,"","",100,2010-09-22 03:25,"","",1806500,"","",A validator that is checking recursive structures ends up in an endless loop when being used.
9901,TYPO3.Flow,Bug,"",Resolved,Must have,"Respect ""toLowerCase"" setting in SubRoutes",Bastian Waidelich,Bastian Waidelich,2010-10-20 05:40,MVC - Routing,1.0 alpha 12,2010-09-24,"","",100,2010-09-24 04:03,"","",1806450,"","","You can force a route to be all lowercase like this:
<pre>
-
  uriPattern: 'foo'
  toLowerCase: yes
</pre>
But currently this setting is not merged into the SubRoutesConfiguration."
9950,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,New,Should have,Binding to nested arrays impossible for form-elements,Christian Opitz,"",2011-10-19 19:48,ViewHelpers,"",2010-09-27,"","",0,2010-09-27 17:57,"","",51800,"","","I want to bind my form to an array with variable nested arrays. I already extended form and set the formName to ---ignore--- to trigger the objectAccessor-Mode - works so far. Now all names are generated perfectly but there is a useless check in getPropertyValue() that makes it impossible to get a value of sth. like
<pre>
<fh:form object=""{gp}"" fieldNamePrefix=""gp"">
    <f:textfield property=""bla.blubb""/>
</form>
<!-- Which renders to: -->
<form...>
    <input type=""text"" name=""gp[bla][blub]""/>
</form>
</pre>

The value can not be detected because there is a check for array in ""AbstractFormFieldViewHelper"":http://forge.typo3.org/projects/package-fluid/repository/revisions/master/entry/Classes/ViewHelpers/Form/AbstractFormFieldViewHelper.php#L152 on line 152.

As far as i can see this check is useless as the Tx_Extbase_Reflection_ObjectAccess::getPropertyPath($formObject, $propertyName); can handle arrays too. So i would be very happy, if you could remove it :)
"
9954,TYPO3.Flow,Bug,"",Resolved,Should have,Wrong path for created package used,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,Package,1.0 alpha 12,2010-09-28,"",1.00,100,2010-09-28 01:48,"","",1806400,"","","<pre>
karsten@kmac:flow3  (master)$ ./flow3 kickstart package Blog
+ .../Packages/ApplicationBlog/Classes/Controller/StandardController.php
+ ...mplates/Standard/Index.html

karsten@kmac:flow3  (master)$ ls -d Packages/*
Packages/Application		Packages/ApplicationBlog	Packages/Framework
</pre>"
9956,TYPO3.Fluid,Feature,"",Rejected,Could have,Allow updating of view-variables,Robert Vock,"",2011-05-06 04:00,ViewHelpers,"",2010-09-28,"","",0,2010-09-28 03:16,"","",2594500,"","","It would be nice, if it is possible to update variables within views.

Working with the AliasViewHelper, I got an error ""Duplicate variable declarations"", because I was using the same name.

But when I want to output a tree and render a section recursively, it would be nice to update variables.

For example code like this could work:
<pre>
<f:section name=""tree"">
  <ul>
    <f:for each=""{entries}"" as=""entry"">
    <li>
      {entry.name}
      <f:if condition=""{entry.hasChildren}"">
        <f:then>
          <f:alias map=""{entries: entry.getChildren}"">
            <f:render section=""tree"" />
          </f:alias>
        </f:then>
      </f:if>
    </li>
    </f:for>
  </ul>
</f:section>
</pre>"
9967,TYPO3.Flow,Bug,"",Resolved,Should have,PerstenceQueryRewriting fails if there is an policy entry that does not result in rewriting constraints,Andreas Förthner,Andreas Förthner,2010-10-20 05:40,Security,1.0 alpha 12,2010-09-28,"","",100,2010-09-28 10:11,"","",1806350,"","",""
9968,TYPO3.Flow,Feature,"",New,Should have,Promote security publishing configuration automatically when persisting models,Andreas Förthner,Andreas Förthner,2013-12-09 16:03,Security,"",2010-09-28,"","",0,2010-09-28 11:11,"","",1778850,"","","When we persist a model that holds a file, we should be able to configure its needed publishing configuration in the policy. The can be done on the basis of securit resource, as shown in the following example:

<pre>
SecurityPublishingConfiguration:
  F3_Blog_Domain_Model_Post_HiddenPosts:
    fileProperty: image
    publishingConfiguration:
      roles: [ Editor, Administrator ]
      expireDate: 2h
</pre>

This would add a publishing configuration with roles and an expire date to all file objects that are attached to posts that match the F3_Blog_Domain_Model_Post_HiddenPosts security resource (entity resource identifier). "
10136,TYPO3.Flow,Bug,"",Resolved,Must have,Localisation class possibly not properly initialised,Christian Lerrahn,Karsten Dambekalns,2010-10-20 05:40,I18n,1.0 alpha 13,2010-10-07,"","",100,2010-10-06 20:52,"","",1808300,"","","The context this bug occurs in is one of a manually validated object. The code is

@$validator = $this->validatorResolver->getBaseValidatorConjunction('F3\Package\Domain\Model\Asset');
if ($validator->isValid($currentAsset)) {...@

This results in an exception
@#1: Catchable Fatal Error: Argument 2 passed to F3\FLOW3\I18n\Parser\NumberParser::parseDecimalNumber() must be an instance of F3\FLOW3\I18n\Locale, null given,...@

If I'm not mistaken the class is never properly initialised. The initialize() method is supposed to create the object which is NULL here but fails to do so.
"
10180,TYPO3.Flow,Bug,"",Resolved,Should have,Text of exception in StringCache,Steffen Kamper,Karsten Dambekalns,2010-11-08 05:30,Cache,1.0 alpha 13,2010-10-10,"","",100,2010-10-10 06:30,"","",1808250,"","","to be synced it would be nice if you change the text in flow3 too.

In v4 we changed the exception message from

'Only strings can be digested by the StringCache. Thanks.'

to

'Given data is of type ""' . gettype($string) . '"", but a string is expected for string cache.'

"
10181,TYPO3.Flow,Bug,"",Resolved,Should have,"""Source"" at the end of a paragraph saying nothing",Tim Eilers,Karsten Dambekalns,2010-10-20 05:40,- Documentation -,1.0 alpha 13,2010-10-10,"","",100,2010-10-10 09:17,"","",1808200,"","","In the documentation of the coding guidelines (AppendixCodingGuidelines.xml) there is the word ""Source"" standing at the end of a paragraph, which is a kind of senseless, at least to me:

<pre>
        <para>As a special exception you may use variable names like
        <varname>$i</varname>, <varname>$j</varname> and <varname>$k</varname>
        for numeric indexes in <function>for</function> loops if it's clear
        what they mean on the first sight. But even then you should want to
        avoid them... Source</para>
</pre>"
10185,TYPO3.Flow,Bug,"",Resolved,Should have,Wrong rule in Coding Guidelines for file naming,Tim Eilers,Karsten Dambekalns,2010-10-20 05:40,- Documentation -,1.0 alpha 13,2010-10-10,"","",100,2010-10-10 14:11,"","",1808150,"","","Either this is a special exception or simply wrong:

<pre>
                <listitem>
                  <para><filename>FLOW3/Package/Manager.php</filename></para>
                  <para>Contains the class
                  <classname>\F3\FLOW3\Package\PackageManager</classname>
                  which is part of the package
                  <package>\F3\FLOW3</package></para>
                </listitem>
</pre>

Shouldn't the filename be ""PackageManager.php"" or the class name ""\F3\FLOW3\Package\Manager""?"
10205,TYPO3.Flow,Bug,"",Resolved,Must have,Object initialization is misused in I18n,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,I18n,1.0 alpha 13,2010-10-11,"",2.00,100,2010-10-11 17:14,"","",1808100,"","","initializeObject() takes no parameters (other than the initialization cause), thus I18n cannot work."
10206,TYPO3.Flow,Bug,"",Resolved,Must have,Cache handling is broken in I18n,Karsten Dambekalns,Karsten Dambekalns,2010-10-20 05:40,I18n,1.0 alpha 13,2010-10-11,"",2.00,100,2010-10-11 17:15,"","",1808050,"","",Cache identifiers used (XML file names) are illegal and caching is spread over too many classes without real need. Configuration can be improved by better naming (and possibly cache sharing).
10251,TYPO3.Fluid,Bug,"",Resolved,Should have,Image ViewHelper does not call parent::__construct,Michael Knoll,Bastian Waidelich,2010-10-20 05:44,ViewHelpers,"",2010-10-14,"","",100,2010-10-14 06:29,"","",2594400,"","","Image Viewhelper does not call parent::__construct() and hence no additionalAttributes can be assigned to viewhelper.

Version is 1.3.0alpha2"
10312,TYPO3.Flow,Feature,"",Rejected,Should have,Autogenerate setters and getters,Falk Kühnel,"",2012-03-12 13:28,"","",2010-10-18,"","",0,2010-10-18 05:24,"","",1778800,"","","I like the synthesize functionality from objective-c to autogenerate setters and getters for properties.

Would you think it useful to have such a feature for properties in FLOW3? I would like to simply add a @synthesize comment to autogenerate setters and getters in the proxy class. No functions will be generated if the corresponding function already exists.

I personally would love that feature and it would help to have a much less cluttered code."
10316,TYPO3.Flow,Task,"",Resolved,Should have,Check CldrModelCollection::getRawArray() for correct behaviour,Karsten Dambekalns,Karol Gusak,2010-10-29 04:00,I18n,1.0 alpha 13,"","","",100,2010-10-18 11:02,"","",55300,"","","The CldrModelCollection::getRawArray() method is supposed to always return an array, but sometimes the given path leads to a literal value. http://review.typo3.org/175 adds some fix for this to avoid an error in those cases, but this needs to be check in detail."
10341,TYPO3.Flow,Bug,"",Resolved,Should have,DateTime properties cannot be persisted,Robert Lemke,Robert Lemke,2010-10-25 10:00,Object,1.0 alpha 13,2010-10-19,"","",100,2010-10-19 09:22,"","",1808000,"","","Using the Blog application with FLOW3 1.0.0 alpha 12 results in an exception when trying to create a new blog post:

<pre>
#1265367590: Object ""DateTime"" is not registered. (More information)

F3\FLOW3\Object\Exception\UnknownObjectException thrown in file
Packages/Framework/FLOW3/Classes/Object/Container/AbstractObjectContainer.php in line 267.
</pre>

The reason for this is that the validation framework tries to figure out if DateTime has the scope prototype (because it wouldn't create a validator for it otherwise). However, DateTime is not a registered object at the Object Manager. The check for prototype was introduced while solving #9862.

The solution is to pre-register (certain) built-in PHP classes, such as DateTime. I'm not sure at this point for which other classes it would make sense, therefore this is just about fixing the DateTime behavior."
10343,TYPO3.Flow,Task,"",Resolved,Should have,Sync rounding default value from NumbersParser to NumbersReader,Karsten Dambekalns,Karsten Dambekalns,2010-10-26 04:30,I18n,1.0 alpha 13,2010-10-19,"","",100,2010-10-19 15:37,"","",55600,"","","The default rounding changed from 0 to 0.0 in NumberParser, it should probably also be changed in NumbersReader (in the default number formatting array structure)."
10360,TYPO3.Flow,Feature,"",Resolved,Should have,Make option handling in persistence backends more flexible,Karsten Dambekalns,Karsten Dambekalns,2010-10-25 11:45,Persistence,1.0 alpha 13,2010-10-21,"",1.00,100,2010-10-21 02:09,"","",1807950,"","","I would not skip NULL values in all cases, but only of no setter exists. That way you can set existing settings to NULL. For non-existant setters a warning could be logged (at least in dev context), so you have a chance to notice errors."
10401,TYPO3.Fluid,Bug,"",Resolved,Should have,f:link.external viewHelper should prepend http:// when needed,Christine Gerpheide,Bastian Waidelich,2011-08-04 02:12,ViewHelpers,1.0 beta 1,2010-10-22,"","",100,2010-10-22 12:09,"","",2594350,"","","The link.external viewhelper should add http:// if there is no other protocol present in the URI provided.

Currently, if you add a link like:
<f:link.external uri=""www.google.com"">...</f:link.external>

It will render as:
<a href=""http://mytypo3site.com/www.google.com"">...</a>

Which is obviously not correct as this is an external link.  For such links, http:// should be prepended to the URL when using this viewHelper."
10427,TYPO3.Flow,Feature,"",Resolved,Should have,Support inter-type properties for entites,Martin Eisengardt,"",2012-03-12 13:34,AOP,"","","","",0,2010-10-25 06:44,"","",1778750,"","","AspectJ defines inter-type properties. Flow3 is not using the syntax right now.

*Reason why we need this feature:*
Let us say you want to develop a module that lets you vote on several entites. You do not want to let the module know which types of entities you are voting on. Instead use aspects to extend the entites. First of all each entity will implement a ""Votable"" interface. That is already possible. The second task is to introduce variables in form of a simple counter ""good/bad"". Now you got a problem because currently the persistence framework asks the class service for the class scheme. They will never see those new variables and will never make them persistent.

There will be other use cases where you need to introduce persistent variables into entites. However non-persistent variables are already supported through AOP_Proxy::getProperty/setProperty.

*AspectJ*
Taken from http://www.eclipse.org/aspectj/doc/released/progguide/starting-aspectj.html#inter-type-declarations
<pre>aspect PointObserving {
    private Vector Point.observers = new Vector();
    ...
}</pre>

That example would be translated in PHP/FLOW3 to:
<pre>/**
 * @aspect
 */
class MyAspect {

    private Point::$observers;

}</pre>

Thats not clever because this syntax causes compile errors in php.

*Possible syntax*

<pre>/**
 * @aspect
 */
class MyAspect {

    /**
     * @intertype class(Point), private
     * @var array
     */
    protected $MyAspect_Observers;

}</pre>

The ""intertype"" tag followed by the full qualified target class name (or a pattern) and optional an access level (private/protected/public) will cause the aop framework to add this variable declaration tro the target class. If an interface is specified the variable will be added to each class implementing the interface. It should be possible to use introduces as well. The following aspect whould add the variable $observers to class FooClass:

<pre>/**
 * @aspect
 */
class MyAspect {

    /**
     * @introduces FooInterface, class(FooClass)
     */
    protected $fooInterface;

    /**
     * @intertype class(FooInterface), private
     * @var array
     */
    protected $$MyAspect_Observers;

}</pre>

*Possible problems:*

The above syntax is compatible to php but it may be misleading. Implementors or aspects may expect that ""$this->MyAspect_Observers"" is working. That will not be true. As before you need to access the intertype variable through:
<pre>$joinPoint->getProxy()->FLOW3_AOP_Proxy_getProperty
$joinPoint->getProxy()->FLOW3_AOP_Proxy_setProperty</pre>


"
10428,TYPO3.Flow,Bug,"",Resolved,Should have,Wrong Namespace scope when using PhpFrontend,Robert Lemke,Robert Lemke,2010-10-25 08:00,Cache,1.0 alpha 13,2010-10-25,"","",100,2010-10-25 07:24,"","",1807900,"","","The <pre>__halt_compiler()</pre> instruction in combination with the require mechanism used by the PhpFrontend can cause classes originally being in a global scope to be loaded in the namespace of the last class which has been loaded by the PhpFrontend.

This seems to be a bug in PHP, but until now we were not able to isolate it and write a separate exploit."
10472,TYPO3.Fluid,Feature,"",New,Could have,Fluid Standalone distribution,Bastian Waidelich,"",2012-10-16 09:17,Core,"",2010-10-26,"","",0,2010-10-26 10:14,"","",2594300,"","","Create a script that extracts a Fluid version from the current trunk that is usable without TYPO3.
This means, that all dependencies to TYPO3 or Extbase functions have to be worked-around or moved to the distribution."
10486,TYPO3.Flow,Bug,"",Resolved,Must have,Validation for multiple validators and nested objects broken,Karsten Dambekalns,Christopher Hlubek,2010-10-27 15:00,Validation,1.0 alpha 13,2010-10-27,"","",100,2010-10-27 14:55,"","",1807850,"","","Currently the validation is seriously broken for nested objects and with multiple validators with different options.

The validators were ""created"" as singletons and options are overwritten each time the same validator type was used.

Additionally the check for ""prototype"" should use the constant and not a string to work."
10516,TYPO3.Flow,Bug,"",Closed,-- undefined --,F3\FLOW3\Package\Exception\UnknownPackageException thrown in file PackageManager.php,Martin Eisengardt,"",2010-12-13 10:24,- Error Handler Report -,"",2010-10-28,"","",100,2010-10-28 08:55,"","",1778700,"","","This problem only occurs once under windows vista. Seems that some component is misbehaving/misusing he windows directory separator. It only occurs with empty data/temporary directory. Adding the following code in F3\FLOW3\Resource\Streams\ResourceStreamWrapper, line 499 to change windows style backslash to slash solved the problemfor me. Of course there should be a smarter fix.
$requestedPath = str_replace('\\', '/', $requestedPath);



Package ""FLOW3\Private"" is not available. Please note that package keys are case sensitive.
10 F3\FLOW3\Package\PackageManager::getPackage(""FLOW3\Private"")
9 F3\FLOW3\Resource\Streams\ResourceStreamWrapper::evaluateResourcePath(""resource://FLOW3\Private"")
8 F3\FLOW3\Resource\Streams\ResourceStreamWrapper::pathStat(""resource://FLOW3\Private"", 3)
7 F3\FLOW3\Resource\Streams\StreamWrapperAdapter::url_stat(""resource://FLOW3\Private"", 3)
6 RecursiveDirectoryIterator::hasChildren()
5 F3\FLOW3\I18n\Service::generateAvailableLocalesCollectionByScanningFilesystem()
4 F3\FLOW3\I18n\Service::initialize()
3 F3\FLOW3\Core\Bootstrap::initializeI18n()
2 F3\FLOW3\Core\Bootstrap::initialize()
1 require(""D:\Dev\ws\bghosting_website\com_bghosting_flow3_de?wkflow3\Packages\Framework\FLOW3\Scripts\FLOW3.php"")

"
10524,TYPO3.Flow,Feature,"",Closed,-- undefined --,Support multiple package directories,Martin Eisengardt,"",2012-05-15 09:39,"","",2010-10-29,"","",0,2010-10-29 03:50,"","",1778650,"","","Currently I have trouble developing several seperated modules. To test them each module must either be starting at the local Packages/<something> folder or must contain a copy/reference to the whole framework. That's blowing up my eclipse workspace.

Flow3 should support (at least during development) the directory structure:
<pre>
/workspace-root/framework-project/Packages/Framework/DocumentationBrowser ...
/workspace-root/framework-project/Packages/Framework/ExtJS ...
/workspace-root/framework-project/Packages/Framework/FLOW3 ...
/workspace-root/framework-project/Packages/Framework/FLUID ...
[etc....]
/workspace-root/my-project/Configuration...
/workspace-root/my-project/Data...
/workspace-root/my-project/Packages/MyLib/MyModuleName...
/workspace-root/my-project/Web/index.php
/workspace-root/another-project/Configuration...
/workspace-root/another-project/Data...
/workspace-root/another-project/Packages/MyLib/MyModuleName...
/workspace-root/another-project/Web/index.php
</pre>

** Benefits from this structure
- Eclipse does only have to manage the framework components once
- There is no need to prepare a more complex layout over svn/git
- There may be other use cases where multiple projects are joined together to create an application

** Changes that need to be made
The changes are simple.
1) The defines FLOW3_PATH_CONFIGURATION and FLOW3_PATH_DATA need to be overwritten by htaccess environment variables. Currently Bootstrap does declare them depending on FLOW3_ROOTPATH. In the directory layout above the configuration and data directories are part of the project and not part of the flow3 root.
2) (already possible) FLOW3_ROOTPATH will be set in the htaccess.
3) A new (but optional) environment variable/define FLOW3_PATH_PACKAGES_ADDITIONAL will contain a list of additional directories where to find packages. htacces or the index.php script will have to declare the directories where to find the additional package directories. This will cause the following changes in PackageManager:

<pre>
	/**
	 * Scans all directories in the packages directories for available packages.
	 * For each package a \F3\FLOW3\Package\ object is created and returned as
	 * an array.
	 *
	 * @return void
	 * @author Robert Lemke <robert@typo3.org>
	 */
	protected function scanAvailablePackages() {
		$this->packages = array('FLOW3' => $this->objectManager->create('F3\FLOW3\Package\Package', 'FLOW3', FLOW3_PATH_FLOW3));
	
		$this->scanPathForPackages(FLOW3_PATH_PACKAGES);
		if (defined('FLOW3_PATH_PACKAGES_ADDITIONAL')) {
		    foreach (explode(';', FLOW3_PATH_PACKAGES_ADDITIONAL) as $path) {
		        $this->scanPathForPackages($path);
		    }
		}
		
		foreach (array_keys($this->packages) as $upperCamelCasedPackageKey) {
			$this->packageKeys[strtolower($upperCamelCasedPackageKey)] = $upperCamelCasedPackageKey;
		}
	}
	
	/**
	 * Scans a directory for packages.
	 * 
	 * some of the code was taken from flow3
	 * 
	 * @param string $path
	 * 
	 * @throws \F3\FLOW3\Package\Exception\DuplicatePackageException
	 */
	protected function scanPathForPackages($path)
	{
	    foreach (new \DirectoryIterator($path) as $parentFileInfo) {
			$parentFilename = $parentFileInfo->getFilename();
			if ($parentFilename[0] === '.' || !$parentFileInfo->isDir()) continue;

			foreach (new \DirectoryIterator($parentFileInfo->getPathname()) as $childFileInfo) {
				$childFilename = $childFileInfo->getFilename();
				if ($childFilename[0] !== '.' && $childFilename !== 'FLOW3') {
					$packagePath = \F3\FLOW3\Utility\Files::getUnixStylePath(realpath($childFileInfo->getPathName())) . '/';
					if (isset($this->packages[$childFilename])) {
						throw new \F3\FLOW3\Package\Exception\DuplicatePackageException('Detected a duplicate package, remove either ""' . $this->packages[$childFilename]->getPackagePath() . '"" or ""' . $packagePath . '"".', 1253716811);
					}
					$this->packages[$childFilename] = $this->objectManager->create('F3\FLOW3\Package\Package', $childFilename, $packagePath);
				}
			}
		}
	}
</pre>
"
10539,TYPO3.Flow,Feature,"",Resolved,Should have,Add real inheritance and alias support for CLDR data,Karol Gusak,Karol Gusak,2010-11-26 09:15,I18n,"",2010-10-29,"","",100,2010-10-29 14:30,"","",1778600,"","","CLDR uses concept of ""Locale inheritance"":http://www.unicode.org/reports/tr35/#Locale_Inheritance and ""aliases"":http://www.unicode.org/reports/tr35/#Common_Elements. As for now, the alias resolving and inheritance support are simplified greatly. This should be done before any new I18n features will be added, as changes in the internal parsed data structure are likely."
10595,TYPO3.Flow,Bug,"",Rejected,Should have,ObjectManager should not allow injection of prototypes,Bastian Waidelich,Robert Lemke,2011-08-04 02:41,Object,1.0 beta 1,2010-11-02,"","",0,2010-11-02 09:57,"","",1810800,"","","Currently it is possible to inject prototypes like:
<pre>
public function injectTagBuilder(\F3\Fluid\Core\ViewHelper\TagBuilder $tagBuilder) {
	$this->tagBuilder = $tagBuilder;
}
</pre>
This leads to some unexpected side effects especially when used in *singletons*.
IMO we should prevent this and throw a meaningful exception stating that you need to inject the object manager in order to create prototype instances."
10669,TYPO3.Flow,Bug,"",Closed,Should have,"Login session not ""cleared"" when creating new admin (security framework related?)",Soren Malling,"",2011-03-30 15:11,Security,"",2010-11-08,"","",0,2010-11-08 03:23,"","",1778550,"","","Hi,

Sorry if this one should go into the TYPO3 package - if so, please move it :)

On ""latest.phoenix.typo3.org"" I got the possibility of deleting the main/home page. If I do so, I get the page ""Welcome to TYPO3"" where I can click the ""Enter setup"" link.

Clicking that link, makes it possible to import a new package and create a new admin user. I did so, and entered a new value to the ""password"" field. My user was created and/but my login session was still valid, meaning I could edit content with the admin user having ""wrong"" credentials. 

Logging out and try to login with the admin/password combination didn't give me access, until I used the newly entered combination.

I might expect, that me changing(/creating a new and clearing current?) admin user credentials, should in some way make my session invalid, as it is not the same admin user object? Is this correctly understood? Should this be considered a bug?"
10678,TYPO3.Flow,Bug,"",New,Must have,ReflectionService doesn't reflect methods of child classes correctly when they get reflected before their parent class in the initialization process,Florian Kugler,"",2011-10-21 07:20,Reflection,"",2010-11-08,"","",0,2010-11-08 10:46,"","",1778500,"",FLOW3 1.0.0,"ReflectionService::reflectClass() calls $this->convertParameterReflectionToArray() to reflect the parameters of a method which in turn calls $this->getMethodTagsValues() to retrieve the type hint for the parameter.
However, if a child class gets reflected in the initialization process of ReflectionService before its parent class got reflected, the type hint information for parameters of inherited methods is not detected.

ReflectionService::convertParameterReflectionToArray() tries to retrieve the type hint from the reflection information of the declaring (in this case: parent) class by calling 

$methodTagsAndValues = $this->getMethodTagsValues($method->getDeclaringClass()->getName(), $method->getName());

If the declaring class did not get reflected until this point ReflectionService::getMethodTagsValues() returns an empty array.  

getMethodTagsValues() only calls reflectClass() on a not yet reflected class it is queried about if the initialization process of the ReflectionService is already finished, because of this statement:
if ($this->initialized === TRUE && !isset($this->reflectedClassNames[$className])) $this->reflectClass($className);


For me removing the $this->initialized === TRUE condition in getMethodTagsValues() solved the problem. But I'm not sure if it might brake things somewhere else!?"
10680,TYPO3.Flow,Feature,"",Resolved,Should have,Implement Content Negotiation Support,Robert Lemke,Robert Lemke,2010-11-08 16:30,MVC,1.0 alpha 13,2010-11-08,"","",100,2010-11-08 11:17,"","",1807800,"","","There is now a use case for content negotiation in FLOW3:

For most requests, content negotiation based on the Accept HTTP header does not make sense because most browsers don't send meaningful information in them (some browsers for example say that they prefer ""XML"" over ""HTML"" which the user of course doesn't). However, for REST services it is a handy feature to control the output format by sending a respective Accept header. In some cases this might even be the only way to control the format, for example how else would you GET a resource ""http://myhost/customers/"" in different formats?

A proper implementation could work like this:

* if a format is defined through a @format property in the matching route, this format is used
* if no format has been defined by the route, the Accept header will be analyzed and compared with a list of supported formats by the controller. If another format than ""HTML"" is accepted by the client and the controller supports it, this format is chosen. If no other accepted format matches the supported formats, HTML is used."
10687,TYPO3.Flow,Bug,"",Resolved,Should have,@subpackage cannot be unset when rendering URIs,Robert Lemke,Robert Lemke,2010-11-09 04:45,MVC - Routing,1.0 alpha 13,2010-11-08,"","",100,2010-11-08 17:25,"","",1807750,"","","The UriBuilder's behavior is that if no controller, package, subpackage etc. are specified to the uriFor() method, the _current_ controller, package etc. are used.

That turns out to become a problem if one would like to link from a controller within a subpackage to a controller without a subpackage namespace part: specifying an empty subpackage is recognized as ""not specified"" and results in use of the _current_ subpackage.

A possible fix is to only use the _current_ subpackage if neither a package nor a subpackage have been specified. If only a package but no subpackage is passed to uriFor(), an empty subpackage key should be assumed."
10701,TYPO3.Flow,Bug,"",Closed,Must have,F3\FLOW3\Persistence\Exception thrown in file DataMapper.php,Christian Lerrahn,Karsten Dambekalns,2011-12-15 12:02,Persistence,"",2010-11-10,"","",0,2010-11-10 02:01,"","",1778450,"",FLOW3 1.0.0,"I get the following exception when trying to render a view of my model. The model is very similar to another model
which works. I can't see any structural difference between the views, either.

What is going wrong here? Is this a problem in Fluid or in FLOW3? I can't even tell. :(

I'm sorry if the information I'm providing is not sufficient. Please ask if you need more specific information.

@The object of type ""F3\UtilityMeterReconciliation\Domain\Model\Meter"" is not marked as lazy loadable.
74 F3\FLOW3\Persistence\DataMapper::mapToObject(array)
73 F3\FLOW3\Persistence\DataMapper::mapToObjects(array)
72 F3\FLOW3\Persistence\QueryResult::initialize()
71 F3\FLOW3\Persistence\QueryResult::rewind()
70 F3\Fluid\ViewHelpers\ForViewHelper::render(F3\FLOW3\Persistence\QueryResult, ""meter"", """", boolean, NULL)
69 call_user_func_array(array, array)
68 F3\Fluid\Core\ViewHelper\AbstractViewHelper::callRenderMethod(array)
67 F3\Fluid\Core\ViewHelper\AbstractViewHelper::initializeArgumentsAndRender(array)
66 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
65 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes(F3\Fluid\Core\Rendering\RenderingContext)
64 F3\Fluid\Core\ViewHelper\AbstractViewHelper::renderChildren()
63 F3\Fluid\ViewHelpers\FormViewHelper::render(""csv"", array, ""Meter"", NULL, NULL, NULL, """", """", array, boolean, boolean, array, NULL, NULL, NULL)
62 call_user_func_array(array, array)
61 F3\Fluid\Core\ViewHelper\AbstractViewHelper::callRenderMethod(array)
60 F3\Fluid\Core\ViewHelper\AbstractViewHelper::initializeArgumentsAndRender(array)
59 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
58 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes(F3\Fluid\Core\Rendering\RenderingContext)
57 F3\Fluid\Core\ViewHelper\AbstractViewHelper::renderChildren()
56 F3\Fluid\Core\ViewHelper\AbstractConditionViewHelper::renderThenChild()
55 F3\Fluid\ViewHelpers\IfViewHelper::render(boolean)
54 call_user_func_array(array, array)
53 F3\Fluid\Core\ViewHelper\AbstractViewHelper::callRenderMethod(array)
52 F3\Fluid\Core\ViewHelper\AbstractViewHelper::initializeArgumentsAndRender(array)
51 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
50 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes(F3\Fluid\Core\Rendering\RenderingContext)
49 F3\Fluid\Core\ViewHelper\AbstractViewHelper::renderChildren()
48 F3\Fluid\ViewHelpers\SectionViewHelper::render()
47 call_user_func_array(array, array)
46 F3\Fluid\Core\ViewHelper\AbstractViewHelper::callRenderMethod(array)
45 F3\Fluid\Core\ViewHelper\AbstractViewHelper::initializeArgumentsAndRender(array)
44 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
43 F3\Fluid\View\AbstractTemplateView::renderSection(""contentRight"", array)
42 F3\Fluid\ViewHelpers\RenderViewHelper::render(""contentRight"", NULL, array)
41 call_user_func_array(array, array)
40 F3\Fluid\Core\ViewHelper\AbstractViewHelper::callRenderMethod(array)
39 F3\Fluid\Core\ViewHelper\AbstractViewHelper::initializeArgumentsAndRender(array)
38 F3\Fluid\Core\Parser\SyntaxTree\ViewHelperNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
37 F3\Fluid\Core\Parser\SyntaxTree\AbstractNode::evaluateChildNodes(F3\Fluid\Core\Rendering\RenderingContext)
36 F3\Fluid\Core\Parser\SyntaxTree\RootNode::evaluate(F3\Fluid\Core\Rendering\RenderingContext)
35 F3\Fluid\Core\Parser\ParsingState::render(F3\Fluid\Core\Rendering\RenderingContext)
34 F3\Fluid\View\AbstractTemplateView::render()
33 F3\FLOW3\MVC\Controller\ActionController::callActionMethod()
32 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::callActionMethod()
31 call_user_func_array(array, array)
30 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::FLOW3_AOP_Proxy_invokeJoinPoint(F3\FLOW3\AOP\JoinPoint)
29 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
28 F3\FLOW3\Security\Aspect\PolicyEnforcementAspect::enforcePolicy(F3\FLOW3\AOP\JoinPoint)
27 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
26 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
25 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::callActionMethod()
24 F3\FLOW3\MVC\Controller\ActionController::processRequest(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
23 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::processRequest(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
22 call_user_func_array(array, array)
21 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::FLOW3_AOP_Proxy_invokeJoinPoint(F3\FLOW3\AOP\JoinPoint)
20 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
19 F3\FLOW3\Security\Aspect\PolicyEnforcementAspect::enforcePolicy(F3\FLOW3\AOP\JoinPoint)
18 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
17 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
16 F3\UtilityMeterReconciliation\Controller\Meter\MeterController_AOPProxy_Development::processRequest(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
15 F3\FLOW3\MVC\Dispatcher::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
14 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
13 call_user_func_array(array, array)
12 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::FLOW3_AOP_Proxy_invokeJoinPoint(F3\FLOW3\AOP\JoinPoint)
11 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
10 F3\FLOW3\Security\Aspect\RequestDispatchingAspect::blockIllegalRequestsAndForwardToAuthenticationEntryPoints(F3\FLOW3\AOP\JoinPoint)
9 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
8 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
7 F3\FLOW3\Security\Aspect\RequestDispatchingAspect::initializeSecurity(F3\FLOW3\AOP\JoinPoint)
6 F3\FLOW3\AOP\Advice\AroundAdvice::invoke(F3\FLOW3\AOP\JoinPoint)
5 F3\FLOW3\AOP\Advice\AdviceChain::proceed(F3\FLOW3\AOP\JoinPoint)
4 F3\FLOW3\MVC\Dispatcher_AOPProxy_Development::dispatch(F3\FLOW3\MVC\Web\Request, F3\FLOW3\MVC\Web\Response)
3 F3\FLOW3\MVC\Web\RequestHandler::handleRequest()
2 F3\FLOW3\Core\Bootstrap::run()
1 require(""/home/umr_test/FLOW3-1.0.0-alpha12-build42/Packages/Framework/FLOW3/Scripts/FLOW3.php"")@"
10718,TYPO3.Flow,Bug,"",Resolved,Must have,Content security: query rewriting fails if no other constraints are set on the query,Florian Kugler,Karsten Dambekalns,2010-11-15 05:15,Security,1.0 alpha 13,2010-11-10,"","",100,2010-11-10 13:14,"","",1807700,"","","The query rewriting aspect fails if the policy constraint is the only constraint on the query.

In @PersistenceQueryRewritingAspect::rewriteQomQuery()@ the policy constraint is added to the query by:
<pre>if ($additionalCalculatedConstraints !== NULL) {
    $newConstraints = $query->logicalAnd($query->getConstraint(), $query->logicalNot($additionalCalculatedConstraints));
    $query->matching($newConstraints);
}</pre>

However, if @$query->getConstraint()@ returns NULL the call of logicalAnd() fails.

This is my quick fix:

<pre>if ($query->getConstraint() !== NULL) {
    $newConstraints = $query->logicalAnd($query->getConstraint(), $query->logicalNot($additionalCalculatedConstraints));
} else {
    $newConstraints = $query->logicalNot($additionalCalculatedConstraints);
}</pre>
"
10821,TYPO3.Fluid,Feature,"",Resolved,Should have,add possibility to output FlashMessageQueue,Tolleiv Nietsch,Bastian Waidelich,2010-11-30 11:13,ViewHelpers,"",2010-11-15,"","",0,2010-11-15 16:55,"","",2594200,"","","It seems that there's no way to output the FlashMessageQueue in a extbase driven be-module.

The attached patch adds a simple ViewHelper which outputs the queue.

It would be good if this could be included into 4.5 beta1 because I'd like to make use of it within the new workspace module.
"
10882,TYPO3.Fluid,Bug,"",Closed,Should have,PaginateViewHelper got wrong example,Georg Ringer,Bastian Waidelich,2010-11-18 07:00,ViewHelpers,"",2010-11-17,"","",70,2010-11-17 01:37,"","",2594150,"","","The example of the PaginateViewHelper is outdated. 
Would be nice to have a working example"
10902,TYPO3.Fluid,Bug,"",Resolved,Must have,Paginate widget produces exception with too high offset,Georg Ringer,Bastian Waidelich,2010-11-18 08:11,ViewHelpers,"",2010-11-17,"","",100,2010-11-17 09:02,"","",2594100,"","","If the offset is too high, an exception is thrown. This neeeds to be avoided as this can happen if there are old links (from search engines, shared links, ...).

example: 
itemsPerPage:3 and 7 records and [__widget_0][currentPage]=4

solution would be to show either the results as if no offset is set or the last pages, including a redirect or at least the correct headers

"
10908,TYPO3.Fluid,Bug,"",Resolved,Should have,Fix and cleanup inline documentation of ViewHelpers,Georg Ringer,Bastian Waidelich,2010-12-30 12:19,ViewHelpers,"",2010-11-17,"","",100,2010-11-17 11:47,"","",2594050,"","","some more cleanups to viewhelpers where the examples in the comments doesn't fit the actual code.

as using fluid should be as easy as possible, copy&past must work out of the box"
10911,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,New,Should have,Tx_Fluid_ViewHelpers_Form_AbstractFormViewHelper->renderHiddenIdentityField should be more reliable,Patrick Schriner,"",2011-09-30 06:29,ViewHelpers,"",2010-11-17,"","",0,2010-11-17 13:25,"","",62950,"","","(Poor title)

<pre><code class=""php"">
$name = $this->prefixFieldName($name) . '[__identity]';
</code></pre>

The problem with this line is that if this lookup resorts to an empty string, fluid will fail during a security check:

<pre><code class=""php"">
#1255072832: The form field name ""[__identity]"" is invalid. Reason: ""[]"" used not as last argument. 

Tx_Extbase_Security_Exception_InvalidArgumentForRequestHashGeneration thrown in file W:\TYPO3Winstaller\htdocs\Dummy\typo3\sysext\extbase\Classes\Security\Channel\RequestHashService.php in line 94.
</code></pre>

I'm pretty sure that a mistake of mine led to renderHiddenIdentityField behaving this way, yet I don't see the point in creating misleading & invalid output."
10929,TYPO3.Flow,Bug,"",Closed,-- undefined --,F3\FLOW3\Package\Exception\UnknownPackageException thrown in file PackageManager.php,Nys ,"",2010-12-13 10:23,- Error Handler Report -,"",2010-11-18,"","",100,2010-11-18 07:18,"","",1778400,"","","Package ""FLOW3\Private"" is not available. Please note that package keys are case sensitive.
10 F3\FLOW3\Package\PackageManager::getPackage(""FLOW3\Private"")
9 F3\FLOW3\Resource\Streams\ResourceStreamWrapper::evaluateResourcePath(""resource://FLOW3\Private"")
8 F3\FLOW3\Resource\Streams\ResourceStreamWrapper::pathStat(""resource://FLOW3\Private"", 3)
7 F3\FLOW3\Resource\Streams\StreamWrapperAdapter::url_stat(""resource://FLOW3\Private"", 3)
6 RecursiveDirectoryIterator::hasChildren()
5 F3\FLOW3\I18n\Service::generateAvailableLocalesCollectionByScanningFilesystem()
4 F3\FLOW3\I18n\Service::initialize()
3 F3\FLOW3\Core\Bootstrap::initializeI18n()
2 F3\FLOW3\Core\Bootstrap::initialize()
1 require(""D:\Programme\xampp\htdocs\FLOW3\Packages\Framework\FLOW3\Scripts\FLOW3.php"")

Please include more helpful information!"
10975,TYPO3.Fluid,Bug,"",Resolved,Should have,Deprecation message about lowercase template files names suggest lowercase file name,Oliver Klee,Bastian Waidelich,2011-01-11 15:58,View,"",2010-11-19,"","",0,2010-11-19 11:46,"","",2594000,"","","This is what the error messages looks like in Fluid 1.3.0a3:


09-11-10 12:57: the template filename ""<extension-path>/Resources/Private/Templates/CareerGadget/build.html"" is lowercase. This is deprecated since TYPO3 4.4. Please rename the template to ""build.html""

The attached patch changes two things in both places that are relevant:

# make the suggested new name upper-first
# change the wording to make it clear this is about two variants of camelCase, not about all-lowercase."
11007,TYPO3.Fluid,Bug,"",Closed,Must have,PaginateController uses wrong offset,Georg Ringer,"",2011-05-06 04:35,Widgets,"",2010-11-22,"","",80,2010-11-22 07:32,"","",2593950,"","","The PaginateController doesn't work with an offset set in the original query.

Example:
7 news records should be displayed with an offset of 2 (explanation could be that the 1st 2 records are rendered with a different plugin). itemsPerPage = 3

1st page should show:
item 4
item 5
item 6
2nd page should show
item 7
-------------------------

currently output is:
1st page:
item 4
item 5
item 6
2nd page:
item 4
item 5
item 6
3rd page:
item 7

------------------------

the possible offset of the query is not checked."
11017,TYPO3.Flow,Bug,"",Resolved,Should have,Using a method visibility inside a pointcut throws an exception,Christopher Hlubek,Christopher Hlubek,2010-11-24 06:00,AOP,1.0 alpha 14,2010-11-23,"","",100,2010-11-23 04:34,"","",1809000,"","","FLOW3 throws an Exception if a pointcut like this is registered.

<pre>
/**
 * Advice for logging service requests
 *
 * @param \F3\FLOW3\AOP\JoinPointInterface
 * @return void
 * @after method(public F3\Foo\Service\.*Service->[a-z].*())
 */
public function logServiceRequest(\F3\FLOW3\AOP\JoinPointInterface $joinPoint) {
}
</pre>

Without ""public"" the pointcut works but it will match non-public methods.

<pre>
15 ReflectionClass::__construct("""")


Packages/Framework/FLOW3/Classes/Reflection/ClassReflection.php:

00042:   */
00043:  public function __construct($className) {

00044:   parent::__construct($className);

00045:  }
00046: 


14 F3\FLOW3\Reflection\ClassReflection::__construct("""")


Packages/Framework/FLOW3/Classes/Reflection/ReflectionService.php:

00836:   $this->log('Reflecting class ""' . $className . '"" (' . ($this->initialized ? '' : 'not ') . 'initialized)', LOG_DEBUG);
00837: 

00838:   $class = new \F3\FLOW3\Reflection\ClassReflection($className);

00839:   $this->reflectedClassNames[$className] = time();
00840: 


13 F3\FLOW3\Reflection\ReflectionService::reflectClass("""")


Packages/Framework/FLOW3/Classes/Reflection/ReflectionService.php:

00552:  public function isMethodPublic($className, $methodName) {
00553:   $className = trim($className, '\\');

00554:   if (!isset($this->reflectedClassNames[$className])) $this->reflectClass($className);

00555:   return (isset($this->methodVisibilities[$className][$methodName]) && $this->methodVisibilities[$className][$methodName] === ' ');
00556:  }


12 F3\FLOW3\Reflection\ReflectionService::isMethodPublic(NULL, ""__construct"")


Packages/Framework/FLOW3/Classes/AOP/Pointcut/PointcutMethodNameFilter.php:

00100:   switch ($this->methodVisibility) {
00101:    case 'public' :

00102:     $visibilityMatches = $this->reflectionService->isMethodPublic($methodDeclaringClassName, $methodName);

00103:    break;
00104:    case 'protected' :


11 F3\FLOW3\AOP\Pointcut\PointcutMethodNameFilter::matches(""F3\CouchDB\EntityByParentIdentifierView"", ""__construct"", NULL, 102)


Packages/Framework/FLOW3/Classes/AOP/Pointcut/PointcutFilterComposite.php:

00084:    list($operator, $filter) = $operatorAndFilter;
00085: 

00086:    $currentFilterMatches = $filter->matches($className, $methodName, $methodDeclaringClassName, $pointcutQueryIdentifier);

00087:    $currentRuntimeEvaluationsDefintion = $filter->getRuntimeEvaluationsDefinition();
00088: 


10 F3\FLOW3\AOP\Pointcut\PointcutFilterComposite::matches(""F3\CouchDB\EntityByParentIdentifierView"", ""__construct"", NULL, 102)


Packages/Framework/FLOW3/Classes/AOP/Pointcut/PointcutFilterComposite.php:

00084:    list($operator, $filter) = $operatorAndFilter;
00085: 

00086:    $currentFilterMatches = $filter->matches($className, $methodName, $methodDeclaringClassName, $pointcutQueryIdentifier);

00087:    $currentRuntimeEvaluationsDefintion = $filter->getRuntimeEvaluationsDefinition();
00088: 


9 F3\FLOW3\AOP\Pointcut\PointcutFilterComposite::matches(""F3\CouchDB\EntityByParentIdentifierView"", ""__construct"", NULL, 102)


Packages/Framework/FLOW3/Classes/AOP/Pointcut/Pointcut.php:

00112:   }
00113: 

00114:   return $this->pointcutFilterComposite->matches($className, $methodName, $methodDeclaringClassName, $pointcutQueryIdentifier);

00115:  }
00116: 


8 F3\FLOW3\AOP\Pointcut\Pointcut::matches(""F3\CouchDB\EntityByParentIdentifierView"", ""__construct"", NULL, 102)


Packages/Framework/FLOW3/Classes/AOP/Builder/ProxyClassBuilder.php:

00294:      if ($this->reflectionService->isMethodFinal($targetClassName, $methodName)) continue;
00295: 

00296:      if ($pointcut->matches($targetClassName, $methodName, $methodDeclaringClassName, $pointcutQueryIdentifier)) {

00297:       $advice = $advisor->getAdvice();
00298:       $interceptedMethods[$methodName]['groupedAdvices'][get_class($advice)][] = $advice;


7 F3\FLOW3\AOP\Builder\ProxyClassBuilder::addAdvicedMethodsToInterceptedMethods(array, array, ""F3\CouchDB\EntityByParentIdentifierView"", array)


Packages/Framework/FLOW3/Classes/AOP/Builder/ProxyClassBuilder.php:

00145: 
00146:   $interceptedMethods = array();

00147:   $this->addAdvicedMethodsToInterceptedMethods($interceptedMethods, array_merge($methodsFromTargetClass, $methodsFromIntroducedInterfaces), $targetClassName, $aspectContainers);

00148:   $this->addIntroducedMethodsToInterceptedMethods($interceptedMethods, $methodsFromIntroducedInterfaces);
00149:   if (count($interceptedMethods) < 1 && count($introducedInterfaces) < 1) return FALSE;


6 F3\FLOW3\AOP\Builder\ProxyClassBuilder::buildProxyClass(""F3\CouchDB\EntityByParentIdentifierView"", array, ""Development"")


Packages/Framework/FLOW3/Classes/AOP/Framework.php:

00244: 
00245:    foreach ($dirtyTargetClassNames as $targetClassName) {

00246:     $proxyBuildResult = $this->proxyClassBuilder->buildProxyClass($targetClassName, $this->aspectContainers, $this->objectManager->getContext());

00247:     if ($proxyBuildResult !== FALSE) {
00248:      $this->targetAndProxyClassNames[$targetClassName] = $proxyBuildResult['proxyClassName'];

</pre>"
11028,TYPO3.Fluid,Bug,"",Closed,Should have,Output of domain and property validator error messages performs always an default error,Armin Ruediger Vieweg,"",2011-05-06 04:35,"","",2010-11-23,"","",0,2010-11-23 12:28,"","",2593900,"","","Hello guys,

I've seen a strange error with validators and its error messages.

When a domain validator and a property validator has been triggered at the same time, the output shows a third error which is basicly located in _Tx_Extbase_Validation_PropertyError_:
<pre>1242859509: Validation errors for property ""title""</pre>

The solution to hide this needless error was an if-condition in fluid-template, but this seems to be very dirty:

<pre>
<f:form.errors for=""myFormname"">
	<f:for each=""{error.errors}"" as=""errorDetail"">
			<f:translate key=""...{errorDetail.code}"" default=""...{errorDetail.message}"" /><br />
	</f:for>
</f:form.errors>

<f:form.errors>
	<f:for each=""{error.errors}"" as=""errorDetail"">
		<f:if condition=""{errorDetail.code} != 1242859509"">
			<f:translate key=""...{errorDetail.code}"" default=""...{errorDetail.message}"" /><br />
		</f:if>
	</f:for>
</f:form.errors>
</pre>

If you ask why there are two @<f:form:errors />@: This is because property error messages and domain error messages must have an seperatly output.

Maybe I'm wrong and there exists a very much more elegant solution, but if not, then it seems to be an error that the default error 1242859509 gets displayed.

Kind Regards"
11034,TYPO3.Flow,Task,"",Resolved,Should have,Remove AbstractXmlModel and AbstractXmlParser from I18n package,Karol Gusak,Karsten Dambekalns,2011-12-21 06:37,I18n,1.1 beta 1,2010-11-23,"","",100,2010-11-23 17:51,"","",63650,"","","The @AbstractXmlModel@ is a base class for XML models, but it's not very useful as it is only extended by @CldrModel@ and @XliffModel@ which don't have much in common. So removing the abstract class will simplify the code. The same goes for @AbstractXmlParser@ class."
11035,TYPO3.Flow,Task,"",Closed,Should have,Divide supported locales into two categories,Karol Gusak,Karsten Dambekalns,2012-05-21 10:40,I18n,1.1,2010-11-23,"","",0,2010-11-23 17:57,"","",63700,"","","There should be two types of locales supported by I18n package. One collection of Locale object would represent a group of locales fully supported by the system (e.g. locales for which translation files and other localized resources are available) - as it is now. The other category would consist of all locales supported by CLDR itself. There should be possibility to use functionality based on CLDR data (like number formatting, parsing etc) for locales which does not belong to the first category (the ""fully supported"" locales)."
11039,TYPO3.Flow,Bug,"",Needs Feedback,Must have,Static object container injects properties to result of factory object,Christopher Hlubek,"",2012-03-14 08:41,"","",2010-11-24,"","",0,2010-11-24 05:08,"","",1778350,"",FLOW3 1.0.0,"If a factoryObjectName is set for an object, the dependencies of the default implementation are injected to the result of the factory anyway (the factory already returns a complete object). A workaround is to set the className to an implementation that doesn't have dependencies.

If a factoryObjectName is configured, there should be no further injection on the result because the type is unknown beforehand."
11056,TYPO3.Flow,Bug,"",Resolved,Should have,findOneBy*() methods should return NULL if no item was found,Bastian Waidelich,Robert Lemke,2010-12-17 08:00,Persistence,1.0 alpha 14,2010-11-24,"","",100,2010-11-24 13:54,"","",1808950,"","","Currently all findOneBy*() methods of repositories return FALSE, if no records where found. As discussed this should be changed to NULL as done in Extbase (see #10958)."
11091,TYPO3.Kickstart,Bug,"",Resolved,Should have,Missing curly bracket on class statement,Michael Klapper,Karsten Dambekalns,2010-12-21 04:00,"",1.0 alpha 14,2010-11-26,"",1.00,100,2010-11-26 05:46,"","",2740650,"","","The generated class looks like:

<pre>
...

/**
 * A repository for TaskLists
 *
 * @package GTasks
 * @subpackage Domain
 * @license http://www.gnu.org/licenses/gpl.html GNU General Public License, version 3 or later
 */
class TaskListRepository extends \F3\FLOW3\Persistence\Repository 
?>
</pre>"
11101,TYPO3.Fluid,Bug,"",Resolved,Should have,Pagination widget creates incorrect absolute URLs,Martin Helmich,Bastian Waidelich,2010-12-02 13:29,Widgets,"",2010-11-26,"","",100,2010-11-26 10:52,"","",2593850,"","","Currently, the paginate widget creates absolute URLs. However, if your TYPO3 is installed in a subdirectory of the document root, this is apparently not respected when generating the URLs.

So, the widget creates URLS like

http://localhost/index.php... instead of
http://localhost/xyz/index.php

Is there actually any reason to use absolute URLs instead of relative ones?

Problem occurs with version 1.3.0beta1a.

Best regards,
Martin Helmich"
11122,TYPO3.Fluid,Bug,"",Closed,Should have,Doc comments for render method not work with tabs,Tomas Majer,Karsten Dambekalns,2012-03-07 15:57,Core,"",2010-11-29,"","",0,2010-11-29 03:27,"","",2593800,"",FLOW3 1.0.0,"There are problem with tabs in doc comments in render method. Fluid crash with exception:

@#1242292003: could not determine type of argument ""text"" of the render-method in ViewHelper ""Tx_My_ViewHelpers_MyViewHelper"". Either the methods docComment is invalid or some PHP optimizer strips off comments.@

Example:
<pre>/**
 * @param	string	$text
 * @return	string
 * @api
 */
public function render($text) {}</pre>"
11169,TYPO3 Flow Base Distribution,Story,"",Resolved,Should have,Implement new operator support,Robert Lemke,Robert Lemke,2011-05-06 03:24,"",1.0 beta 1,"","","",40,2010-11-30 09:15,"","",1766200,0.00,"","Refactor FLOW3 so that the PHP ""new"" operator can be used instead of  ObjectManager->create()"
11207,TYPO3.Flow,Bug,"",Resolved,Must have,Fatal error when PHPUnit is not installed,Bastian Waidelich,Karsten Dambekalns,2010-12-13 10:19,- Testing -,1.0 alpha 14,2010-12-01,"","",100,2010-12-01 07:39,"","",1808900,"","","PHPUnit and vfs(stream) are no longer included with the FLOW3 distribution.
But still, the core relies on those libraries.
Running FLOW3 without the respective PEAR packages installed, PHP dies with a fatal error:
<pre>
Fatal error: require_once() [function.require]: Failed opening required 'PHPUnit/Autoload.php'
</pre>

IIRC the plan is to get rid of the dependency (as long as you don't want to run the unit tests of course).
But anyways, the fatal error should be avoided by checking for the existence of the required PEAR packages IMO"
11240,TYPO3.Flow,Bug,"",Resolved,Must have,Set UNIX_PATHS flag when using RecursiveDirectoryIterator,Bastian Waidelich,Bastian Waidelich,2010-12-13 10:31,I18n,1.0 alpha 14,2010-12-02,"","",100,2010-12-02 12:07,"","",1808850,"","","Currently FLOW3 breaks on Windows, because the I18n service uses the RecursiveDirectoryIterator without setting the 2nd argument to @RecursiveDirectoryIterator::UNIX_PATHS@ in order to use the forward slash as directory separator.
Usually that wouldn't matter, cause PHP file functions accept Windows style paths as well. For paths that use the ""resource"" scheme though, this breaks as the ResourceStreamWrapper gets a path like ""MyPackage\Foo\Bar"" and fails to extract the package key from that.
One solution would be, to call @\F3\FLOW3\Utility\Files::getUnixStylePath()@ on the given path in the stream wrapper.
But specifying the UNIX_PATHS flag is probably the faster solution."
11286,TYPO3.Fluid,Feature,"",Closed,Could have,Alternative syntax for fluid objects inside JavaScript,Fernando Arconada,Bastian Waidelich,2012-11-26 09:53,Core,"",2010-12-05,"","",0,2010-12-05 05:05,"","",2593750,"","",Fluid objects in the way of tags and braces are uncomfortable inside javascript code cause fluid syntax conflicts with JS syntax. So will be great to have a syntax like ##object.property## or what you like that doesnt conflicts
11330,TYPO3.Flow,Bug,"",Resolved,Should have,Uploading resources fails on windows due to a missing directory,Andreas Förthner,Karsten Dambekalns,2010-12-20 15:32,Resource,1.0 alpha 14,2010-12-08,"","",100,2010-12-08 07:27,"","",1808800,"","","If the directory Data/Persisten/Resources is not present on windows (which is the default currently), the uploading doesn't work.

Solution: Either deliver the file in the distributions or create during runtime."
11349,TYPO3.Flow,Bug,"",Resolved,Must have,Request format is not resolved for POST requests,Bastian Waidelich,Bastian Waidelich,2010-12-20 10:41,MVC,1.0 alpha 14,2010-12-09,"","",100,2010-12-09 06:05,"","",1808750,"","","In @\F3\FLOW3\MVC\Controller\ActionController::detectFormat()@ the default format for an action is resolved but there is a switch statement missing for method POST.
Usually that has no effect, cause you normally redirect to another action in POST actions, but it's a bug nevertheless."
11392,TYPO3.Flow,Bug,"",Closed,Should have,No proxy class code exception after clearing temporary data in development context,Christopher Hlubek,Karsten Dambekalns,2011-03-21 07:04,AOP,"",2010-12-10,"","",0,2010-12-10 14:53,"","",1778300,"","","I get occasional exceptions on first access after clearing temporary data in development context:

<pre>
#1229362833: No proxy class code for class ""F3\FLOW3\Core\Bootstrap_AOPProxy_Development"" found in cache.
</pre>"
11421,TYPO3.Flow,Feature,"",Resolved,Should have,Allow linking of resources directories for mirror mode link,Karsten Dambekalns,Christopher Hlubek,2010-12-14 15:00,Resource,1.0 alpha 14,2010-12-12,"","",100,2010-12-13 09:09,"","",1808700,"","","For static resources full directories could be linked instead of single files, to speed up the bootstrap."
11428,TYPO3.Flow,Feature,"",Resolved,Could have,Add performance profiling support,Karsten Dambekalns,Christopher Hlubek,2013-08-14 10:09,Core,"",2010-12-11,"","",0,2010-12-13 10:14,"","",1808650,"","","Add support for performance profiling, e.g. using XHProf http://pecl.php.net/package/xhprof"
11443,TYPO3.Flow,Feature,"",Resolved,Should have,Implement igbinary support,Robert Lemke,Robert Lemke,2010-12-14 16:00,Cache,1.0 alpha 14,2010-12-14,"","",100,2010-12-14 08:43,"","",1808600,"","","From http://opensource.dynamoid.com/ :
_""Igbinary is a drop in replacement for the standard PHP serializer. Instead of time and space consuming textual representation, igbinary stores PHP data structures in a compact binary form. Savings are significant when using memcached or similar memory based storages for serialized data.""_

We should support igbinary and take advantage of it if it is installed."
11526,TYPO3.Flow,Bug,"",Resolved,Must have,NULL values for single values not stored correctly,Karsten Dambekalns,Karsten Dambekalns,2010-12-17 10:00,Persistence,1.0 alpha 14,2010-12-16,"",1.00,100,2010-12-16 16:14,"","",1808550,"","","NULL values in multivalues are handled correctly, but for single values the type is not set to NULL as it should be.

One effect of this is that isEqual(..., NULL) doesn't work reliably."
11594,TYPO3.Flow,Bug,"",Resolved,Must have,Configuration manager throws exception in production context,Karsten Dambekalns,Karsten Dambekalns,2010-12-21 04:30,Configuration,1.0 alpha 14,2010-12-20,"",1.00,100,2010-12-20 07:58,"","",1808500,"","",""
11597,TYPO3.Kickstart,Bug,"",Resolved,Should have,"When used in the Phoenix distributon, an exception is thrown (RenderingContext)",Karsten Dambekalns,Karsten Dambekalns,2010-12-21 04:00,"",1.0 alpha 14,2010-12-20,"","",100,2010-12-20 10:14,"","",2740600,"","","Uncaught Exception in FLOW3 #1264584588: Object ""F3\Fluid\Core\Rendering\RenderingContextInterface"" is not registered (or an interface without default implementation).
"
11621,TYPO3.Flow,Bug,"",Resolved,Should have,Fatal error in ObjectManagerTest,Bastian Waidelich,Bastian Waidelich,2010-12-21 07:30,- Testing -,1.0 alpha 14,2010-12-21,"","",100,2010-12-21 04:55,"","",1808450,"","","When running the FLOW3 testrunner, in about 20% of the cases I'm getting a fatal error ""Cannot redeclare class [XYZ]"" where [XYZ] is a mock class name like ""BarClass4d107922cd5f8"".
The reason is probably, that we're using @uniqid()@ to create the class names, which seems - at least on windows - not to be as unique as it should be.."
11636,TYPO3.Fluid,Task,Task #26658: Make Form ViewHelpers consistent,Resolved,Should have,Form viewhelper not functional with method GET,Daniel Lienert,Christopher Hlubek,2013-10-21 14:15,ViewHelpers,"",2010-12-22,"","",100,2010-12-22 01:18,"","",67800,"","","If the GET-method is used, only the url from action is passed to the server, but not the paramaters given there like pageId, controller, action.

These fields should be added as hidden fields in the form."
11659,TYPO3.Flow,Bug,"",Closed,Should have,VariableFrontend tests fail if igbinary php module is active,Christian Kuhn,Karsten Dambekalns,2011-07-25 09:30,Cache,1.0 beta 1,2010-12-22,"","",0,2010-12-22 17:22,"","",1810750,"","","All tests which use a direct serialize() of a given input fail, if igbinary php module is running.

This is because the tests expect that the returned strings are serialized() with the standard php method, but they are in fact serialized by igbinary_serialize().

Todo: Fix all tests in VariableFrontend which use serialize() and take care of igbinary."
11660,TYPO3.Fluid,Feature,"",Closed,Should have,Universal tag attributes do not allow other javascript events than onclick,Nico de Haen,"",2011-05-06 04:37,"","",2010-12-23,"","",0,2010-12-23 02:13,"","",2593700,"","","It should be possible to add events like onblur, onfocus etc. without the need to write an new TagViewHelper. 
Or allow something like
<pre>
 eventHandler=""{onclick:'doThis()',onfocus:'doThat()'}""
</pre>

whish is more generic but has the disadvantage that it's not a valid HTML tag attribute.
"
11683,TYPO3.Flow,Task,"",Resolved,Should have,symlink() is not working on Windows XP,Irene Höppner,Robert Lemke,2011-08-05 11:05,Core,1.0 beta 1,2010-12-24,"","",100,2010-12-24 02:35,"","",68200,"","","That means, that the requirements since alpha14 are Windows Vista, Server 2008 or greater (http://de.php.net/manual/en/function.symlink.php).
Maybe this should be mentioned somewhere in the documentation? Or at some more distinguished place?
Happy Christmas! :-)
"
11740,TYPO3.Fluid,Feature,"",Closed,Should have,Paginate viewhelper should be possible to handle non-query-result objects,Armin Ruediger Vieweg,"",2012-05-03 09:34,Widgets,"",2010-12-27,"","",0,2010-12-27 05:08,"","",2593650,"","","Hello,

sometimes it is necessary to use an object storage or an array instead of an query result. If this is the case, it is not possible to use the default paginate viewhelper anymore, cause it is requiering a _Tx_Extbase_Persistence_QueryResultInterface_.

I've copied the widget and changed it to work with array. This is my *indexAction* of *PaginateController*:
<pre>
	public function indexAction($currentPage = 1) {
		// set current page
		$this->currentPage = (integer)$currentPage;
		if ($this->currentPage < 1) {
			$this->currentPage = 1;
		} elseif ($this->currentPage > $this->numberOfPages) {
			$this->currentPage = $this->numberOfPages;
		}

		$i = 0;
		$itemsPerPage = (integer)$this->configuration['itemsPerPage'];
		$modifiedObjects = array();
		$indexMin = $itemsPerPage * ($this->currentPage - 1);
		$indexMax = $itemsPerPage * $this->currentPage - 1;

		foreach ($this->objects as $object) {
			if ($i >= $indexMin && $i <= $indexMax ) {
				$modifiedObjects[] = $object;
			}
			$i++;
		}

		$this->view->assign('contentArguments', array(
			$this->widgetConfiguration['as'] => $modifiedObjects
		));
		$this->view->assign('configuration', $this->configuration);
		$this->view->assign('pagination', $this->buildPagination());
	}
</pre>

Of cause you would have to remove the requirement of _Tx_Extbase_Persistence_QueryResultInterface_ in *PaginateViewHelper* (Line 76 and 71) and *PaginateController* (Line 34) too.

This example is for arrays only, but if you make a check of the objecttype you can consolidate the support of queryResults (current) and arrays (this code example).

And it is relatively less work."
11749,TYPO3.Flow,Bug,"",Closed,Should have,to long database tablenames,Alexander Wende,Karsten Dambekalns,2011-03-21 07:01,Persistence,1.0 beta 1,2010-12-27,"","",0,2010-12-27 14:45,"","",1810700,"","","Hi,
I work in some projects with extbase and now I have a problem with the Flow3 conversion - so I post it in the Flow3 bugtracker.
In one of the projects I work with a complex domainmodell with many objects. 
The objects are named in german because it doesn't make sense to translate technicals terms.
In some cases the name of the mysql tables is too long. MySQL tablenames haves a limitation of 64 characters. But this is not only a MySQL problem. Oracle tablenames has to be shorter then 31 characters.
Because of the flow3 conversion of tablenames this is a generell problem. But if flow3 should be indepentend of the uses database this problem should be solved. With extbase I change the mapping manual, but that's not very nice.
A simple solution would be to use a hash value instead of the name of the model to create database tablenames. The disadvantage would be that the clearness get lost.

Greetings
Alex"
