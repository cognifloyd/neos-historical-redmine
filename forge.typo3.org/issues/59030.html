<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/59030 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 23:38:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Task #59030: Explain &#39;trustedHostsPattern&#39; configuration option - Security Guide - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/59030.atom" rel="alternate" title="Security Guide - Task #59030: Explain 'trustedHostsPattern' configuration option" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 current sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/search" accesskey="4" style="">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>Security Guide</h1>
        <div id="quicklinks"></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/team-doc-infrastructure" class="level-1 sorting-0">ReStructured Text Infrastructure</a><a href="../../external.html?link=https://forge.typo3.org/projects/documentation-whatsnew" class="level-1 sorting-0">TYPO3 CMS - What's New</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3org-wiki" class="level-1 sorting-0">wiki.typo3.org</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-documentation" class="level-1 current sorting-15">TYPO3 CMS Documentation</a><select onchange="window.location.href='/projects/'+this.value"><option value="extensions">- Select Subproject-</option><option  value="extension-examples">Core Documentation Examples</option><option  value="book_extbase_fluid">Extbase Book Translation</option><option  value="typo3cms-doc-extbase">Extbase Guide</option><option  value="typo3cms-doc-file-abstraction-layer">FAL Documentation</option><option  value="typo3cms-doc-getting-started">Getting Started</option><option  value="typo3cms-doc-installation">Installation and Upgrade Guide</option><option  value="typo3cms-doc-frontend-localization">Localization Guide</option><option  value="typo3cms-doc-maintenance">Maintenance Guide</option><option  value="typo3cms-doc-official-extension-template">Official Doc Extension Template</option><option  value="typo3cms-doc-official-template">Official Doc Templates</option><option selected="selected" value="typo3cms-doc-security">Security Guide</option><option  value="typo3cms-doc-tca">TCA Reference</option><option  value="typo3cms-doc-templating">Templating Tutorial</option><option  value="doc_tut_templating">Templating Tutorial (Files)</option><option  value="typo3cms-doc-skinning">TYPO3 Skinning Reference</option><option  value="typo3cms-doc-editors">TYPO3 Tutorial for Editors</option><option  value="typo3cms-doc-typoscript-45-minutes">TypoScript in 45 Minutes</option><option  value="typo3cms-doc-core-api">Core APIs</option><option  value="typo3cms-doc-coding-guidelines">Coding Guidelines</option><option  value="typo3cms-doc-inside-typo3">Inside TYPO3</option><option  value="typo3cms-doc-typo3-services">TYPO3 Services</option><option  value="typo3cms-doc-typoscript-syntax">TypoScript Syntax</option><option  value="typo3cms-doc-tsconfig">TSconfig</option><option  value="typo3cms-doc-typoscript">TypoScript Reference (TSref)</option></select>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=204" class="query">Recently modified</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/issues?query_id=550" class="query">Tasks for 1.0.7 release</a>



  
    <div id="watchers">
      

<h3>Watchers (3)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/2016">Hartmut Steglich</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/3743">Thomas Kieslich</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/3251">Dirk Klimpel</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-59030-watcher"></span>


</div>


<h2>Task #59030</h2>

<div class="issue status-9 priority-2 closed child details">
  

  

<div class="subject">
<div><p><a href="60744.html" class="issue status-9 priority-2 closed parent">Task #60744</a>: Raise version of TYPO3 Security Guide to 1.0.6</p><div><h3>Explain &#39;trustedHostsPattern&#39; configuration option</h3></div></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-05-22" title="2014-05-22 14:38">about 1 year</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-04" title="2014-08-04 13:59">12 months</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Closed</td>
    <th class="start-date">Start date:</th><td class="start-date">2014-05-22</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to"><a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a></td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent">100%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">Guidelines for Integrators</td>
    
    <th></th>
    <td></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../../external.html?link=https://forge.typo3.org/versions/2800">1.0.6</a></td>
    
    <th class="estimated-hours">Estimated time:</th><td class="estimated-hours">1.00 hour</td>
    
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>In TYPO3 CMS 6.2.3, a new configuration option has been introduced:</p>


<pre>$GLOBALS['TYPO3_CONF_VARS']['SYS']['trustedHostsPattern']</pre>

	<p>This option can contain either the value "SERVER_NAME" or a regular expression pattern that matches all host names that are considered trustworthy for the particular TYPO3 installation. "SERVER_NAME" is the default value shipped with the above mentioned TYPO3 versions. With this option value in effect, TYPO3 checks the currently submitted host-header against the SERVER_NAME variable.</p>


	<p><strong>Further details:</strong><br /><a class="external" href="../../external.html?link=http://typo3.org/teams/security/security-bulletins/typo3-core/typo3-core-sa-2014-001/">http://typo3.org/teams/security/security-bulletins/typo3-core/typo3-core-sa-2014-001/</a></p>


	<p>And discussions in the following thread (<strong>Core mailing list</strong>):<br /><a class="external" href="../../external.html?link=http://lists.typo3.org/pipermail/typo3-team-core/2014-May/055815.html">http://lists.typo3.org/pipermail/typo3-team-core/2014-May/055815.html</a></p>


	<p>The task is to determine, if it is worth to explain the 'trustedHostsPattern' setting in the Security Guide (e.g. outline, what you should or should not configure to achieve a secure TYPO3 setup) - and possibly extend the Security Guide accordingly.</p>
  </div>

<div class="attachments">

<p><a href="../../external.html?link=https://forge.typo3.org/attachments/download/27289/task59030-1.patch" class="icon icon-attachment">task59030-1.patch</a>  
    <a href="../../external.html?link=https://forge.typo3.org/attachments/27289/task59030-1.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a>
  
  
  <span class="size">(1.5 kB)</span>
  
  
    <span class="author">Michael Schams, 2014-08-02 14:32</span>
  
  </p>

<p><a href="../../external.html?link=https://forge.typo3.org/attachments/download/27298/task59030-2.patch" class="icon icon-attachment">task59030-2.patch</a>  
    <a href="../../external.html?link=https://forge.typo3.org/attachments/27298/task59030-2.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a>
  
  
  <span class="size">(1.8 kB)</span>
  
  
    <span class="author">Michael Schams, 2014-08-04 11:53</span>
  
  </p>

</div>








</div>




<div id="history">
<h3>History</h3>

  <div id="change-218046" class="journal has-notes">
    <h4><a href="59030.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/102">Jo Hasenau</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-05-22" title="2014-05-22 15:13">about 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-218046-notes"><p>After upgrading the TYPO3 sources we ran into "Exception thrown without a stack frame blah" without any additional info.</p>


	<p>Frontend and backend are running on NGINX behind an NGINX based HA-Proxy and the domains are configured to be running on different ports than default.<br />So the default setting SERVER_NAME just broke any TYPO3 instance completely and we just found out by accident, what the problem is.</p>


	<p>The "accident" was a redirect which is activated for URLs without a trailing slash and it redirects from<br /><pre>
blah.domain.com/typo3
</pre><br />to<br /><pre>
blah.domain.tld:12345/typo3/
</pre><br />The latter was running smoothly, which lead us to the actual problem.</p>


	<p>Setting the pattern to<br /><pre>
.*\.domain\.tld:*
</pre><br />finally solved the problem.</p></div>
  </div>
  

  <div id="change-218090" class="journal has-notes">
    <h4><a href="59030.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/236">Chris topher</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-05-22" title="2014-05-22 20:46">about 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-218090-notes"><p>Thanks for creating this issue so quickly, Michael!</p>


<blockquote>

	<p>The task is to determine, if it is worth to explain the 'trustedHostsPattern' setting in the Security Guide</p>


</blockquote>

	<p>I don't have details on what to document currently, but I agree: <em>I</em> also thought it would make sense to add a few notes about this setting to the docs.</p></div>
  </div>
  

  <div id="change-218129" class="journal has-notes">
    <h4><a href="59030.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3743">Thomas Kieslich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-05-23" title="2014-05-23 11:12">about 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-218129-notes"><p>for multi Domain Setup you can use regex style</p>


	<p>'trustedHostsPattern' => '.*\.example|testing\.org|com:*',</p></div>
  </div>
  

  <div id="change-221526" class="journal has-details">
    <h4><a href="59030.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-06-23" title="2014-06-23 14:07">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Accepted</i></li>
      
       <li><strong>Assigned To</strong> set to <i>Michael Schams</i></li>
      
       <li><strong>Target version</strong> set to <i>1.0.6</i></li>
      
       <li><strong>Estimated time</strong> set to <i>1.00</i></li>
      
       <li><strong>Remaining (hours)</strong> set to <i>1.0</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-221530" class="journal has-details">
    <h4><a href="59030.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-06-23" title="2014-06-23 14:13">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Category</strong> set to <i>Guidelines for Integrators</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-226129" class="journal has-notes has-details">
    <h4><a href="59030.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/329">Francois Suter</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-01" title="2014-08-01 12:18">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Remaining (hours)</strong> deleted (<strike><i>1.0</i></strike>)</li>
      
    </ul>
    
    <div class="wiki" id="journal-226129-notes"><p>Hey Michael, just checking. Any plan for publishing this one (and version 1.0.6 in general)?</p>


	<p>BTW don't forget that the manuals are now on Github ;-)</p></div>
  </div>
  

  <div id="change-226278" class="journal has-notes has-details">
    <h4><a href="59030.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-02" title="2014-08-02 14:31">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Accepted</i> to <i>Under Review</i></li>
      
       <li><strong>% Done</strong> changed from <i>0</i> to <i>80</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-226278-notes"><p>My suggestion:</p>


<pre>
TYPO3 uses the HTTP header "Host:" to generate absolute URLs in several
places such as 404 handling, http(s) enforcement, password reset links
and many more. Since the host header itself is provided by the client,
it can be forged to any value, even in a name based virtual hosts
environment.

The "trustedHostsPattern" configuration option can contain either the
value *SERVER_NAME* or a regular expression pattern that matches all
host names that are considered trustworthy for the particular TYPO3
installation. "SERVER_NAME" is the default value and with this option
value in effect, TYPO3 checks the currently submitted host-header
against the SERVER_NAME variable. Please see security bulletin
TYPO3-CORE-SA-2014-001 for further details about specific setups.

The PHP variable reads: $TYPO3\_CONF\_VARS['SYS']['trustedHostsPattern']
</pre>

	<p>Requires review from Security Team (Helmut?).</p></div>
  </div>
  

  <div id="change-226279" class="journal has-details">
    <h4><a href="59030.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-02" title="2014-08-02 14:32">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>File</strong> <a href="../../external.html?link=https://forge.typo3.org/attachments/download/27289/task59030-1.patch">task59030-1.patch</a><a href="../../external.html?link=https://forge.typo3.org/attachments/27289/task59030-1.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a> added</li>
      
       <li><strong>File</strong> <a href="../../external.html?link=https://forge.typo3.org/attachments/download/27289/task59030-1.patch">task59030-1.patch</a><a href="../../external.html?link=https://forge.typo3.org/attachments/27289/task59030-1.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a> added</li>
      
    </ul>
    
    
  </div>
  

  <div id="change-226282" class="journal has-details">
    <h4><a href="59030.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-02" title="2014-08-02 14:43">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Parent task</strong> set to <i>#60744</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-226392" class="journal has-notes has-details">
    <h4><a href="59030.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-04" title="2014-08-04 11:53">12 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>File</strong> <a href="../../external.html?link=https://forge.typo3.org/attachments/download/27298/task59030-2.patch">task59030-2.patch</a><a href="../../external.html?link=https://forge.typo3.org/attachments/27298/task59030-2.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a> added</li>
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Needs Feedback</i></li>
      
       <li><strong>Assigned To</strong> changed from <i>Michael Schams</i> to <i>Helmut Hummel</i></li>
      
       <li><strong>File</strong> <a href="../../external.html?link=https://forge.typo3.org/attachments/download/27298/task59030-2.patch">task59030-2.patch</a><a href="../../external.html?link=https://forge.typo3.org/attachments/27298/task59030-2.patch"><img alt="Magnifier" src="../images/magnifierfaba.png?1437165176" /></a> added</li>
      
    </ul>
    
    <div class="wiki" id="journal-226392-notes"><p>Updated wording based on a suggestion by Helmut:</p>


<pre>
TYPO3 uses the HTTP header "Host:" to generate absolute URLs in several
places such as 404 handling, http(s) enforcement, password reset links
and many more. Since the host header itself is provided by the client,
it can be forged to any value, even in a name based virtual hosts
environment.

The "trustedHostsPattern" configuration option can contain either the
value *SERVER_NAME* or a regular expression pattern that matches all
host names that are considered trustworthy for the particular TYPO3
installation. "SERVER_NAME" is the default value and with this option
value in effect, TYPO3 checks the currently submitted host-header
against the SERVER_NAME variable. Please see security bulletin
`TYPO3-CORE-SA-2014-001 &lt;http://typo3.org/teams/security/security-bulletins/typo3-core/typo3-core-sa-2014-001/&gt;`_
for further details about specific setups.

If the "Host:" header also contains a non-standard port, the
configuration must include this value, too. This is especially important
for the default value "SERVER_NAME" as provided ports are checked
against SERVER_PORT which fails in some more complex load balancing
or SSL termination scenarios.

The PHP variable reads: $TYPO3\_CONF\_VARS['SYS']['trustedHostsPattern']
</pre>

	<p>Requires review from Security Team (Helmut?).</p></div>
  </div>
  

  <div id="change-226396" class="journal has-notes">
    <h4><a href="59030.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-04" title="2014-08-04 13:03">12 months</a> ago</h4>

    
    <div class="wiki" id="journal-226396-notes"><p>looks good now, thanks!</p></div>
  </div>
  

  <div id="change-226404" class="journal has-notes has-details">
    <h4><a href="59030.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3950">Michael Schams</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-doc-security/activity?from=2014-08-04" title="2014-08-04 13:59">12 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Needs Feedback</i> to <i>Closed</i></li>
      
       <li><strong>Assigned To</strong> changed from <i>Helmut Hummel</i> to <i>Michael Schams</i></li>
      
       <li><strong>% Done</strong> changed from <i>80</i> to <i>100</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-226404-notes"><p>TYPO3 Security Guide v1.0.6 published - closing ticket as resolved.</p></div>
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-59030-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/59030.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="59030.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/59030 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 23:38:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
