<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/27088 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 21:58:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Bug #27088: initializeObject() is called too early when reconstructing entities - TYPO3.Flow - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

#header #right-area, #header #right-area h1, #header #right-area a {
  color:transparent;
}

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/27088.atom" rel="alternate" title="TYPO3.Flow - Bug #27088: initializeObject() is called too early when reconstructing entities" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 current sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="background-image:url(../headerimages/16.jpg);">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/search" accesskey="4" style="color:transparent">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>TYPO3.Flow</h1>
        <div id="quicklinks"></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/flow3-distribution-base" class="level-1 current sorting-0">TYPO3 Flow Base Distribution</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-eel" class="level-2 sorting-0">TYPO3.Eel</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow" class="level-2 current sorting-0">TYPO3.Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid" class="level-2 sorting-0">TYPO3.Fluid</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-kickstart" class="level-2 sorting-0">TYPO3.Kickstart</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-welcome" class="level-2 sorting-0">TYPO3.Welcome</a><a href="../../external.html?link=https://forge.typo3.org/projects/packages" class="level-1 sorting-10">Packages</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3-apps" class="level-1 sorting-30">Applications</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=375" class="query">Open documentation issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=204" class="query">Recently modified</a>



  
    <div id="watchers">
      

<h3>Watchers (5)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/2512">Lienhart Woitok</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/43">Andreas Wolf</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/3947">Thomas Kirst</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/1295">Dominique Feyer</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-27088-watcher"></span>


</div>


<h2>Bug #27088</h2>

<div class="issue status-5 priority-2 details">
  

  

<div class="subject">
<div><h3>initializeObject() is called too early when reconstructing entities</h3></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/19">Andreas Förthner</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-05-27" title="2011-05-27 15:40">about 4 years</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-04-08" title="2013-04-08 17:53">over 2 years</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">On Hold</td>
    <th class="start-date">Start date:</th><td class="start-date">2011-05-27</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to">-</td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="todo" style="width: 100%;"></td></tr></table><p class="pourcent">0%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">Object</td>
    
    <th></th>
    <td></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version">-</td>
    
</tr>
<tr>
	<th>PHP Version:</th><td></td>
	<th>Complexity:</th><td></td>
</tr>
<tr>
	<th>Has patch:</th><td>No</td>
	<th>Affected Flow version:</th><td>FLOW3 1.0.0</td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>As it is called in __wakeup(), Doctrine did not yet inject the persisted properties, this is not what we want. The object should be fully initialized (DI and Persistence) when initializeObject() ist called. The same is true for objects fetched from persistence.</p>
  </div>









</div>




<div id="history">
<h3>History</h3>

  <div id="change-76981" class="journal has-details">
    <h4><a href="27088.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-06-17" title="2011-06-17 09:34">about 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Assigned To</strong> set to <i>Karsten Dambekalns</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-77981" class="journal has-notes has-details">
    <h4><a href="27088.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-06-28" title="2011-06-28 14:02">about 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Needs Feedback</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-77981-notes"><p>Well, looking at one of the proxies it seems the data should be loaded before the <code>initializeObject()</code> call:</p>


<pre>
    /**
     * Fetches the identifier from the set content object. If that
     * is not using automatically introduced UUIDs by FLOW3 it tries
     * to call persistAll() and fetch the identifier again. If it still
     * fails, an exception is thrown.
     *
     * @return void
     */
    public function initializeObject()
    {
        $this-&gt;__load();
        return parent::initializeObject();
    }
</pre>

	<p>Can you provide sample code that shows the error?</p></div>
  </div>
  

  <div id="change-77982" class="journal has-notes">
    <h4><a href="27088.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-06-28" title="2011-06-28 14:04">about 4 years</a> ago</h4>

    
    <div class="wiki" id="journal-77982-notes"><p>The above is the Doctrine proxy, here is the FLOW3 proxy:</p>


<pre>
    /**
     * Autogenerated Proxy Method
     */
     public function __wakeup() {
        $this-&gt;FLOW3_AOP_Proxy_buildMethodsAndAdvicesArray();

    if (property_exists($this, 'FLOW3_Persistence_RelatedEntities') &#38;&#38; is_array($this-&gt;FLOW3_Persistence_RelatedEntities)) {
        $persistenceManager = \F3\FLOW3\Core\Bootstrap::$staticObjectManager-&gt;get('F3\FLOW3\Persistence\PersistenceManagerInterface');
        foreach ($this-&gt;FLOW3_Persistence_RelatedEntities as $entityInformation) {
            $this-&gt;$entityInformation['propertyName'] = $persistenceManager-&gt;getObjectByIdentifier($entityInformation['identifier'], $entityInformation['entityType']);
        }
        unset($this-&gt;FLOW3_Persistence_RelatedEntities);
    }
                $this-&gt;FLOW3_Proxy_injectProperties();
        $result = NULL;
        if (is_callable('parent::__wakeup')) parent::__wakeup();

        $this-&gt;initializeObject(2);
        return $result;
    }
</pre></div>
  </div>
  

  <div id="change-82077" class="journal has-notes has-details">
    <h4><a href="27088.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/11">Sebastian Kurfuerst</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-08-04" title="2011-08-04 08:18">almost 5 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Priority</strong> changed from <i>Must have</i> to <i>Should have</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-82077-notes"><p>@Andi: can you provide feedback here? Else, I'll defer it to beta2...</p></div>
  </div>
  

  <div id="change-82158" class="journal has-notes">
    <h4><a href="27088.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2512">Lienhart Woitok</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-08-04" title="2011-08-04 10:54">almost 5 years</a> ago</h4>

    
    <div class="wiki" id="journal-82158-notes"><p>At least one case where this happens is when reconstituting objects from db. Not with lazy loading, but completely create them at once. Doctrine creates the class by unserializing an empty object of the entity class and then fills it with the properties. But unserialize does call __wakeup() and therefore initializeObject(). I think this changed at some point in Doctrine, when Andi reported this I believe Doctrine unserialized every new instance,  but in current version I find that the unserialized instance is cached in Doctrine (which might lead to even more unpredictable behavior in this context). Hope this clears it up a bit.</p>


	<p>Currently, I work around this by defining initializeObject() as a PostLoad lifecycle callback and check that everything I need is there before doing anything.</p></div>
  </div>
  

  <div id="change-84087" class="journal has-details">
    <h4><a href="27088.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/8">Robert Lemke</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-08-24" title="2011-08-24 10:24">almost 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0 beta 1</i> to <i>1.0 beta 2</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-85787" class="journal has-details">
    <h4><a href="27088.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/8">Robert Lemke</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-09-09" title="2011-09-09 15:17">almost 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0 beta 2</i> to <i>1.0.0</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-88775" class="journal has-details">
    <h4><a href="27088.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-09-30" title="2011-09-30 10:19">almost 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Assigned To</strong> deleted (<strike><i>Karsten Dambekalns</i></strike>)</li>
      
    </ul>
    
    
  </div>
  

  <div id="change-91315" class="journal has-details">
    <h4><a href="27088.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-10-20" title="2011-10-20 01:46">almost 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.0</i> to <i>1.0.1</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-91514" class="journal has-details">
    <h4><a href="27088.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-10-21" title="2011-10-21 13:20">almost 4 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Affected Flow version</strong> set to <i>FLOW3 1.0.0</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-94717" class="journal has-details">
    <h4><a href="27088.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-11-22" title="2011-11-22 12:48">over 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.1</i> to <i>1.0.2</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-97906" class="journal has-details">
    <h4><a href="27088.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2011-12-22" title="2011-12-22 08:51">over 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.2</i> to <i>1.0.3</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-105900" class="journal has-details">
    <h4><a href="27088.html#note-13" class="journal-link">#13</a>
    
    <a name="note-13"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2012-03-07" title="2012-03-07 18:52">over 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.3</i> to <i>1.0.4</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-113016" class="journal has-details">
    <h4><a href="27088.html#note-14" class="journal-link">#14</a>
    
    <a name="note-14"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2012-04-18" title="2012-04-18 22:49">over 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.4</i> to <i>1.0.5</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-119042" class="journal has-details">
    <h4><a href="27088.html#note-15" class="journal-link">#15</a>
    
    <a name="note-15"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2012-06-05" title="2012-06-05 21:20">about 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> changed from <i>1.0.5</i> to <i>1.1 RC1</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-121343" class="journal has-details">
    <h4><a href="27088.html#note-16" class="journal-link">#16</a>
    
    <a name="note-16"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/10">Karsten Dambekalns</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2012-06-25" title="2012-06-25 22:15">about 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Needs Feedback</i> to <i>On Hold</i></li>
      
       <li><strong>Target version</strong> deleted (<strike><i>1.1 RC1</i></strike>)</li>
      
       <li><strong>Has patch</strong> set to <i>No</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-158839" class="journal has-notes">
    <h4><a href="27088.html#note-17" class="journal-link">#17</a>
    
    <a name="note-17"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2751">Adrian Föder</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-04-08" title="2013-04-08 17:53">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-158839-notes"><p>Also stumbled upon that behavior currently.<br />Note <a href="5.html" class="issue status-9 priority-2 closed" title="Remove use of DIRECTORY_SEPARATOR (Closed)">#5</a> boils it down; in \Doctrine\ORM\Mapping\ClassMetadataInfo::newInstance you can find</p>


<pre><code class="php syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span>    <span class="comment">/**</span>
<span class="line-numbers"> 2</span><span class="comment">     * Creates a new instance of the mapped class, without invoking the constructor.</span>
<span class="line-numbers"> 3</span><span class="comment">     *</span>
<span class="line-numbers"> 4</span><span class="comment">     * @return object</span>
<span class="line-numbers"> 5</span><span class="comment">     */</span>
<span class="line-numbers"> 6</span>    <span class="keyword">public</span> <span class="keyword">function</span> <span class="function">newInstance</span>()
<span class="line-numbers"> 7</span>    {
<span class="line-numbers"> 8</span>        <span class="keyword">if</span> (<span class="local-variable">$this</span>-&gt;_prototype === <span class="predefined-constant">null</span>) {
<span class="line-numbers"> 9</span>            <span class="local-variable">$this</span>-&gt;_prototype = <span class="predefined">unserialize</span>(<span class="predefined">sprintf</span>(<span class="string"><span class="delimiter">'</span><span class="content">O:%d:&quot;%s&quot;:0:{}</span><span class="delimiter">'</span></span>, <span class="predefined">strlen</span>(<span class="local-variable">$this</span>-&gt;name), <span class="local-variable">$this</span>-&gt;name));
<span class="line-numbers"><strong>10</strong></span>        }
<span class="line-numbers">11</span>
<span class="line-numbers">12</span>        <span class="keyword">return</span> <span class="keyword">clone</span> <span class="local-variable">$this</span>-&gt;_prototype;
<span class="line-numbers">13</span>    }
</span></code></pre>

	<p>Line 9 in that example calls, e.g., <code>unserialize("O:52:"Acme\Acme\Domain\Model\Foo\Bar":0:{}")</code>, which invokes __wakeup and immediately after that, <code>initializeObject()</code>, but with obviously no data to work on (see what has been unserialized...)</p></div>
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-27088-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/27088.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="27088.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/27088 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 21:58:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
