<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/53046 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:14:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Task #53046: Reduce generated code of ContentElementWrappingService - TYPO3.Neos - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/53046.atom" rel="alternate" title="TYPO3.Neos - Task #53046: Reduce generated code of ContentElementWrappingService" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 current sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/search" accesskey="4" style="">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>TYPO3.Neos</h1>
        <div id="quicklinks"></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos-distribution-base" class="level-1 current sorting-0">Base Distribution</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-form" class="level-2 sorting-0">TYPO3.Form</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-imagine" class="level-2 sorting-0">TYPO3.Imagine</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-media" class="level-2 sorting-0">TYPO3.Media</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos" class="level-2 current sorting-0">TYPO3.Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos-nodetypes" class="level-2 sorting-0">TYPO3.Neos.NodeTypes</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-party" class="level-2 sorting-0">TYPO3.Party</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-setup" class="level-2 sorting-0">TYPO3.Setup</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-sitekickstarter" class="level-2 sorting-0">TYPO3.SiteKickstarter</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-twitter-bootstrap" class="level-2 sorting-0">TYPO3.Twitter.Bootstrap</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neoscr" class="level-2 sorting-0">TYPO3.TYPO3CR</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-typoscript" class="level-2 sorting-0">TYPO3.TypoScript</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos-coordination" class="level-1 sorting-0">Coordination Group</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos-website-communication" class="level-1 sorting-0">Website and Communication</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/issues?query_id=204" class="query">Recently modified</a>



  
    <div id="watchers">
      

<h3>Watchers (1)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/4460">Markus Goldbeck</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-53046-watcher"></span>


</div>


<h2>Task #53046</h2>

<div class="issue status-7 priority-2 closed parent details">
  

  

<div class="subject">
<div><h3>Reduce generated code of ContentElementWrappingService</h3></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-10-22" title="2013-10-22 21:47">almost 2 years</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-12-04" title="2013-12-04 18:43">over 1 year</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Resolved</td>
    <th class="start-date">Start date:</th><td class="start-date">2013-11-27</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to"><a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a></td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent">100%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">Services</td>
    
    <th></th>
    <td></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../../external.html?link=https://forge.typo3.org/versions/2598">Base Distribution - 1.0 beta 2</a></td>
    
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Rendering content elements currently creates a whole lot of attributes and additional wrapping elements. Especially the latter is an issue because it has an effect on the rendering.</p>


	<a name="Example-of-the-rendering-of-a-simple-headline"></a>
<h2 >Example of the rendering of a simple headline:<a href="#Example-of-the-rendering-of-a-simple-headline" class="wiki-anchor">&para;</a></h2>


	<a name="Current-output-in-live-workspace"></a>
<h3 >Current output in "live" workspace:<a href="#Current-output-in-live-workspace" class="wiki-anchor">&para;</a></h3>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentcollection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentelement typo3-neos-nodetypes-headline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">c8f734d31-bd9f-4487-bf4d-033ea5c52a4d</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">3</span>        <span class="tag">&lt;div&gt;</span>
<span class="line-numbers">4</span>            <span class="tag">&lt;h1&gt;</span>Some headline<span class="tag">&lt;/h1&gt;</span>
<span class="line-numbers">5</span>        <span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">6</span>    <span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">7</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre>

	<a name="Expected-output-in-live-workspace"></a>
<h3 >Expected output in "live" workspace:<a href="#Expected-output-in-live-workspace" class="wiki-anchor">&para;</a></h3>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;h1&gt;</span>Some headline<span class="tag">&lt;/h1&gt;</span>
</span></code><br /></pre>

	<a name="Current-output-in-editor-workspace"></a>
<h3 >Current output in "editor" workspace:<a href="#Current-output-in-editor-workspace" class="wiki-anchor">&para;</a></h3>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentcollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">about</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/sites/neosdemotypo3org/home/main@user-admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">typeof</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:TYPO3.Neos:ContentCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:content-collection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_typoscript-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:Page</span><span class="entity">&amp;gt;</span><span class="content">/body</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Template</span><span class="entity">&amp;gt;</span><span class="content">/content/main</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCollection</span><span class="entity">&amp;gt;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-__workspacename</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">user-admin</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentelement typo3-neos-nodetypes-headline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">c8f734d31-bd9f-4487-bf4d-033ea5c52a4d</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">typeof</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:TYPO3.Neos.NodeTypes:Headline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">about</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/sites/neosdemotypo3org/home/main/headline1@user-admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">tabindex</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-__workspacename</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">user-admin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_typoscript-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:Page</span><span class="entity">&amp;gt;</span><span class="content">/body</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Template</span><span class="entity">&amp;gt;</span><span class="content">/content/main</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCollection</span><span class="entity">&amp;gt;</span><span class="content">/itemRenderer</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCase</span><span class="entity">&amp;gt;</span><span class="content">/default</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Matcher</span><span class="entity">&amp;gt;</span><span class="content">/element</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos.NodeTypes:Headline</span><span class="entity">&amp;gt;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_removed</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neosdatatype-_removed</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:boolean</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_hidden</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neosdatatype-_hidden</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:boolean</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_hidden-before-date-time</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neosdatatype-_hidden-before-date-time</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-_hidden-after-date-time</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neosdatatype-_hidden-after-date-time</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd:date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;lt;</span><span class="content">h1</span><span class="entity">&amp;gt;</span><span class="content">I'm here to be defaced ;-)</span><span class="entity">&amp;lt;</span><span class="content">/h1</span><span class="entity">&amp;gt;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-__nodetype</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TYPO3.Neos.NodeTypes:Headline</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">3</span>        <span class="tag">&lt;div</span> <span class="attribute-name">property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-inline-editable</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;h1&gt;</span>Some headline<span class="tag">&lt;/h1&gt;</span><span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">4</span>    <span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">5</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre>

	<a name="Expected-output-in-editor-workspace-exemplary"></a>
<h3 >Expected output in "editor" workspace (exemplary):<a href="#Expected-output-in-editor-workspace-exemplary" class="wiki-anchor">&para;</a></h3>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos-contentcollection</span> <span class="attribute-name">data-neos-node-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:TYPO3.Neos:ContentCollection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">neos-node-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/sites/neosdemotypo3org/home/main</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-typoscript-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:Page</span><span class="entity">&amp;gt;</span><span class="content">/body</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Template</span><span class="entity">&amp;gt;</span><span class="content">/content/main</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCollection</span><span class="entity">&amp;gt;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-workspace-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">user-admin</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>    <span class="tag">&lt;h1</span> <span class="attribute-name">data-neos-node-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:TYPO3.Neos.NodeTypes:Headline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">neos-node-property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">neos-node-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/sites/neosdemotypo3org/home/main/headline1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-typoscript-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:Page</span><span class="entity">&amp;gt;</span><span class="content">/body</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Template</span><span class="entity">&amp;gt;</span><span class="content">/content/main</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCollection</span><span class="entity">&amp;gt;</span><span class="content">/itemRenderer</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos:ContentCase</span><span class="entity">&amp;gt;</span><span class="content">/default</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.TypoScript:Matcher</span><span class="entity">&amp;gt;</span><span class="content">/element</span><span class="entity">&amp;lt;</span><span class="content">TYPO3.Neos.NodeTypes:Headline</span><span class="entity">&amp;gt;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">tabindex</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Some headline<span class="tag">&lt;/h1&gt;</span>
<span class="line-numbers">3</span><span class="tag">&lt;/neos-contentcollection&gt;</span>
</span></code><br /></pre>

	<p>h2.General ideas (to be discussed!):</p>


	<ul>
	<li>Reduce nesting levels: If the content element contains a root element, modify it instead of adding an additional wrapping tag</li>
		<li>If we need to add a wrapping element, we could use non-existing elements prefixed with <code>neos-</code> (e.g. <code>neos-contentelement</code>). This is better to distinguish for the user and it is less immersive because browsers (should) ignore unknown elements.</li>
		<li>only use <code>data-neos-</code>-prefixed attributes for consistency. They can be used in CSS selectors, too.</li>
		<li>No need to use underscores in attribute-names (e.g. <code>data-neosdatatype-_hidden</code> as everything prefixed with <code>neos-</code> should be considered "private" </li>
		<li>Only add attributes for non-defaults (e.g. <code>data-neos-removed="false"</code> can be omitted)</li>
	</ul>
  </div>






<hr />
<div id="issue_tree">
<div class="contextual">
  
</div>
<p><strong>Subtasks</strong></p>
<form><table class="list issues"><tr class="issue issue-54016 hascontextmenu "><td class="checkbox"><input name="ids[]" type="checkbox" value="54016" /></td><td class="subject"><a href="54016.html" class="issue status-7 priority-2 closed child">Task #54016</a>: Introduce Content TypoScript object</td><td>Resolved</td><td><a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a></td><td><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent"></p></td></tr><tr class="issue issue-54137 hascontextmenu "><td class="checkbox"><input name="ids[]" type="checkbox" value="54137" /></td><td class="subject"><a href="54137.html" class="issue status-7 priority-2 closed child">Task #54137</a>: Deprecate ContentElement ViewHelper</td><td>Resolved</td><td><a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a></td><td><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent"></p></td></tr></table></form>
</div>




</div>


<div id="issue-changesets">
<h3>Associated revisions</h3>

    <div class="changeset odd">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/repository/revisions/3f69748e52134e9ee6aac212f7bf691a6ad468e9" title="Revision 3f69748e">Revision 3f69748e</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/316">Christopher Hlubek</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-11-11" title="2013-11-11 12:37">over 1 year</a> ago</span></p>
    <div class="wiki">
        <p>[FEATURE] Support tag name and attributes for ContentElementViewHelper</p>


	<p>This change extends the neos:contentElement view helper that is used<br />to wrap nodes with RDFa and editing metadata.</p>


	<p>It adds a configurable tag name and registers universal tag attributes<br />to override all attributes of the wrapping tag from the view helper.</p>


	<p>This is the first step to reduce the generated code and nesting by<br />allowing more fine-grained control over the markup.</p>


	<p>Change-Id: Iadb881d9545d442b6816ec105c75ac62bd99cac2<br />Related: <a href="53046.html" class="issue status-7 priority-2 closed parent" title="Reduce generated code of ContentElementWrappingService (Resolved)">#53046</a><br />Reviewed-on: <a class="external" href="../../external.html?link=https://review.typo3.org/25174">https://review.typo3.org/25174</a><br />Reviewed-by: Christopher Hlubek<br />Tested-by: Christopher Hlubek<br />Reviewed-by: Aske Ertmann<br />Tested-by: Mr. Hudson</p>
    </div>
    </div>

    <div class="changeset even">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/repository/revisions/cf28fa9037a8f524da5cbb365fa18de0d9e3f515" title="Revision cf28fa90">Revision cf28fa90</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/316">Christopher Hlubek</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-11-11" title="2013-11-11 14:21">over 1 year</a> ago</span></p>
    <div class="wiki">
        <p>[!!!][FEATURE] Support custom tag name and attributes for ContentCollection</p>


	<p>This change adds new TypoScript properties to the ContentCollection<br />object to set the tagName and attributes of the generated tag that wraps<br />the collection.</p>


	<p>Example::</p>


	<pre><code>prototype(Acme.Demo:List) &lt; prototype(TYPO3.Neos:Template) {<br />        items = TYPO3.Neos:ContentCollection {<br />            nodePath = 'items'<br />            tagName = 'ul'<br />            attributes.class = 'my-list'<br />        }<br />    }</code></pre>


	<p>The TypoScript code will render the following HTML::</p>


	<pre><code>&amp;lt;ul class="neos-contentcollection my-list"&amp;gt;<br />        ...<br />    &amp;lt;/ul&amp;gt;</code></pre>


	<p>This is a breaking change as the "className" property for a custom class<br />name on the generated tag is removed. It has to be changed to the<br />"attributes.class" declaration.</p>


	<p>Change-Id: Ia006e962eaaafb35d4e362900b093e969c9ebb9d<br />Related: <a href="53046.html" class="issue status-7 priority-2 closed parent" title="Reduce generated code of ContentElementWrappingService (Resolved)">#53046</a><br />Reviewed-on: <a class="external" href="../../external.html?link=https://review.typo3.org/25179">https://review.typo3.org/25179</a><br />Tested-by: Christopher Hlubek<br />Tested-by: Mr. Hudson<br />Reviewed-by: Aske Ertmann<br />Reviewed-by: Rens Admiraal<br />Tested-by: Rens Admiraal<br />Reviewed-by: Christopher Hlubek</p>
    </div>
    </div>

    <div class="changeset odd">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/repository/revisions/e9415a10ab46009cbf8d9ec9740191b2548f382b" title="Revision e9415a10">Revision e9415a10</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-12-02" title="2013-12-02 09:39">over 1 year</a> ago</span></p>
    <div class="wiki">
        <p>[FEATURE] Improve contentElement.editable ViewHelper</p>


	<p>This improves the EditableViewHelper so that it is easier to use and<br />less error-prone.</p>


	<p>It mainly makes specification of the property value optional.<br />Before::</p>


	<pre><code>&amp;lt;neos:contentElement.editable property="propertyName"&amp;gt;
  {propertyName -&gt; f:format.raw()}<br /> &amp;lt;/neos:contentElement&amp;gt;</code></pre>


	<p>Now::</p>


	<pre><code>{neos:contentElement.editable(property: 'propertyName')}</code></pre>


	<p>Note: This change is fully backwards compatible because any child nodes<br />of this ViewHelper overrule the specified property argument.<br />It is however recommended not to set them as that can lead to unexpected<br />results. It is also recommended to use Fluid's inline syntax for better<br />readability and to make browsers render the placeholder when opening the<br />template file directly.</p>


	<p>Change-Id: I2e6e9035a85b58cd9f28f5f2f5b57b7631f64497<br />Related: <a href="53046.html" class="issue status-7 priority-2 closed parent" title="Reduce generated code of ContentElementWrappingService (Resolved)">#53046</a><br />Reviewed-on: <a class="external" href="../../external.html?link=https://review.typo3.org/25765">https://review.typo3.org/25765</a><br />Reviewed-by: Bastian Waidelich<br />Tested-by: Bastian Waidelich<br />Reviewed-by: Christopher Hlubek<br />Tested-by: Christopher Hlubek</p>
    </div>
    </div>


</div>



<div id="history">
<h3>History</h3>

  <div id="change-187823" class="journal has-notes">
    <h4><a href="53046.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-10-22" title="2013-10-22 21:51">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-187823-notes"><p>A quick and dirty (but working) example on how to replace the wrapping tag by modified attributes of the root element:<br /><pre>
<code class="php syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="keyword">function</span> <span class="function">wrapHtml</span>(<span class="local-variable">$html</span>, <span class="local-variable">$node</span>) {
<span class="line-numbers"> 2</span>    <span class="local-variable">$nodeAttributes</span> = <span class="predefined">sprintf</span>(<span class="string"><span class="delimiter">'</span><span class="content">data-neos-node-type=&quot;%s&quot; data-neos-node-identifier=&quot;%s&quot;</span><span class="delimiter">'</span></span>, <span class="local-variable">$node</span>-&gt;type, <span class="local-variable">$node</span>-&gt;identifier);
<span class="line-numbers"> 3</span>    <span class="local-variable">$rootTagName</span> = getHtmlRootTagName(<span class="local-variable">$html</span>);
<span class="line-numbers"> 4</span>    <span class="keyword">if</span> (<span class="local-variable">$rootTagName</span> !== <span class="predefined-constant">NULL</span>) {
<span class="line-numbers"> 5</span>        <span class="local-variable">$modifiedHtml</span> = <span class="predefined">preg_replace</span>(<span class="string"><span class="delimiter">'</span><span class="content">/&lt;(</span><span class="delimiter">'</span></span> . <span class="local-variable">$rootTagName</span> . <span class="string"><span class="delimiter">'</span><span class="content">)/xi</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">&lt;$1 </span><span class="delimiter">'</span></span> . <span class="local-variable">$nodeAttributes</span>, <span class="local-variable">$html</span>, <span class="integer">1</span>, <span class="local-variable">$numberOfReplacements</span>);
<span class="line-numbers"> 6</span>        <span class="keyword">if</span> (<span class="local-variable">$numberOfReplacements</span> === <span class="integer">1</span>) {
<span class="line-numbers"> 7</span>            <span class="keyword">return</span> <span class="local-variable">$modifiedHtml</span>;
<span class="line-numbers"> 8</span>        }
<span class="line-numbers"> 9</span>    }
<span class="line-numbers"><strong>10</strong></span>    <span class="keyword">return</span> <span class="predefined">sprintf</span>(<span class="string"><span class="delimiter">'</span><span class="content">&lt;neos-contentelement %s&gt;%s&lt;/neos-contentelement&gt;</span><span class="delimiter">'</span></span>, <span class="local-variable">$nodeAttributes</span>, <span class="local-variable">$html</span>);
<span class="line-numbers">11</span>}
<span class="line-numbers">12</span>
<span class="line-numbers">13</span><span class="keyword">function</span> <span class="function">getHtmlRootTagName</span>(<span class="local-variable">$html</span>) {
<span class="line-numbers">14</span>    <span class="local-variable">$domDocument</span> = <span class="keyword">new</span> \<span class="constant">DOMDocument</span>();
<span class="line-numbers">15</span>    <span class="comment">// ignore parsing errors</span>
<span class="line-numbers">16</span>    libxml_use_internal_errors(<span class="predefined-constant">TRUE</span>);
<span class="line-numbers">17</span>    <span class="local-variable">$domDocument</span>-&gt;loadHTML(<span class="local-variable">$html</span>);
<span class="line-numbers">18</span>    <span class="local-variable">$xPath</span> = <span class="keyword">new</span> \<span class="constant">DOMXPath</span>(<span class="local-variable">$domDocument</span>);
<span class="line-numbers">19</span>    <span class="local-variable">$rootElement</span> = <span class="local-variable">$xPath</span>-&gt;query(<span class="string"><span class="delimiter">'</span><span class="content">//html/body/*</span><span class="delimiter">'</span></span>);
<span class="line-numbers"><strong>20</strong></span>    <span class="keyword">if</span> (<span class="local-variable">$rootElement</span> === <span class="predefined-constant">FALSE</span> || <span class="local-variable">$rootElement</span>-&gt;length !== <span class="integer">1</span>) {
<span class="line-numbers">21</span>        <span class="keyword">return</span> <span class="predefined-constant">NULL</span>;
<span class="line-numbers">22</span>    }
<span class="line-numbers">23</span>    <span class="keyword">return</span> <span class="local-variable">$rootElement</span>-&gt;item(<span class="integer">0</span>)-&gt;nodeName;
<span class="line-numbers">24</span>}
<span class="line-numbers">25</span><span class="local-variable">$node</span> = <span class="keyword">new</span> \<span class="predefined-constant">stdClass</span>();
<span class="line-numbers">26</span><span class="local-variable">$node</span>-&gt;type = <span class="string"><span class="delimiter">'</span><span class="content">test</span><span class="delimiter">'</span></span>;
<span class="line-numbers">27</span><span class="local-variable">$node</span>-&gt;identifier = <span class="string"><span class="delimiter">'</span><span class="content">uuid</span><span class="delimiter">'</span></span>;
</span></code><br /></pre></p>


<pre>
<code class="php syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>echo wrapHtml('<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;p&gt;</span>lorem ipsum<span class="tag">&lt;br&gt;</span>dolor<span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span>', $node);
</span></code><br /></pre>

	<p>would produce:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div</span> <span class="attribute-name">data-neos-node-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-node-identifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">uuid</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;p&gt;</span>lorem ipsum<span class="tag">&lt;br&gt;</span>dolor<span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre></p>


	<p>And</p>


<pre>
<code class="php syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>echo wrapHtml('<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;p&gt;</span>lorem ipsum<span class="tag">&lt;br&gt;</span>dolor<span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span><span class="tag">&lt;span&gt;</span>another root node<span class="tag">&lt;/span&gt;</span>', $node);
</span></code><br /></pre>

	<p>would result in:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos-contentelement</span> <span class="attribute-name">data-neos-node-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-node-identifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">uuid</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;p&gt;</span>lorem ipsum<span class="tag">&lt;br&gt;</span>dolor<span class="tag">&lt;/p&gt;</span><span class="tag">&lt;/div&gt;</span><span class="tag">&lt;span&gt;</span>another root node<span class="tag">&lt;/span&gt;</span>
<span class="line-numbers">3</span><span class="tag">&lt;/neos-contentelement&gt;</span>
</span></code><br /></pre></p></div>
  </div>
  

  <div id="change-187833" class="journal has-notes">
    <h4><a href="53046.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3198">Rens Admiraal</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-10-22" title="2013-10-22 23:12">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-187833-notes"><p>I fully agree on the cleaning up of the HTML, and as some of the changes could be breaking I would suggest doing it soon. On the other hand I still think we should stick to the guideline that we have the same HTML output in the frontend as in the backend by default. For this we will have to add wrapping code to make the backend work, but we should allow the integrator to suppress this. We should not render anything that's not absolutely required to meet that requirement.</p>


	<p>One of the strong points of TYPO3 CMS is that you can alter absolutely everything regarding the output. We should offer the same in Neos.</p>


	<p>Some comments on your points:</p>


	<ul>
	<li>No need to use underscores in attribute-names (e.g. data-neosdatatype-_hidden as everything prefixed with neos- should be considered "private" <br />The underscore for private is not used for making something private, but for internal properties which are stored directly on the node, without an underscore are normal node properties. I don't think we should touch that in this cleanup.</li>
	</ul>


	<ul>
	<li>Only add attributes for non-defaults (e.g. data-neos-removed="false" can be omitted)<br />If we do that we should make sure that the inspector will handle this correctly as the properties are also used to detect if a node has a modified state. Should be doable, just something to keep in mind. And I'm not sure if the gain is worth the effort.</li>
	</ul>


	<p>And then about the attributes used: we need to stick to properties like property="typo3:title" as otherwise we break the RDFa approach which will break VIE which will disable all content editing ;-) We also still need the wrapping element around for example the &lt;h1&gt;&lt;/h1&gt; in a headline because otherwise an editor like aloha will not be able to change the blockformat.</p></div>
  </div>
  

  <div id="change-187844" class="journal has-notes">
    <h4><a href="53046.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-10-23" title="2013-10-23 11:00">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-187844-notes"><p>Rens Admiraal wrote:</p>


	<p>Thanks for your feedback!<br />To avoid getting lost in discussions about (currently not so pressing) issues here again the actual suggestion I wanted to make with this ticket, but got lost in details (below replies to your feedback):</p>


	<p>Currently the template for a simple NodeType looks like this:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>{namespace neos=TYPO3\Neos\ViewHelpers}
<span class="line-numbers">2</span><span class="tag">&lt;neos:contentElement</span> <span class="attribute-name">node</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{node}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">3</span>    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-element</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">4</span>        <span class="tag">&lt;h2&gt;</span><span class="tag">&lt;neos:contentElement.editable</span> <span class="attribute-name">property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{text -<span class="error">&gt;</span> f:format.raw()}<span class="tag">&lt;/neos:contentElement.editable&gt;</span><span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers">5</span>        <span class="tag">&lt;p&gt;</span><span class="tag">&lt;neos:contentElement.editable</span> <span class="attribute-name">property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{text -<span class="error">&gt;</span> f:format.raw()}<span class="tag">&lt;/neos:contentElement.editable&gt;</span><span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">6</span>    <span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">7</span><span class="tag">&lt;/neos:contentElement&gt;</span>
</span></code><br /></pre></p>


	<p>This is almost like writing binary code ;)</p>


	<p>I would expect:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>{namespace neos=TYPO3\Neos\ViewHelpers}
<span class="line-numbers">2</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-element</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">3</span>    <span class="tag">&lt;h2&gt;</span>{neos.contentElement.editable(property: 'title')}<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers">4</span>    <span class="tag">&lt;p&gt;</span>{neos.contentElement.editable(property: 'text')}<span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">5</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre></p>


	<p>And the WrappingService (that knows all about the context and the current node) should take care of adding the required attributes in the backend (and forwarding the raw content in frontend).<br />In this case, because the rendered template contains a root element, it would add the attributes to this tag (I tested this with some freaky broken html and the fallback works reliably):</p>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-element</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">data-neos-node-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">....</span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;h2&gt;</span>the title<span class="tag">&lt;/h2&gt;</span>
<span class="line-numbers">3</span>  <span class="tag">&lt;p&gt;</span>the text<span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">4</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre>

	<p>Otherwise it would add a wrapping element:</p>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos-contentelement</span> <span class="attribute-name">data-neos-node-path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">....</span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  ...
<span class="line-numbers">3</span><span class="tag">&lt;/neos-contentlement&gt;</span>
</span></code><br /></pre>

	<p>Do you think it is worth working in that direction at all or do you think it is not possible/too much effort?</p>


	<p>And for your other points:</p>


<blockquote>

	<p>One of the strong points of TYPO3 CMS is that you can alter absolutely everything regarding the output. We should offer the same in Neos.</p>


</blockquote>

	<p>True, and the easiest way to achieve this, is (IMO) to not alter the output at all in live workspace (alter = adding tags/attributes on top of the rendered fluid templates) - if that's possible somehow.</p>


<blockquote>

	<ul>
	<li>No need to use underscores in attribute-names (e.g. data-neosdatatype-_hidden as everything prefixed with neos- should be considered "private" <br />The underscore for private is not used for making something private, but for internal properties which are stored directly on the node, without an underscore are normal node properties. I don't think we should touch that in this cleanup.</li>
	</ul>


</blockquote>

	<p>I know that those properties have an underscore in the node implementation to distinguish them from standard node properties. But I think the rendered HTML is a different context with a different model and I don't see a problem omitting the underscore there as we don't have the distinguish-issue there, or do we?<br />But I totally agree to you, we shouldn't touch this anytime soon - just a minor weirdness that I stumbled upon while looking at the generated source code. And I thought underscores would be invalid in attributes, but that's <strong>not</strong> the case for data attributes!</p>


<blockquote>

	<ul>
	<li>Only add attributes for non-defaults (e.g. data-neos-removed="false" can be omitted)<br />If we do that we should make sure that the inspector will handle this correctly as the properties are also used to detect if a node has a modified state. Should be doable, just something to keep in mind. And I'm not sure if the gain is worth the effort.</li>
	</ul>


</blockquote>

	<p>Couldn't we just output those <strong>when</strong> the property is modified or != default - the node should know about this, or?<br />Well, I'm not sure about all the implications and complexity. I just collected issues that I found weird and I think that we should at least get rid of the (or some of the) redundant information at some point because it will bite us sooner or later (not only performance wise). For example:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers"> 1</span><span class="tag">&lt;div</span>
<span class="line-numbers"> 2</span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3-neos-nodetypes-headline</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"> 3</span>  <span class="attribute-name">typeof</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:TYPO3.Neos.NodeTypes:Headline</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"> 4</span>  <span class="attribute-name">data-neos-__nodetype</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TYPO3.Neos.NodeTypes:Headline</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"> 5</span>
<span class="line-numbers"> 6</span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentelement-removed</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"> 7</span>  <span class="attribute-name">data-neos-_removed</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"> 8</span>
<span class="line-numbers"> 9</span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-contentelement-hidden</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers"><strong>10</strong></span>  <span class="attribute-name">data-neos-_hidden</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> 
<span class="line-numbers">11</span>
<span class="line-numbers">12</span>  <span class="attribute-name">...</span> <span class="tag">/&gt;</span>
</span></code><br /></pre></p>


<blockquote>

	<p>And then about the attributes used: we need to stick to properties like property="typo3:title" as otherwise we break the RDFa approach which will break VIE which will disable all content editing ;-)</p>


</blockquote>

	<p>Ok, I see. The "typo3:" prefix was just a complete blackbox to me. Shouldn't this be "neos:" btw?</p>


<blockquote>

	<p>We also still need the wrapping element around for example the &lt;h1&gt;&lt;/h1&gt; in a headline because otherwise an editor like aloha will not be able to change the blockformat.</p>


</blockquote>

	<p>That's a shame.. But in this case we should do an exception to the "frontend HTML = backend HTML" rule (I think) as the additional wrapping div is not acceptable for many. If we use an unknown element like <code>&lt;neos-contenttype&gt;</code> instead of a <code>&lt;div&gt;</code> in the backend, this should have no visual influence (even though it might break JS/CSS due to changed selectors of course, but then the integrator can add some CSS/JS snippets to make it work in backend, just like today).</p></div>
  </div>
  

  <div id="change-189986" class="journal has-notes has-details">
    <h4><a href="53046.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-11-13" title="2013-11-13 17:16">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Accepted</i></li>
      
       <li><strong>Assigned To</strong> set to <i>Bastian Waidelich</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-189986-notes"><p>I'll give this a try..</p></div>
  </div>
  

  <div id="change-191870" class="journal has-notes">
    <h4><a href="53046.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-11-27" title="2013-11-27 18:09">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-191870-notes"><p>FYI: Update from yesterdays <a href="../../external.html?link=http://wiki.typo3.org/TYPO3_Neos-DiscussionMeetings" class="external">team meeting</a> :</p>


	<a name="1-Simplify-contentElementeditable-ViewHelper"></a>
<h2 > 1) Simplify contentElement.editable ViewHelper<a href="#1-Simplify-contentElementeditable-ViewHelper" class="wiki-anchor">&para;</a></h2>


	<p>Old template code:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos:contentElement.editable</span> <span class="attribute-name">property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>{text -<span class="error">&gt;</span> f:format.raw()}<span class="tag">&lt;/neos:contentElement.editable&gt;</span>
</span></code><br /></pre></p>


	<p>New template code:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>{neos:contentElement.editable(property: 'text')}
</span></code><br /></pre><br />(For B/C reasons the contents of this tag still override the property, if present)</p>


	<a name="2-Avoid-wrapping-tag-of-contentElementeditable-ViewHelper-in-Frontend"></a>
<h2 >2) Avoid wrapping tag of contentElement.editable ViewHelper in Frontend<a href="#2-Avoid-wrapping-tag-of-contentElementeditable-ViewHelper-in-Frontend" class="wiki-anchor">&para;</a></h2>


	<p>Given the property text contains the string<br /><pre><code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;p&gt;</span>Lorem ipsum<span class="tag">&lt;/p&gt;</span></span></code></pre></p>


	<p>Old output (Backend):<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div</span> <span class="attribute-name">property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">typo3:text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neos-inline-editable</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;p&gt;</span>Lorem ipsum<span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">3</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre></p>


	<p>New output (Backend):<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos-editable-property</span> <span class="attribute-name">data-neos-property</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;p&gt;</span>Lorem ipsum<span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">3</span><span class="tag">&lt;/neos-editable-property&gt;</span>
</span></code><br /></pre><br />(We still need to test, if custom tags work with Aloha and all supported browsers. Otherwise this should probably stay a div, possibly with some CSS that removes visual impact (display: inline, margin: 0, padding: 0, ...)</p>


	<p>Old output (Frontend):<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;div&gt;</span>
<span class="line-numbers">2</span>  <span class="tag">&lt;p&gt;</span>Lorem ipsum<span class="tag">&lt;/p&gt;</span>
<span class="line-numbers">3</span><span class="tag">&lt;/div&gt;</span>
</span></code><br /></pre></p>


	<p>New output (Frontend):<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;p&gt;</span>Lorem ipsum<span class="tag">&lt;/p&gt;</span>
</span></code><br /></pre><br />(Note that there is '''no wrapping tag''' added by the ViewHelper any longer)</p>


	<a name="3-Deprecate-contentElement-ViewHelper"></a>
<h2 >3) Deprecate contentElement ViewHelper<a href="#3-Deprecate-contentElement-ViewHelper" class="wiki-anchor">&para;</a></h2>


	<p>The attributes that are required for the backend to work (data-neos-*...) are added by a TypoScript processor (only in backend):</p>


	<p>Old template code:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;neos:contentElement</span> <span class="attribute-name">node</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{node}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="line-numbers">2</span>  ...
<span class="line-numbers">3</span><span class="tag">&lt;/neos:contentElement&gt;</span>
</span></code><br /></pre></p>


	<p>New template code:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>...
</span></code><br /></pre><br />(For B/C reasons the ViewHelper still renders a tag - but it has no advantage over hard-coding that tag in the template itself)</p>


	<a name="TODO"></a>
<h3 >TODO:<a href="#TODO" class="wiki-anchor">&para;</a></h3>


	<ul>
	<li>Introduce new <strong>Content</strong> TS Object: prototype(TYPO3.Neos:Content) < TYPO3.TypoScript:Template</li>
		<li>Deprecated <strong>TYPO3.Neos:Template</strong>: prototype(TYPO3.Neos:Template) < TYPO3.Neos:Content // DEPRECATED</li>
		<li>Make Plugin(View) extend <strong>Content</strong>: prototype(TYPO3.Neos:Plugin) <  TYPO3.Neos:Content</li>
		<li>Add "meta data" processor to <strong>Content</strong></li>
	</ul>


	<a name="Processor-Chain"></a>
<h4 >Processor Chain:<a href="#Processor-Chain" class="wiki-anchor">&para;</a></h4>


	<ul>
	<li>add outermost wrapping div IF IT DOES NOT EXIST.
	<ul>
	<li>configuration option for disabling this in live workspace. by default same markup in live + user WS.</li>
	</ul>
	</li>
		<li>add Node Type Name -> CSS Class Name generator
	<ul>
	<li>no config options. Neos should not rely on class names, but data attributes.</li>
	</ul>
	</li>
		<li>add “ID” generator
	<ul>
	<li>configuration option for disabling this. by default same markup in live + user WS.</li>
	</ul>
	</li>
		<li>“Backend” data-attribute generator
	<ul>
	<li>re-use outermost wrapping element if it exists</li>
		<li>have class name NOT hardcoded in template</li>
	</ul></li>
	</ul></div>
  </div>
  

  <div id="change-192733" class="journal has-details">
    <h4><a href="53046.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-12-04" title="2013-12-04 18:41">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Accepted</i> to <i>Resolved</i></li>
      
       <li><strong>Target version</strong> set to <i>1.0 beta 2</i></li>
      
       <li><strong>Estimated time</strong> set to <i>0.00</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-223930" class="journal has-details">
    <h4><a href="53046.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-neos/activity?from=2013-12-04" title="2013-12-04 18:43">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Estimated time</strong> deleted (<strike><i>0.00</i></strike>)</li>
      
    </ul>
    
    
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-53046-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/53046.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="53046.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/53046 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:14:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
