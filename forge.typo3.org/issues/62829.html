<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/62829 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 23:39:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Bug #62829: FAL not generating sys_file_metadata correctly - Core - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/62829.atom" rel="alternate" title="Core - Bug #62829: FAL not generating sys_file_metadata correctly" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 current sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" accesskey="4" style="">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>Core</h1>
        <div id="quicklinks"><p>Development of TYPO3 CMS</p></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/wiki" class="wiki">Wiki</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="level-1 current sorting-10">Core</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-search" class="level-2 sorting-0">Indexed Search</a><a href="../../external.html?link=https://forge.typo3.org/projects/extension-linkvalidator" class="level-2 sorting-0">Linkvalidator</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-releasecycles" class="level-2 sorting-0">Release Cycles</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-team" class="level-2 sorting-0">Team Resources</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-workspaces" class="level-2 sorting-0">Workspaces & Versioning</a><a href="../../external.html?link=https://forge.typo3.org/projects/usability" class="level-2 sorting-10">TYPO3 CMS Usability Team</a><a href="../../external.html?link=https://forge.typo3.org/projects/extensions" class="level-1 sorting-20">Community Extensions</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-distribution" class="level-1 sorting-44">Distributions</a><a href="../../external.html?link=https://forge.typo3.org/projects/cms-feature-requests" class="level-1 sorting-50">Feature-Requests</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-v62" class="level-1 sorting-620">TYPO3 6.2 Projects (+)</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-archived" class="level-1 sorting-1000">(Archived Projects)</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=219" class="query">Easy tasks</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=391" class="query">FAL Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=204" class="query">Recently modified</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=523" class="query">Regressions</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=459" class="query">Roadmap v7</a>



  
    <div id="watchers">
      

<h3>Watchers (3)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/3251">Dirk Klimpel</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/36294">Sybille Peters</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-62829-watcher"></span>


</div>


<h2>Bug #62829</h2>

<div class="issue status-7 priority-2 closed details">
  

  

<div class="subject">
<div><h3>FAL not generating sys_file_metadata correctly</h3></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-11-10" title="2014-11-10 15:57">9 months</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-17" title="2015-02-17 19:43">6 months</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Resolved</td>
    <th class="start-date">Start date:</th><td class="start-date">2014-11-10</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to">-</td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent">100%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">File Abstraction Layer (FAL)</td>
    
    <th class="spent-time">Spent time:</th>
    <td class="spent-time">-</td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../../external.html?link=https://forge.typo3.org/versions/2354">next-patchlevel</a></td>
    
</tr>
<tr>
	<th>TYPO3 Version:</th><td>6.2</td>
	<th>Is Regression:</th><td>No</td>
</tr>
<tr>
	<th>PHP Version:</th><td></td>
	<th>Sprint Focus:</th><td>On Location Sprint</td>
</tr>
<tr>
	<th>Complexity:</th><td></td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Currently (tested on 6.2.6) FAL does not generate the metadata of images correctly. If an entry in sys_file_metadata is missing on file usage, FAL generates them on the fly. But an images' width/height are not correctly generated and thus are stored in database as "0".</p>


	<p>This has a very silly behavior as a result. On the first uncached page view, the images are displayed correctly. This lasts until the second uncached page view is done. Since this moment, the images seem to be gone because they are generated with width=0 and height=0. After truncating sys_file_metadata the procedure can be reproduced.</p>


	<p>This only occurs with images which are not processed by gifbuilder. To solve the problem there is a easy workaround:</p>


	<p>UPDATE sys_file SET missing=1;</p>


	<p>and then start the scheduler Task for indexing files (TYPO3\CMS\Scheduler\Task\FileStorageIndexingTask). But best would be to fix the reason.</p>
  </div>









</div>


<div id="issue-changesets">
<h3>Associated revisions</h3>

    <div class="changeset odd">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository/revisions/6c21ec7b58ca547eb1d908ee289dd1732313a90d" title="Revision 6c21ec7b">Revision 6c21ec7b</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:06">6 months</a> ago</span></p>
    <div class="wiki">
        <p>[BUGFIX] Wrong generation of metadata in FAL</p>


	<p>This patch fixes the generation of metadata if the metadata<br />of a file is missing in sys_file_metadata. Without this patch<br />the metadata is generated without taking care of images and their<br />width and height. As a result, images are generated with<br />width=0 height=0. See bugreport for details.</p>


	<p>The change also introduces the basic structure to fetch<br />general info of files via the SplFileInfo objects API.</p>


	<p>Resolves: <a href="62829.html" class="issue status-7 priority-2 closed" title="FAL not generating sys_file_metadata correctly (Resolved)">#62829</a><br />Releases: master, 6.2<br />Change-Id: Ie99fc74f3439cef5dbd3702e57596b37390da679<br />Reviewed-on: <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a><br />Reviewed-by: Frans Saris &lt;<a class="email" href="mailto:franssaris@gmail.com">franssaris@gmail.com</a>&gt;<br />Tested-by: Frans Saris &lt;<a class="email" href="mailto:franssaris@gmail.com">franssaris@gmail.com</a>&gt;<br />Reviewed-by: Fabien Udriot &lt;<a class="email" href="mailto:fabien.udriot@ecodev.ch">fabien.udriot@ecodev.ch</a>&gt;<br />Tested-by: Fabien Udriot &lt;<a class="email" href="mailto:fabien.udriot@ecodev.ch">fabien.udriot@ecodev.ch</a>&gt;<br />Reviewed-by: Mathias Schreiber &lt;<a class="email" href="mailto:mathias.schreiber@wmdb.de">mathias.schreiber@wmdb.de</a>&gt;<br />Tested-by: Mathias Schreiber &lt;<a class="email" href="mailto:mathias.schreiber@wmdb.de">mathias.schreiber@wmdb.de</a>&gt;<br />Reviewed-by: Anja Leichsenring &lt;<a class="email" href="mailto:aleichsenring@ab-softlab.de">aleichsenring@ab-softlab.de</a>&gt;<br />Tested-by: Anja Leichsenring &lt;<a class="email" href="mailto:aleichsenring@ab-softlab.de">aleichsenring@ab-softlab.de</a>&gt;</p>
    </div>
    </div>

    <div class="changeset even">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository/revisions/c29a725415ce58429ffaf858b8bef240b4847816" title="Revision c29a7254">Revision c29a7254</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:06">6 months</a> ago</span></p>
    <div class="wiki">
        <p>[BUGFIX] Wrong generation of metadata in FAL</p>


	<p>This patch fixes the generation of metadata if the metadata<br />of a file is missing in sys_file_metadata. Without this patch<br />the metadata is generated without taking care of images and their<br />width and height. As a result, images are generated with<br />width=0 height=0. See bugreport for details.</p>


	<p>The change also introduces the basic structure to fetch<br />general info of files via the SplFileInfo objects API.</p>


	<p>Resolves: <a href="62829.html" class="issue status-7 priority-2 closed" title="FAL not generating sys_file_metadata correctly (Resolved)">#62829</a><br />Releases: master, 6.2<br />Change-Id: Ie99fc74f3439cef5dbd3702e57596b37390da679<br />Reviewed-on: <a class="external" href="../../external.html?link=http://review.typo3.org/36454">http://review.typo3.org/36454</a><br />Reviewed-by: Anja Leichsenring &lt;<a class="email" href="mailto:aleichsenring@ab-softlab.de">aleichsenring@ab-softlab.de</a>&gt;<br />Tested-by: Anja Leichsenring &lt;<a class="email" href="mailto:aleichsenring@ab-softlab.de">aleichsenring@ab-softlab.de</a>&gt;</p>
    </div>
    </div>

    <div class="changeset odd">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository/revisions/846cec83827660cde18cdbe01cb45235bd68c2a0" title="Revision 846cec83">Revision 846cec83</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/4192">Anja Leichsenring</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:36">6 months</a> ago</span></p>
    <div class="wiki">
        <p>[BUGFIX] Followup to remove PHP5.5 only syntax</p>


	<p>Patch #36454 introduced by accident a ::class call, which will<br />break in PHP versions < 5.5</p>


	<p>Change-Id: I0ce3b813fc8a176a9ce9e993474f2668bf2cab01<br />Resolves: <a href="62829.html" class="issue status-7 priority-2 closed" title="FAL not generating sys_file_metadata correctly (Resolved)">#62829</a><br />Releases: 6.2<br />Reviewed-on: <a class="external" href="../../external.html?link=http://review.typo3.org/36457">http://review.typo3.org/36457</a><br />Reviewed-by: Frans Saris &lt;<a class="email" href="mailto:franssaris@gmail.com">franssaris@gmail.com</a>&gt;<br />Tested-by: Frans Saris &lt;<a class="email" href="mailto:franssaris@gmail.com">franssaris@gmail.com</a>&gt;</p>
    </div>
    </div>


</div>



<div id="history">
<h3>History</h3>

  <div id="change-235892" class="journal has-notes has-details">
    <h4><a href="62829.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-11-11" title="2014-11-11 19:45">9 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-235892-notes"><p>Patch set 1 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-235898" class="journal has-notes has-details">
    <h4><a href="62829.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-11-11" title="2014-11-11 22:30">9 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Needs Feedback</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-235898-notes"><p>Frederic Gaus wrote:</p>


<blockquote>

	<p>But best would be to fix the reason</p>


</blockquote>

	<p>Here I agree with you :)</p>


	<p>Why are the sys_file_metadata records missing.<br />These are generated together with the sys_file record.</p>


	<p>If you truncated the table yourself IMO running<br />UPDATE sys_file SET missing=1;</p>


	<p>Wouldn't be a problem.</p></div>
  </div>
  

  <div id="change-242569" class="journal has-notes">
    <h4><a href="62829.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-12-27" title="2014-12-27 00:08">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-242569-notes"><p>I really can't tell why the the sys_file_metadata records are missing. The problem occurred in an updated TYPO3 version (6.1 -> 6.2). The problem only occurred in this instance. The records were not missing but the width and height was empty. The files where not added recently and there is no custom code at all involved in processing the files.</p>


	<p>Of cause it would be easy to set "UPDATE sys_file SET missing=1 - but this is exactly the problem. If you do and start the indexer the meta data is regenerated with width and height = 0 and not with the correct values. So this does not help in this situation.</p></div>
  </div>
  

  <div id="change-242602" class="journal has-notes">
    <h4><a href="62829.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36294">Sybille Peters</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-12-29" title="2014-12-29 09:30">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-242602-notes"><p>We also had this problem with width and height=0 in sys_file_metadata. This was on an installation which started with an early version of 6.0 or 6.1 and had been updated. Files had been added continuously on the server and the FAL indexer run regularly.</p>


	<p>Also, there were duplicate entries (2 entries with the same identifier and the same storage id in sys_file).</p></div>
  </div>
  

  <div id="change-242667" class="journal has-notes">
    <h4><a href="62829.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39198">Mathias Brodala</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-12-30" title="2014-12-30 11:48">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-242667-notes"><p>One reason <code>sys_file_metadata</code> records could be missing is an upgrade from 6.1 where there only was <code>sys_file</code>.</p></div>
  </div>
  

  <div id="change-243729" class="journal has-notes">
    <h4><a href="62829.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-08" title="2015-01-08 14:29">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-243729-notes"><p>Our instance was also an updated one (6.1 to 6.2)</p></div>
  </div>
  

  <div id="change-244251" class="journal has-notes">
    <h4><a href="62829.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-11" title="2015-01-11 20:46">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-244251-notes"><p>Did you run all the upgrade wizards correct when upgrading to 6.2?</p>


<blockquote>

	<p>Of cause it would be easy to set "UPDATE sys_file SET missing=1 - but this is exactly the problem. If you do and start the indexer the meta data is regenerated with width and height = 0 and not with the correct values. So this does not help in this situation.</p>


</blockquote>

	<p>Could it be that the width and height columns of the sys_file table are still present? These need to be removed. The width and height columns are moved to sys_file_metadata since 6.2.</p></div>
  </div>
  

  <div id="change-245875" class="journal has-notes">
    <h4><a href="62829.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39302">Sergio Catalá</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-20" title="2015-01-20 17:51">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-245875-notes"><p>My instance was updated from 6.1 to 6.2 too.<br />Same problem here.<br />All workarounds in this issue and <a href="46020.html" class="issue status-9 priority-1 closed" title="Image size is 0 when not scaled (Closed)">#46020</a> were applied without success.<br />I built a script based on <a href="46020.html#note-81" class="issue status-9 priority-1 closed" title="Image size is 0 when not scaled (Closed)">#46020</a> that executes sql updates over sys_file_metadata using "identify" command, but not all images were covered.</p>


	<p>Any solution for this?</p></div>
  </div>
  

  <div id="change-245877" class="journal has-notes">
    <h4><a href="62829.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-20" title="2015-01-20 18:03">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-245877-notes"><p>You build a script that looks in all folders that are indexed?</p>


	<p>Do you see a common difference between the sys_file_metadata records that are correct now and the once that aren't? Same folder or storage uid?</p>


	<p>Does your sys_file table still have the width and height column? Because that would result in some issues.</p></div>
  </div>
  

  <div id="change-245878" class="journal has-notes">
    <h4><a href="62829.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39302">Sergio Catalá</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-20" title="2015-01-20 18:18">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-245878-notes"><p>Frans Saris wrote:</p>


<blockquote>

	<p>You build a script that looks in all folders that are indexed?</p>


</blockquote>

	<p>Correct. I have three "storages": uploads/, fileadmin/ and "the rest". And my scripts goes for all pictures (png,jpg,gif), identifies the width and the height for every image and builds a sql update for every image in the sys_file_metadata table.</p>


<blockquote>

	<p>Do you see a common difference between the sys_file_metadata records that are correct now and the once that aren't? Same folder or storage uid?</p>


</blockquote>

	<p>No. No pattern as far as I can see.</p>


<blockquote>

	<p>Does your sys_file table still have the width and height column? Because that would result in some issues.</p>


</blockquote>

	<p>No. After applying the upgrade wizard in the backend, I applied the compare tool and deleted these fields.<br />I would like to recreate them again but in the sys_file_metadata table.<br />The scheduler tasks referring to FAL didn't work for me.<br />Width and height are setup to 0 again.</p></div>
  </div>
  

  <div id="change-245886" class="journal has-notes">
    <h4><a href="62829.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-20" title="2015-01-20 18:50">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-245886-notes">Some more questions then:
	<ul>
	<li>what filesystem are you using? *nix, mac, windows</li>
		<li>Are your filestorages set to case-sensitive</li>
		<li>You got a storage 0, 1 and 2? 0 = the rest, 1 = uploads, 2 = fileadmin?</li>
		<li>If you fetch a file that doesn't get a width and height, rename it and upload it in BE filelist the width and height are set correct?</li>
		<li>If your script identifies the width and height of every png, jpg and gif image. Why are the width and height still 0 than? Is the file identifier somehow incorrect?</li>
	</ul>


	<p>gr. Frans</p></div>
  </div>
  

  <div id="change-245890" class="journal has-notes">
    <h4><a href="62829.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39302">Sergio Catalá</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-20" title="2015-01-20 19:15">7 months</a> ago</h4>

    
    <div class="wiki" id="journal-245890-notes"><p>Frans Saris wrote:</p>


<blockquote>

	<ul>
	<li>what filesystem are you using? *nix, mac, windows</li>
	</ul>


</blockquote>

	<p>Unix.</p>


<blockquote>

	<ul>
	<li>Are your filestorages set to case-sensitive</li>
	</ul>


</blockquote>

	<p>Yes.</p>


<blockquote>

	<ul>
	<li>You got a storage 0, 1 and 2? 0 = the rest, 1 = uploads, 2 = fileadmin?</li>
	</ul>


</blockquote>

	<p>Yes.</p>


<blockquote>

	<ul>
	<li>If you fetch a file that doesn't get a width and height, rename it and upload it in BE filelist the width and height are set correct?</li>
	</ul>


</blockquote>

	<p>Yes.</p>


<blockquote>

	<ul>
	<li>If your script identifies the width and height of every png, jpg and gif image. Why are the width and height still 0 than? Is the file identifier somehow incorrect?</li>
	</ul>


</blockquote>

	<p>The file identifier is correct. Width and height are setup properly with my script but I can't get all images to have proper width and height, as "identify" command fails for some that are corrupted.</p>


	<p>What I am worried is that, even when all are setup properly, refreshing the cache makes them back to 0 width and height again.</p></div>
  </div>
  

  <div id="change-246038" class="journal has-notes">
    <h4><a href="62829.html#note-13" class="journal-link">#13</a>
    
    <a name="note-13"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-22" title="2015-01-22 10:16">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-246038-notes"><p>Refreshing the cache will not touch the sys_file_metadata record.</p>


	<p>The "required" metadata will only be re-set when the sys_file record is reindex because of the missing flag or filesize change.</p>


	<p>Could you maybe do some further debugging and have a look at the result of list($metaData['width'], $metaData['height']) = getimagesize($rawFileLocation); in TYPO3\CMS\Core\Resource\Index\Indexer::extractRequiredMetaData().</p>


	<p>Flag a sys_file missing and run the FAL indexer task.</p></div>
  </div>
  

  <div id="change-246058" class="journal has-notes">
    <h4><a href="62829.html#note-14" class="journal-link">#14</a>
    
    <a name="note-14"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39302">Sergio Catalá</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-22" title="2015-01-22 13:28">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-246058-notes"><p>As you recommended, I made some debugging and I could see that the scheduler task fills properly the dimensions. That allowed me to observe something: images outside of folders "fileadmin" and "uploads" are never indexed and filled with the proper dimensions.</p>


	<p>I created two scheduler tasks for every storage in my system ("fileadmin" and "uploads") and ran them.<br />Everything went ok.<br />But what about images that are used in my extensions under typo3conf/ ?<br />My workaround was creating a new "storage" on PID=0 and create a new scheduler task for indexing this storage.<br />Now the image is twice in sys_file_metadata table, but one row is for storage 0 (all), which has width=height=0, and the other is for my new storage, that sets up the proper dimensions. The frontend takes this one.</p>


	<p>I confirm the original bug commented still exists:</p>


	<p>1. If sys_file_metadata table is truncated for some reason (or the upgrade tool doesn't work well), the first time the frontend is refreshed, the images are shown. They don't have width and height parameters at all.</p>


	<p>2. New sys_file_metadata rows for these images are created with width=height=0.</p>


	<p>3. The user refreshes the cache and then the frontend displays no images as they take the information from sys_file_metadata.</p>


	<p>Running this new scheduler task with a "storage" for typo3conf/ solves the problem for me.</p></div>
  </div>
  

  <div id="change-246105" class="journal has-notes has-details">
    <h4><a href="62829.html#note-15" class="journal-link">#15</a>
    
    <a name="note-15"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-22" title="2015-01-22 21:34">6 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Needs Feedback</i> to <i>New</i></li>
      
       <li><strong>Sprint Focus</strong> set to <i>On Location Sprint</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-246105-notes"><p>I would not recommend to create a storage for typo3conf. As a temporary hotfix for the storage 0 problem you could just delete all records in sys_file with storage = 0 as these files will only be used by their identifier and not by their uid.</p>


	<p>For re-indexing storage 0 files there is already an issue <a href="64196.html" class="issue status-4 priority-2" title="Make it possible to re index files from storage 0 (Needs Feedback)">#64196</a>.</p>


	<p>Hope to resolve <a href="64196.html" class="issue status-4 priority-2" title="Make it possible to re index files from storage 0 (Needs Feedback)">#64196</a> and this issue "New sys_file_metadata rows for these images are created with width=height=0." with the FAL codesprint next week.</p></div>
  </div>
  

  <div id="change-246108" class="journal has-details">
    <h4><a href="62829.html#note-16" class="journal-link">#16</a>
    
    <a name="note-16"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-22" title="2015-01-22 21:48">6 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Under Review</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-246800" class="journal has-notes">
    <h4><a href="62829.html#note-17" class="journal-link">#17</a>
    
    <a name="note-17"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/39302">Sergio Catalá</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-26" title="2015-01-26 09:16">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-246800-notes"><p>Thank you very much for the feedback, Frans.</p></div>
  </div>
  

  <div id="change-247306" class="journal has-notes">
    <h4><a href="62829.html#note-18" class="journal-link">#18</a>
    
    <a name="note-18"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-29" title="2015-01-29 16:21">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247306-notes"><p>Patch set 2 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247393" class="journal has-notes">
    <h4><a href="62829.html#note-19" class="journal-link">#19</a>
    
    <a name="note-19"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-29" title="2015-01-29 20:40">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247393-notes"><p>Patch set 3 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247491" class="journal has-notes">
    <h4><a href="62829.html#note-20" class="journal-link">#20</a>
    
    <a name="note-20"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 10:44">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247491-notes"><p>Patch set 4 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247507" class="journal has-notes">
    <h4><a href="62829.html#note-21" class="journal-link">#21</a>
    
    <a name="note-21"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 11:15">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247507-notes"><p>Patch set 5 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247601" class="journal has-notes">
    <h4><a href="62829.html#note-22" class="journal-link">#22</a>
    
    <a name="note-22"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 15:34">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247601-notes"><p>Patch set 6 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247695" class="journal has-notes">
    <h4><a href="62829.html#note-23" class="journal-link">#23</a>
    
    <a name="note-23"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 17:41">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247695-notes"><p>Patch set 7 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/33990">http://review.typo3.org/33990</a></p></div>
  </div>
  

  <div id="change-247712" class="journal has-notes">
    <h4><a href="62829.html#note-24" class="journal-link">#24</a>
    
    <a name="note-24"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:06">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247712-notes"><p>Patch set 1 for branch <strong>TYPO3_6-2</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/36454">http://review.typo3.org/36454</a></p></div>
  </div>
  

  <div id="change-247725" class="journal has-notes">
    <h4><a href="62829.html#note-25" class="journal-link">#25</a>
    
    <a name="note-25"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:27">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-247725-notes"><p>Patch set 1 for branch <strong>TYPO3_6-2</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/36457">http://review.typo3.org/36457</a></p></div>
  </div>
  

  <div id="change-247730" class="journal has-notes has-details">
    <h4><a href="62829.html#note-26" class="journal-link">#26</a>
    
    <a name="note-26"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/33710">Frederic Gaus</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:30">6 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Resolved</i></li>
      
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-247730-notes"><p>Applied in changeset <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository/revisions/6c21ec7b58ca547eb1d908ee289dd1732313a90d" class="changeset" title="[BUGFIX] Wrong generation of metadata in FAL This patch fixes the generation of metadata if the ...">6c21ec7b58ca547eb1d908ee289dd1732313a90d</a>.</p></div>
  </div>
  

  <div id="change-247732" class="journal has-notes has-details">
    <h4><a href="62829.html#note-27" class="journal-link">#27</a>
    
    <a name="note-27"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 18:31">6 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-247732-notes"><p>Patch set 2 for branch <strong>TYPO3_6-2</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/36457">http://review.typo3.org/36457</a></p></div>
  </div>
  

  <div id="change-247740" class="journal has-notes has-details">
    <h4><a href="62829.html#note-28" class="journal-link">#28</a>
    
    <a name="note-28"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/4192">Anja Leichsenring</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-30" title="2015-01-30 19:00">6 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Resolved</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-247740-notes"><p>Applied in changeset <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository/revisions/846cec83827660cde18cdbe01cb45235bd68c2a0" class="changeset" title="[BUGFIX] Followup to remove PHP5.5 only syntax Patch #36454 introduced by accident a ::class cal...">846cec83827660cde18cdbe01cb45235bd68c2a0</a>.</p></div>
  </div>
  

  <div id="change-250084" class="journal has-notes">
    <h4><a href="62829.html#note-29" class="journal-link">#29</a>
    
    <a name="note-29"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3765">Sven Burkert</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-17" title="2015-02-17 18:06">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-250084-notes"><p>Thank you, the hint with "UPDATE sys_file SET missing=1" helped.</p>


	<p>This also worked for me:<br /><pre>
UPDATE sys_file_metadata fm, sys_file f SET fm.width = f.width WHERE fm.file = f.uid;
UPDATE sys_file_metadata fm, sys_file f SET fm.height = f.height WHERE fm.file = f.uid;
</pre></p></div>
  </div>
  

  <div id="change-250086" class="journal has-notes">
    <h4><a href="62829.html#note-30" class="journal-link">#30</a>
    
    <a name="note-30"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2787">Frans Saris</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-17" title="2015-02-17 19:43">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-250086-notes"><p>The width and height columns of sys_file should be removed (see install tool => DB compare). Else you keep running into this issue.</p></div>
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-62829-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/62829.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="62829.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/62829 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 23:39:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
