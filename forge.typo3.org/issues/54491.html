<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/54491 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:38:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Bug #54491: PackageManager doesn&#39;t solve/recognize real composer packages   - Core - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/54491.atom" rel="alternate" title="Core - Bug #54491: PackageManager doesn't solve/recognize real composer packages  " type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 current sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" accesskey="4" style="">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>Core</h1>
        <div id="quicklinks"><p>Development of TYPO3 CMS</p></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/wiki" class="wiki">Wiki</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="level-1 current sorting-10">Core</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-search" class="level-2 sorting-0">Indexed Search</a><a href="../../external.html?link=https://forge.typo3.org/projects/extension-linkvalidator" class="level-2 sorting-0">Linkvalidator</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-releasecycles" class="level-2 sorting-0">Release Cycles</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-team" class="level-2 sorting-0">Team Resources</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-workspaces" class="level-2 sorting-0">Workspaces & Versioning</a><a href="../../external.html?link=https://forge.typo3.org/projects/usability" class="level-2 sorting-10">TYPO3 CMS Usability Team</a><a href="../../external.html?link=https://forge.typo3.org/projects/extensions" class="level-1 sorting-20">Community Extensions</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-distribution" class="level-1 sorting-44">Distributions</a><a href="../../external.html?link=https://forge.typo3.org/projects/cms-feature-requests" class="level-1 sorting-50">Feature-Requests</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-v62" class="level-1 sorting-620">TYPO3 6.2 Projects (+)</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-archived" class="level-1 sorting-1000">(Archived Projects)</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=219" class="query">Easy tasks</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=391" class="query">FAL Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=204" class="query">Recently modified</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=523" class="query">Regressions</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=459" class="query">Roadmap v7</a>



  
    <div id="watchers">
      

<h3>Watchers (6)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/3154">Thomas Maroschik</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/3351">Markus Klein</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/37631">Daniel Corn</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/37190">Tilo Baller</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/41316">Patrik Karisch</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/2620">Christian Weiske</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-54491-watcher"></span>


</div>


<h2>Bug #54491</h2>

<div class="issue status-6 priority-2 child details">
  

  

<div class="subject">
<div><p><a href="47018.html" class="issue status-7 priority-3 closed parent">Epic #47018</a>: Implement Composer support and clean package manager API</p><div><h3>PackageManager doesn&#39;t solve/recognize real composer packages  </h3></div></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/478">Stefano Kowalke</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2013-12-18" title="2013-12-18 15:17">over 1 year</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-07-13" title="2015-07-13 17:21">21 days</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Under Review</td>
    <th class="start-date">Start date:</th><td class="start-date">2013-12-18</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to">-</td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="todo" style="width: 100%;"></td></tr></table><p class="pourcent">0%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">7 Composer</td>
    
    <th class="spent-time">Spent time:</th>
    <td class="spent-time">-</td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version">-</td>
    
</tr>
<tr>
	<th>TYPO3 Version:</th><td>6.2</td>
	<th>Is Regression:</th><td>No</td>
</tr>
<tr>
	<th>PHP Version:</th><td>5.4</td>
	<th>Sprint Focus:</th><td></td>
</tr>
<tr>
	<th>Complexity:</th><td></td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>I add this snippet to the PackageStates.php: <br /><pre>
'doctrine_dbal' =&gt;
    array (
      'manifestPath' =&gt; '',
      'composerName' =&gt; 'typo3/doctrine_dbal',
      'state' =&gt; 'inactive',
      'packagePath' =&gt; 'typo3conf/ext/doctrine_dbal/',
      'classesPath' =&gt; 'Classes/',
    ),
</pre></p>


	<p>and this is how my composer.json looks like:</p>


<pre>
{
    "name": "typo3/doctrine_dbal",
    "type": "typo3-cms-framework",
    "description": "TYPO3 Core",
    "homepage": "http://typo3.org",
    "license": ["GPL-2.0+"],
    "version": "6.2.0",
    "require": {
        "typo3/cms/core": "*",
        "doctrine/dbal": "2.4.*" 
    },
    "replace": {
        "dbal": "*" 
    }
}
</pre>

	<p>"doctrine/dbal": "2.4.*" is a composer dependency which will downloaded into the vendor folder of the extension.</p>


	<p>I have a fresh installation with an empty database. When I start TYPO3 I will get the following error:<br /><pre>
Fatal error: Uncaught exception 'UnexpectedValueException' with message 'The package "doctrine_dbal" depends on "doctrine/dbal" which is not present in the system.' in /Volumes/HDD/Users/sok/Development/TYPO3/CMS/core/master/typo3/sysext/core/Classes/Package/PackageManager.php on line 608

( ! ) UnexpectedValueException: The package "doctrine_dbal" depends on "doctrine/dbal" which is not present in the system. in /Volumes/HDD/Users/sok/Development/TYPO3/CMS/core/master/typo3/sysext/core/Classes/Package/PackageManager.php on line 608
Call Stack
#    Time    Memory    Function    Location
1    0.0076    248008    {main}( )    ../Install.php:0
2    66.8783    2631112    TYPO3\CMS\Install\Controller\StepController-&gt;execute( )    ../Install.php:134
3    67.0292    3212456    TYPO3\CMS\Install\Controller\StepController-&gt;executeSpecificStep( )    ../StepController.php:69
4    67.0460    3237232    TYPO3\CMS\Install\Controller\Action\Step\DatabaseConnect-&gt;execute( )    ../StepController.php:90
5    72.9332    3301616    TYPO3\CMS\Install\Controller\Action\Step\DatabaseConnect-&gt;executeLoadDoctrineExtension( )    ../DatabaseConnect.php:61
6    76.1516    3323008    TYPO3\CMS\Core\Utility\ExtensionManagementUtility::loadExtension( ??? )    ../DatabaseConnect.php:618
7    76.1517    3323096    TYPO3\CMS\Core\Package\PackageManager-&gt;activatePackage( ??? )    ../ExtensionManagementUtility.php:1805
8    76.1518    3323160    TYPO3\Flow\Package\PackageManager-&gt;activatePackage( ??? )    ../PackageManager.php:530
9    76.1520    3328552    TYPO3\CMS\Core\Package\FailsafePackageManager-&gt;sortAndSavePackageStates( )    ../PackageManager.php:542
10    76.1520    3328600    TYPO3\Flow\Package\PackageManager-&gt;sortAndSavePackageStates( )    ../FailsafePackageManager.php:92
11    76.1520    3328808    TYPO3\CMS\Core\Package\PackageManager-&gt;sortAvailablePackagesByDependencies( )    ../PackageManager.php:914
12    76.1520    3329176    TYPO3\CMS\Core\Package\PackageManager-&gt;getAvailablePackageLoadingOrder( )    ../PackageManager.php:748
13    76.1520    3329408    TYPO3\CMS\Core\Package\PackageManager-&gt;buildDependencyGraph( )    ../PackageManager.php:691
14    76.2027    3514248    TYPO3\CMS\Core\Package\PackageManager-&gt;buildDependencyGraphForPackages( ??? )    ../PackageManager.php:659
</pre></p>
  </div>








<hr />
<div id="relations">
<div class="contextual">

</div>

<p><strong>Related issues</strong></p>


<form>
<table class="list issues">

<tr class="issue hascontextmenu" id="relation-10908">
<td class="checkbox"><input name="ids[]" type="checkbox" value="57604" /></td>
<td class="subject">related to 
    Core - 
    <a href="57604.html" class="issue status-9 priority-2 closed">Bug #57604</a>: PackageManager is unable to resolve composer PSR-4 namesp...
</td>
<td class="status">Closed</td>
<td class="start_date">2014-04-03</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

</table>
</form>


<form action="../../external.html?link=https://forge.typo3.org/issues/54491/relations" id="new-relation-form" method="post" onsubmit="new Ajax.Request('/issues/54491/relations', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Form.Element.focus('relation_issue_to_id');}, parameters:Form.serialize(this)}); return false;" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="IjgAk+sryuS7AAkPn7/ITUV652f6cwFBHN6GNTvW7o8=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates">related to</option>
<option value="duplicates">duplicates</option>
<option value="duplicated">duplicated by</option>
<option value="blocks">blocks</option>
<option value="blocked">blocked by</option>
<option value="precedes">precedes</option>
<option value="follows">follows</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="Element.toggle('new-relation-form'); this.blur(); return false;">Cancel</a>
</p>

<div id="related_issue_candidates" class="autocomplete"></div>
<script type="text/javascript">
//<![CDATA[
observeRelatedIssueField('/issues/auto_complete?id=54491&amp;project_id=typo3cms-core')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>

</div>


</div>




<div id="history">
<h3>History</h3>

  <div id="change-196972" class="journal has-notes">
    <h4><a href="54491.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3351">Markus Klein</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2013-12-18" title="2013-12-18 16:53">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-196972-notes"><p>Why are you modifying PackageStates.php manually??</p></div>
  </div>
  

  <div id="change-196976" class="journal has-notes">
    <h4><a href="54491.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/478">Stefano Kowalke</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2013-12-18" title="2013-12-18 17:38">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-196976-notes"><p>Ok, then tell me how to manage them otherwise.</p></div>
  </div>
  

  <div id="change-196985" class="journal has-details">
    <h4><a href="54491.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3351">Markus Klein</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2013-12-18" title="2013-12-18 20:21">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Needs Feedback</i></li>
      
       <li><strong>Target version</strong> deleted (<strike><i>6.2.0</i></strike>)</li>
      
    </ul>
    
    
  </div>
  

  <div id="change-196986" class="journal has-notes">
    <h4><a href="54491.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3154">Thomas Maroschik</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2013-12-18" title="2013-12-18 20:32">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-196986-notes"><p>Discussed that in person some minutes ago. Will post a guideline for composer dependencies once the workflow becomes clear. For now it means composer still unsupported.</p></div>
  </div>
  

  <div id="change-198280" class="journal has-notes">
    <h4><a href="54491.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/37631">Daniel Corn</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-07" title="2014-01-07 23:14">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198280-notes"><p>I am very interested in this topic. Is 6.2 supposed to allow the installation of external/packagist composer packages?<br />I am the creator of cundd_composer. The extensions aim is to provide the possibility to use non-TYPO3 composer packages.<br />Unfortunately the current TYPO3 6.2 version not only seems to not fully support composer - it even makes installations using cundd_composer crash. My extension relies on the composer.json in the extensions root, which is now read by the package manager. If it detects an external dependency an exception is thrown. In 6.1 and below you could simply navigate to the composer backend module and install the dependencies - now there is no way to install the extension which relies on the external composer package.</p></div>
  </div>
  

  <div id="change-198307" class="journal has-notes">
    <h4><a href="54491.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/478">Stefano Kowalke</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-08" title="2014-01-08 10:35">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198307-notes"><p>Hey Daniel,</p>


	<p>I can provide some informations which I found out and made my extension with external dependencies working.</p>


	<p>TYPO3 doesn't support Composer at the moment - that means external dependencies won't be resolved. To make a composer project with ext deps working you need to create a new folder called Packages at the same level like typo3conf and fileadmin and copy the vendor folder into this folder. Rename "vendor" to "Libraries", delete the PackageStates.php and restart the installation.</p>


<pre>
.
 Packages
└── Libraries
    ├── autoload.php
    ├── composer
    └── doctrine
├── fileadmin
├── index.php -&gt; typo3_src/index.php
├── php.php
├── typo3 -&gt; typo3_src/typo3
├── typo3_src -&gt; /Volumes/HDD/Users/sok/Development/TYPO3/CMS/core/master
├── typo3conf
├── typo3temp
└── uploads
</pre></div>
  </div>
  

  <div id="change-198582" class="journal has-notes">
    <h4><a href="54491.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/37631">Daniel Corn</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-09" title="2014-01-09 21:11">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198582-notes"><p>Hy Stefano!</p>


	<p>Thank you for that information! <br />This could help, but I'm not sure if I really want to try to write into the root :-S<br />I think I will change my extension to look for cundd_composer.json instead for composer.json files inside the extensions.</p>


	<p>I am disappointed how the next TYPO3 version will handle this. I don't really understand why the composer support is implemented incompletely. Isn't the great thing about composer it's ability to install all kinds of libraries from different sources and soften the borders between PHP projects?</p></div>
  </div>
  

  <div id="change-203597" class="journal has-details">
    <h4><a href="54491.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/317">Ernesto Baschny</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-02-12" title="2014-02-12 09:56">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Parent task</strong> set to <i>#47018</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-203640" class="journal has-notes">
    <h4><a href="54491.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/37631">Daniel Corn</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-02-12" title="2014-02-12 11:53">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-203640-notes"><p>Hy</p>


	<p>If someone is interested: I updated my composer extension to work with 6.2 (currently only on Github, not in TER).<br />As a notice I wrote the following:</p>


	<p><cite>Upgrade to TYPO3 6.2</cite></p>


	<p><cite>TYPO3 6.2 will parse the extensions composer.json files and retrieve different information from it. TYPO3's new Package Manager also allows the definition of dependencies. Unfortunately these dependencies are limited to real TYPO3 extension. If you want to install an extension, which requires a non-TYPO3 package in composer.json, the Package Manager tries to resolve this dependency in vain and the installation fails.</cite></p>


	<p><cite>To work around this issue cundd_composer will look for the file cundd_composer.json instead of composer.json. For legacy reasons cundd_composer will still use composer.json TYPO3 versions below 6.2.</cite></p>


	<p><a href="../../external.html?link=https://github.com/cundd/CunddComposer/tree/feature/typo3-6.2" class="external">CunddComposer on Github</a></p></div>
  </div>
  

  <div id="change-211702" class="journal has-notes">
    <h4><a href="54491.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3826">Jacob Rasmussen</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-04-03" title="2014-04-03 16:21">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-211702-notes"><p>While you might get some mileage by using the Packages/Libraries structure, it is currently not possible to include PSR-4 namespaced packages - so I've created a bug report for this <a href="57604.html" class="issue status-9 priority-2 closed" title="PackageManager is unable to resolve composer PSR-4 namespaces (Closed)">#57604</a></p></div>
  </div>
  

  <div id="change-232020" class="journal has-notes">
    <h4><a href="54491.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/3767">Alexander Opitz</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-10-06" title="2014-10-06 09:56">10 months</a> ago</h4>

    
    <div class="wiki" id="journal-232020-notes"><p>Is there something left over?</p></div>
  </div>
  

  <div id="change-243917" class="journal has-notes has-details">
    <h4><a href="54491.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/33">Mathias Schreiber</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-09" title="2015-01-09 12:04">7 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Needs Feedback</i> to <i>Closed</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-243917-notes"><p>Taken into account in <a href="63909.html" class="issue status-4 priority-2 parent" title="Refactor Extension Manager (Needs Feedback)">#63909</a>.<br />The issues are not linked on purpose, so the refactoring ticket does not get bloated with relations.</p>


	<p>The new EM will import <strong>only</strong> composer packages :)</p></div>
  </div>
  

  <div id="change-248602" class="journal has-notes">
    <h4><a href="54491.html#note-13" class="journal-link">#13</a>
    
    <a name="note-13"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/41316">Patrik Karisch</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-03" title="2015-02-03 13:16">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-248602-notes"><p>Will there be a fix for 6.2? This is an annoying bug, which prevents us from installing extensions with composer.json files, which also requires non Typo3-package.</p>


	<p>For example:</p>


	<p>One extension has this composer.json file:</p>


<pre>
{
    "name": "acme/foobar",
    "type": "typo3-cms-extension",
    "require": {
        "doctrine/cache": "~1.4",

        "composer/installers": "~1.0" 
    }
}
</pre>

	<p>The composer/installers enables me to require the extension in my project roots composer.json and it gets installed into typo3conf/ext/foobar correctly. But I can't enable it, because the EM is complaining about doctrine/cache. But the extension needs this require, so the project roots composer.json gets not clutterd with. So this would be enough in the project root:</p>


<pre>
{
    "name": "acme/project",
    "require": {
        "acme/foobar": "~1.0" 
    }
}
</pre>

	<p>This is a serious blocker to require extensions in the project via composer.</p></div>
  </div>
  

  <div id="change-248604" class="journal has-notes">
    <h4><a href="54491.html#note-14" class="journal-link">#14</a>
    
    <a name="note-14"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/37190">Tilo Baller</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-03" title="2015-02-03 13:29">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-248604-notes"><p>Fully agree with Patrik.</p>


	<p>Why are the <a href="../../external.html?link=http://typo3.org/download/release-notes/typo3-62-release-notes/" class="external">TYPO3 6.2 Release Notes</a> claiming something like <em>"Introducing the concept of Package Management brings interoperability with the whole world of Composer based PHP libraries."</em> and <em>"It is now possible to natively load Composer based libraries."</em> if is just not true and hardly restricted?</p></div>
  </div>
  

  <div id="change-248614" class="journal has-notes">
    <h4><a href="54491.html#note-15" class="journal-link">#15</a>
    
    <a name="note-15"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/37631">Daniel Corn</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-03" title="2015-02-03 14:42">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-248614-notes"><p>Unfortunately Tilo is right. In my opinion TYPO3 has no composer support. Or even worse: it would be better to have no composer integration than the current one.<br />Does anybody know how things are with version 7?</p>


	<p>Anyway I love many parts of TYPO3!</p></div>
  </div>
  

  <div id="change-248615" class="journal has-notes">
    <h4><a href="54491.html#note-16" class="journal-link">#16</a>
    
    <a name="note-16"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/41316">Patrik Karisch</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-02-03" title="2015-02-03 14:47">6 months</a> ago</h4>

    
    <div class="wiki" id="journal-248615-notes"><p>If typo3 doesn't support composer it would be no problem, because we use it out of scope of the EM and only activate the composer installed extensions in the EM. The problem is how the EM wanna handle the composer.json of the extensions as addition to the depends contraint in the ext_emconf.php. There it got stuck if your extension relies on non typo3 stuff... :(</p></div>
  </div>
  

  <div id="change-257134" class="journal has-notes has-details">
    <h4><a href="54491.html#note-17" class="journal-link">#17</a>
    
    <a name="note-17"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-04-29" title="2015-04-29 14:30">3 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Closed</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-257134-notes"><p>Patch set 1 for branch <strong>TYPO3_6-2</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/39055">http://review.typo3.org/39055</a></p></div>
  </div>
  

  <div id="change-257144" class="journal has-notes">
    <h4><a href="54491.html#note-18" class="journal-link">#18</a>
    
    <a name="note-18"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2610">Christian Opitz</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-04-29" title="2015-04-29 15:36">3 months</a> ago</h4>

    
    <div class="wiki" id="journal-257144-notes"><p>Sorry, to reopen this but I needed at least a patch for this in order to get it into my TYPO3 installation. If you need this too, you can add the patch via your composer.json:</p>


<pre>
{
    "name": "vendor/project",
    "description" : "My TYPO3 project",
    "config": {
        "vendor-dir": "Packages/Libraries" 
    },
    "require": {
        "typo3/cms": "6.2.12",
        "vendor/typo3-cms-patches": "*" 
    },
    "repositories": [
        { "type": "composer", "url": "http://composer.typo3.org/" }
        {
            "type": "package",
            "package": {
                "name": "vendor/typo3-cms-patches",
                "version": "0.0.1",
                "type": "patches",
                "require": {
                    "netresearch/composer-patches-plugin": "~1.0" 
                },
                "extra": {
                    "patches": {
                        "typo3/cms": {
                            "6.2.12": {
                                "9fe856ac96e6a53fef8277f36a4a80bace6f0ae9": {
                                    "title": "[BUGFIX] Ignore dependencies on non typo3-cms-extension",
                                    "url": "https://git.typo3.org/Packages/TYPO3.CMS.git/patch/9fe856ac96e6a53fef8277f36a4a80bace6f0ae9" 
                                }
                            }
                        }
                    }
                }
            }
        }
    ]
}
</pre>

	<p>If you want, you can close the issue again.</p></div>
  </div>
  

  <div id="change-265619" class="journal has-details">
    <h4><a href="54491.html#note-19" class="journal-link">#19</a>
    
    <a name="note-19"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-07-13" title="2015-07-13 17:21">21 days</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Category</strong> changed from <i>Extension Manager</i> to <i>7 Composer</i></li>
      
    </ul>
    
    
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-54491-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/54491.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="54491.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/54491 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:38:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
