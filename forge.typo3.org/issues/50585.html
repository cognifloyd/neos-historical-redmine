<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/50585 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:12:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Bug #50585: Validation fails if nested properties of same type are present - TYPO3.Flow - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

#header #right-area, #header #right-area h1, #header #right-area a {
  color:transparent;
}

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/50585.atom" rel="alternate" title="TYPO3.Flow - Bug #50585: Validation fails if nested properties of same type are present" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 current sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="background-image:url(../headerimages/16.jpg);">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/search" accesskey="4" style="color:transparent">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>TYPO3.Flow</h1>
        <div id="quicklinks"></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/flow3-distribution-base" class="level-1 current sorting-0">TYPO3 Flow Base Distribution</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-eel" class="level-2 sorting-0">TYPO3.Eel</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow" class="level-2 current sorting-0">TYPO3.Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid" class="level-2 sorting-0">TYPO3.Fluid</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-kickstart" class="level-2 sorting-0">TYPO3.Kickstart</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-welcome" class="level-2 sorting-0">TYPO3.Welcome</a><a href="../../external.html?link=https://forge.typo3.org/projects/packages" class="level-1 sorting-10">Packages</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3-apps" class="level-1 sorting-30">Applications</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=375" class="query">Open documentation issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/issues?query_id=204" class="query">Recently modified</a>



  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-50585-watcher"></span>


</div>


<h2>Bug #50585</h2>

<div class="issue status-7 priority-1 closed details">
  

  

<div class="subject">
<div><h3>Validation fails if nested properties of same type are present</h3></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/4354">Martin Lipp</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-07-31" title="2013-07-31 11:40">about 2 years</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2014-07-11" title="2014-07-11 20:19">about 1 year</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Resolved</td>
    <th class="start-date">Start date:</th><td class="start-date">2013-07-31</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Must have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to"><a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a></td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent">100%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">Validation</td>
    
    <th></th>
    <td></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version">-</td>
    
</tr>
<tr>
	<th>PHP Version:</th><td></td>
	<th>Complexity:</th><td></td>
</tr>
<tr>
	<th>Has patch:</th><td>No</td>
	<th>Affected Flow version:</th><td>Flow 2.0.0</td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>The GenericObjectValidator dumps all prior calculated validation results, when validating a nested property which has the same class name as the validated object.</p>


	<p>Quick example:<br /><pre>
class Office {
    /**
     * @var string
     * @Flow\Validate(type="StringLength", options={ "minimum"=3, "maximum"=100 })
     * @Flow\Validate(type="NotEmpty")
     * @ORM\Column(length=100)
     */
    protected $title;

    /**
     * @var \Doctrine\Common\Collections\Collection&lt;\Company\Project\Domain\Model\OpeningHours&gt;
     * @ORM\OneToMany(mappedBy="office")
     */
    protected $openingHours;

    ...

class OpeningHours {
    /**
     * @var \Company\Project\Domain\Model\Office
     * @ORM\ManyToOne(inversedBy="openingHours")
     */
    protected $office;

    ...
</pre></p>


	<p>When creating a new Office with a form including one ore more openingHours, all validation errors of properties defined prior to $openingHours are dumped and therefore not displayed as errors. If no other validation error after the $openingHours property occurs, the createAction is executed with no error messages (but not persisted, seems that the validation here works). In the above example an empty $title would pass the validation.</p>


	<p>I've tracked it down to the GenericObjectValidator and the ValidatorResolver:<br />The ValidatorResolver only creates a new baseValidatorConjunction, if none exists for this class name. Otherwise it uses the existing one. Since the GenericObjectValidator's validate() method resets its member $this->result on every call, all results of prior Office properties are deleted as soon as it comes to the validation of the openingHours' $office property.<br />This does not happen in one of my older projects (with FLOW3 1.1), because there the GenericObjectValidator does not store its results in a member variable, but only calculates it inside the method.<br />Also it only seems to happen inside collections.</p>
  </div>








<hr />
<div id="relations">
<div class="contextual">

</div>

<p><strong>Related issues</strong></p>


<form>
<table class="list issues">

<tr class="issue hascontextmenu" id="relation-9582">
<td class="checkbox"><input name="ids[]" type="checkbox" value="46340" /></td>
<td class="subject">related to 
    TYPO3.Flow - 
    <a href="46340.html" class="issue status-7 priority-2 closed">Task #46340</a>: Improve validation to speed up Flow
</td>
<td class="status">Resolved</td>
<td class="start_date">2013-03-15</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

</table>
</form>


<form action="../../external.html?link=https://forge.typo3.org/issues/50585/relations" id="new-relation-form" method="post" onsubmit="new Ajax.Request('/issues/50585/relations', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Form.Element.focus('relation_issue_to_id');}, parameters:Form.serialize(this)}); return false;" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="IjgAk+sryuS7AAkPn7/ITUV652f6cwFBHN6GNTvW7o8=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates">related to</option>
<option value="duplicates">duplicates</option>
<option value="duplicated">duplicated by</option>
<option value="blocks">blocks</option>
<option value="blocked">blocked by</option>
<option value="precedes">precedes</option>
<option value="follows">follows</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="Element.toggle('new-relation-form'); this.blur(); return false;">Cancel</a>
</p>

<div id="related_issue_candidates" class="autocomplete"></div>
<script type="text/javascript">
//<![CDATA[
observeRelatedIssueField('/issues/auto_complete?id=50585&amp;project_id=package-typo3-flow')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>

</div>


</div>


<div id="issue-changesets">
<h3>Associated revisions</h3>

    <div class="changeset odd">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository/revisions/09756f36380d948ac84916419e71465a54bd7c2f" title="Revision 09756f36">Revision 09756f36</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 17:52">almost 2 years</a> ago</span></p>
    <div class="wiki">
        <p>[BUGFIX] Fix validation if nested properties of same type are present</p>


	<p>The performance optimization in <a href="46340.html" class="issue status-7 priority-2 closed" title="Improve validation to speed up Flow (Resolved)">#46340</a><br />changed the isValid() method of the<br />GenericObjectValidator to use the result<br />property while recursing through the properties<br />of the to be validated object.</p>


	<p>Since GenericObjectValidator is reused, it could<br />be the case that this result set is reset to<br />empty value.</p>


	<p>Revert this change and set the result property<br /><strong>after</strong> all properties of the to be validated<br />object are validated.</p>


	<p>Resolves: <a href="50585.html" class="issue status-7 priority-1 closed" title="Validation fails if nested properties of same type are present (Resolved)">#50585</a><br />Related: <a href="46340.html" class="issue status-7 priority-2 closed" title="Improve validation to speed up Flow (Resolved)">#46340</a><br />Releases: 2.0, master<br />Change-Id: I178ac02e7bcfc9748b9da4a74f51314a34717e66</p>
    </div>
    </div>

    <div class="changeset even">
    <p><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository/revisions/a6e5f720a486e1af61f9027b5bd13b05174c4ac9" title="Revision a6e5f720">Revision a6e5f720</a><br />
        <span class="author">Added by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-12-16" title="2013-12-16 10:44">over 1 year</a> ago</span></p>
    <div class="wiki">
        <p>[BUGFIX] Fix validation if nested properties of same type are present</p>


	<p>The performance optimization in <a href="46340.html" class="issue status-7 priority-2 closed" title="Improve validation to speed up Flow (Resolved)">#46340</a><br />changed the isValid() method of the<br />GenericObjectValidator to use the result<br />property while recursing through the properties<br />of the to be validated object.</p>


	<p>Since GenericObjectValidator is reused, it could<br />be the case that this result set is reset to<br />empty value.</p>


	<p>Revert this change and set the result property<br /><strong>after</strong> all properties of the to be validated<br />object are validated.</p>


	<p>Resolves: <a href="50585.html" class="issue status-7 priority-1 closed" title="Validation fails if nested properties of same type are present (Resolved)">#50585</a><br />Related: <a href="46340.html" class="issue status-7 priority-2 closed" title="Improve validation to speed up Flow (Resolved)">#46340</a><br />Releases: 2.0, master<br />Change-Id: I178ac02e7bcfc9748b9da4a74f51314a34717e66</p>
    </div>
    </div>


</div>



<div id="history">
<h3>History</h3>

  <div id="change-176308" class="journal has-notes">
    <h4><a href="50585.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/4354">Martin Lipp</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-08-04" title="2013-08-04 19:29">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-176308-notes"><p>I was able to reproduce the bug in the TYPO3.Blog package. Simply add the following form elements to the Post/New.html form:<br /><pre>
&lt;f:form.textfield id="comments.0.author" property="comments.0.author" /&gt;
&lt;f:form.textfield id="comments.0.emailaddress" property="comments.0.emailAddress" /&gt;
&lt;f:form.textarea id="comments.0.content" property="comments.0.content" rows="10" cols="50"/&gt;
</pre><br />Now you are able to add one comment directly when creating a post. When submitting the empty form, only the validation errors for the comment are shown. No errors for the post's title, post's author, etc. are displayed anymore. This is because the models are of the same structure as in my above example (Office being Post, and OpeningHours being Comment). Filling the form elements for the comment only, the validation passes and a new Post is created (with an empty title, no content text, ...).</p>


	<p>A possible solution would be, to skip the validation of the $post property in the Comment model, if and only if the Comment is created as a nested property of a collection. I'm guessing this could be achieved by checking the mappedBy annotation of the Post's $comments property and skipping the property in Comment which is defined by the mappedBy annotation. This should be safe, since $post is just a back reference to the currently created Post (where the validation happens anyway).</p></div>
  </div>
  

  <div id="change-184012" class="journal has-notes has-details">
    <h4><a href="50585.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-09-24" title="2013-09-24 18:13">almost 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Accepted</i></li>
      
       <li><strong>Assigned To</strong> set to <i>Bastian Waidelich</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-184012-notes"><p>This is a severe bug and I can reproduce it.</p></div>
  </div>
  

  <div id="change-184676" class="journal has-notes">
    <h4><a href="50585.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-09-30" title="2013-09-30 20:53">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184676-notes"><p>Martin Lipp wrote:</p>


<blockquote>

	<p>This does not happen in one of my older projects (with FLOW3 1.1), because there the GenericObjectValidator does not store its results in a member variable, but only calculates it inside the method.</p>


</blockquote>

	<p>Are you sure you mean FLOW3 1.1 and not 1.0?<br />The GenericObjectValidator looks quite similar in 1.1 and  2.0</p></div>
  </div>
  

  <div id="change-184706" class="journal has-notes">
    <h4><a href="50585.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/4354">Martin Lipp</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-01" title="2013-10-01 00:04">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184706-notes"><p>Helmut Hummel wrote:</p>


<blockquote>

	<p>Martin Lipp wrote:</p>


<blockquote>

	<p>This does not happen in one of my older projects (with FLOW3 1.1), because there the GenericObjectValidator does not store its results in a member variable, but only calculates it inside the method.</p>


</blockquote>

	<p>Are you sure you mean FLOW3 1.1 and not 1.0?<br />The GenericObjectValidator looks quite similar in 1.1 and  2.0</p>


</blockquote>

	<p>Yes. I checked again it works fine with FLOW3 1.1. I also quickly migrated the package to Flow 2.0, where the bug appears immediately. But you're right there is no difference in the GenericObjectValidator (don't know what I saw back then). The bug must be somewhere else, although it is true that - in many cases - $this->results is not empty when entering the validate() method, where it is overwritten with an empty result.</p></div>
  </div>
  

  <div id="change-184780" class="journal has-notes has-details">
    <h4><a href="50585.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-01" title="2013-10-01 16:21">almost 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Accepted</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-184780-notes"><p>Patch set 1 for branch <strong>master</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/24218">https://review.typo3.org/24218</a></p></div>
  </div>
  

  <div id="change-184907" class="journal has-notes">
    <h4><a href="50585.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 12:13">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184907-notes"><p>Patch set 2 for branch <strong>master</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/24218">https://review.typo3.org/24218</a></p></div>
  </div>
  

  <div id="change-184908" class="journal has-notes">
    <h4><a href="50585.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 12:16">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184908-notes"><p>Martin Lipp wrote:</p>


<blockquote>

	<p>Yes. I checked again it works fine with FLOW3 1.1. I also quickly migrated the package to Flow 2.0, where the bug appears immediately. But you're right there is no difference in the GenericObjectValidator (don't know what I saw back then). The bug must be somewhere else, although it is true that - in many cases - $this->results is not empty when entering the validate() method, where it is overwritten with an empty result.</p>


</blockquote>

	<p>Can you check if the patch in Gerrit works for you? Thanks.</p></div>
  </div>
  

  <div id="change-184967" class="journal has-notes">
    <h4><a href="50585.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 16:26">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184967-notes"><p>Breaking change was in <a href="46340.html" class="issue status-7 priority-2 closed" title="Improve validation to speed up Flow (Resolved)">#46340</a></p></div>
  </div>
  

  <div id="change-184983" class="journal has-notes">
    <h4><a href="50585.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 17:25">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184983-notes"><p>Patch set 3 for branch <strong>master</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/24218">https://review.typo3.org/24218</a></p></div>
  </div>
  

  <div id="change-184989" class="journal has-notes">
    <h4><a href="50585.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/4354">Martin Lipp</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 17:34">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184989-notes"><p>Helmut Hummel wrote:</p>


<blockquote>

	<p>Martin Lipp wrote:</p>


<blockquote>

	<p>Yes. I checked again it works fine with FLOW3 1.1. I also quickly migrated the package to Flow 2.0, where the bug appears immediately. But you're right there is no difference in the GenericObjectValidator (don't know what I saw back then). The bug must be somewhere else, although it is true that - in many cases - $this->results is not empty when entering the validate() method, where it is overwritten with an empty result.</p>


</blockquote>

	<p>Can you check if the patch in Gerrit works for you? Thanks.</p>


</blockquote>

	<p>It works (at least patch 2 does).</p></div>
  </div>
  

  <div id="change-184998" class="journal has-notes">
    <h4><a href="50585.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-02" title="2013-10-02 17:52">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-184998-notes"><p>Patch set 4 for branch <strong>master</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/24218">https://review.typo3.org/24218</a></p></div>
  </div>
  

  <div id="change-185048" class="journal has-notes">
    <h4><a href="50585.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-03" title="2013-10-03 09:50">almost 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-185048-notes"><p>Martin Lipp wrote:</p>


<blockquote>

	<p>Helmut Hummel wrote:</p>


<blockquote>

	<p>Can you check if the patch in Gerrit works for you? Thanks.</p>


</blockquote>

	<p>It works (at least patch 2 does).</p>


</blockquote>

	<p>Thanks.</p>


	<p>Patch 3 basically does the same (keeping the validation results of the top level object, when recursing through its properties).</p></div>
  </div>
  

  <div id="change-185069" class="journal has-notes has-details">
    <h4><a href="50585.html#note-13" class="journal-link">#13</a>
    
    <a name="note-13"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-10-03" title="2013-10-03 11:36">almost 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Resolved</i></li>
      
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-185069-notes"><p>Applied in changeset <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository/revisions/09756f36380d948ac84916419e71465a54bd7c2f" class="changeset" title="[BUGFIX] Fix validation if nested properties of same type are present The performance optimizati...">09756f36380d948ac84916419e71465a54bd7c2f</a>.</p></div>
  </div>
  

  <div id="change-192470" class="journal has-notes has-details">
    <h4><a href="50585.html#note-14" class="journal-link">#14</a>
    
    <a name="note-14"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-12-02" title="2013-12-02 13:35">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Resolved</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-192470-notes"><p>Patch set 1 for branch <strong>2.0</strong> of project <strong>Packages/TYPO3.Flow</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/25875">https://review.typo3.org/25875</a></p></div>
  </div>
  

  <div id="change-196723" class="journal has-notes">
    <h4><a href="50585.html#note-15" class="journal-link">#15</a>
    
    <a name="note-15"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2013-12-16" title="2013-12-16 10:45">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-196723-notes"><p>Patch set 2 for branch <strong>2.0</strong> of project <strong>Packages/TYPO3.Flow</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/25875">https://review.typo3.org/25875</a></p></div>
  </div>
  

  <div id="change-223969" class="journal has-notes has-details">
    <h4><a href="50585.html#note-16" class="journal-link">#16</a>
    
    <a name="note-16"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/activity?from=2014-07-11" title="2014-07-11 20:19">about 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Resolved</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-223969-notes"><p>Applied in changeset <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow/repository/revisions/a6e5f720a486e1af61f9027b5bd13b05174c4ac9" class="changeset" title="[BUGFIX] Fix validation if nested properties of same type are present The performance optimizati...">a6e5f720a486e1af61f9027b5bd13b05174c4ac9</a>.</p></div>
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-50585-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/50585.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="50585.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/50585 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:12:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
