<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/54701 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:29:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Task #54701: Cache global TypoScript template in backend - Core - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/54701.atom" rel="alternate" title="Core - Task #54701: Cache global TypoScript template in backend" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 current sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/search" accesskey="4" style="">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>Core</h1>
        <div id="quicklinks"><p>Development of TYPO3 CMS</p></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/wiki" class="wiki">Wiki</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core" class="level-1 current sorting-10">Core</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-search" class="level-2 sorting-0">Indexed Search</a><a href="../../external.html?link=https://forge.typo3.org/projects/extension-linkvalidator" class="level-2 sorting-0">Linkvalidator</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-releasecycles" class="level-2 sorting-0">Release Cycles</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-team" class="level-2 sorting-0">Team Resources</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-workspaces" class="level-2 sorting-0">Workspaces & Versioning</a><a href="../../external.html?link=https://forge.typo3.org/projects/usability" class="level-2 sorting-10">TYPO3 CMS Usability Team</a><a href="../../external.html?link=https://forge.typo3.org/projects/extensions" class="level-1 sorting-20">Community Extensions</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3v4-distribution" class="level-1 sorting-44">Distributions</a><a href="../../external.html?link=https://forge.typo3.org/projects/cms-feature-requests" class="level-1 sorting-50">Feature-Requests</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-v62" class="level-1 sorting-620">TYPO3 6.2 Projects (+)</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-archived" class="level-1 sorting-1000">(Archived Projects)</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=219" class="query">Easy tasks</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=391" class="query">FAL Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=204" class="query">Recently modified</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=523" class="query">Regressions</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues?query_id=459" class="query">Roadmap v7</a>



  
    <div id="watchers">
      

<h3>Watchers (3)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/414">Oliver Klee</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/2039">Alexander Stehlik</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/users/832">Stefan Neufeind</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-54701-watcher"></span>


</div>


<h2>Task #54701</h2>

<div class="issue status-1 priority-2 child details">
  

  

<div class="subject">
<div><p><a href="55070.html" class="issue status-2 priority-3 overdue parent">Epic #55070</a>: Workpackages</p><div><p><a href="55065.html" class="issue status-1 priority-3 overdue child parent">Epic #55065</a>: WP: Overall System Performance (Backend and Frontend)</p><div><p><a href="55656.html" class="issue status-2 priority-3 overdue child parent">Epic #55656</a>: Optimize overall Extbase performance</p><div><p><a href="55079.html" class="issue status-1 priority-2 child parent">Story #55079</a>: review Extbase caching for frontend and backend</p><div><h3>Cache global TypoScript template in backend</h3></div></div></div></div></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-02" title="2014-01-02 11:48">over 1 year</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-06" title="2015-01-06 21:00">7 months</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">New</td>
    <th class="start-date">Start date:</th><td class="start-date">2014-01-02</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to"><a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a></td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="todo" style="width: 100%;"></td></tr></table><p class="pourcent">0%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">Caching</td>
    
    <th class="spent-time">Spent time:</th>
    <td class="spent-time"><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/issues/54701/time_entries">5.00 hours</a></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version">-</td>
    
</tr>
<tr>
	<th>TYPO3 Version:</th><td>6.2</td>
	<th>Complexity:</th><td>hard</td>
</tr>
<tr>
	<th>PHP Version:</th><td></td>
	<th>Sprint Focus:</th><td></td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Hey guys,</p>


	<p>when profiling, why extbase backend modules are too slow, we found that parsing the TypoScript took up a hole lot of time at every single request. The TypoScript is not cached in the backend, because the condition for caching relys on $GLOBALS['TSFE']->all.</p>


	<p>If we exchange that for a condition on the TemplateService instead, it should properly cache the TypoScript.</p>


	<p>I would be interested in some oppinion about wether or not we have to care for things that might invalidate the cache.</p>


	<p>regards, foertel</p>
  </div>








<hr />
<div id="relations">
<div class="contextual">

</div>

<p><strong>Related issues</strong></p>


<form>
<table class="list issues">

<tr class="issue hascontextmenu" id="relation-10180">
<td class="checkbox"><input name="ids[]" type="checkbox" value="55028" /></td>
<td class="subject">related to 
    Core - 
    <a href="55028.html" class="issue status-9 priority-2 closed">Bug #55028</a>: Static TS must be available even when there is no page UID
</td>
<td class="status">Closed</td>
<td class="start_date">2014-01-15</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

<tr class="issue hascontextmenu" id="relation-10151">
<td class="checkbox"><input name="ids[]" type="checkbox" value="54571" /></td>
<td class="subject">duplicated by 
    Core - 
    <a href="54571.html" class="issue status-9 priority-1 closed child">Task #54571</a>: Extbase: Avoid TS parsing in BE if not necessary
</td>
<td class="status">Closed</td>
<td class="start_date">2013-12-22</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

<tr class="issue hascontextmenu" id="relation-10187">
<td class="checkbox"><input name="ids[]" type="checkbox" value="55023" /></td>
<td class="subject">duplicated by 
    Core - 
    <a href="55023.html" class="issue status-9 priority-2 closed">Bug #55023</a>: List Module in Backend is very slow due to Extbase&#39;s Typo...
</td>
<td class="status">Closed</td>
<td class="start_date">2014-01-15</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

<tr class="issue hascontextmenu" id="relation-10136">
<td class="checkbox"><input name="ids[]" type="checkbox" value="54813" /></td>
<td class="subject">blocked by 
    Core - 
    <a href="54813.html" class="issue status-1 priority-1 child">Task #54813</a>: BackendConfigurationManager figures out wrong pid
</td>
<td class="status">New</td>
<td class="start_date">2014-01-07</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

</table>
</form>


<form action="../../external.html?link=https://forge.typo3.org/issues/54701/relations" id="new-relation-form" method="post" onsubmit="new Ajax.Request('/issues/54701/relations', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Form.Element.focus('relation_issue_to_id');}, parameters:Form.serialize(this)}); return false;" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="IjgAk+sryuS7AAkPn7/ITUV652f6cwFBHN6GNTvW7o8=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates">related to</option>
<option value="duplicates">duplicates</option>
<option value="duplicated">duplicated by</option>
<option value="blocks">blocks</option>
<option value="blocked">blocked by</option>
<option value="precedes">precedes</option>
<option value="follows">follows</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="Element.toggle('new-relation-form'); this.blur(); return false;">Cancel</a>
</p>

<div id="related_issue_candidates" class="autocomplete"></div>
<script type="text/javascript">
//<![CDATA[
observeRelatedIssueField('/issues/auto_complete?id=54701&amp;project_id=typo3cms-core')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>

</div>


</div>




<div id="history">
<h3>History</h3>

  <div id="change-197727" class="journal has-notes has-details">
    <h4><a href="54701.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-02" title="2014-01-02 11:55">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>New</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-197727-notes"><p>Patch set 1 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-197730" class="journal has-notes">
    <h4><a href="54701.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-02" title="2014-01-02 11:57">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-197730-notes"><p>Patch set 2 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-197790" class="journal has-notes">
    <h4><a href="54701.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2775">Lorenz Ulrich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-03" title="2014-01-03 09:06">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-197790-notes"><pre>
if ($cc = $this-&gt;getCurrentPageData()) {
</pre>

	<p>also delivers the page data if the page is called with &#38;no_cache=1, while</p>


<pre>
if ($GLOBALS['TSFE']-&gt;all) {
</pre>

	<p>doesn't. I'm not sure if that behaviour is a problem.</p></div>
  </div>
  

  <div id="change-197811" class="journal has-notes">
    <h4><a href="54701.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-03" title="2014-01-03 12:56">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-197811-notes"><p>Patch set 3 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-197813" class="journal has-notes">
    <h4><a href="54701.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-03" title="2014-01-03 13:13">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-197813-notes"><p>Patch set 4 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-197822" class="journal has-notes">
    <h4><a href="54701.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/317">Ernesto Baschny</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-03" title="2014-01-03 15:18">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-197822-notes"><p>My stomach feeling is that this is not the right solution, because this particular API is not intended to be used that way. This is expected to be called from the frontend context only and thus having a working and reliable TSFE set up.</p>


	<p>Since Extbase needs this in the backend, I think the least disturbance in this area would be to improve on the "dummy-TSFE" creation process in Extbase to make sure TSFE->all is also available for later caching.</p>


	<p>Just a random thought without digging concretely into the code. I fear that we cannot predict the side effects of the proposed patch so far.</p></div>
  </div>
  

  <div id="change-198238" class="journal has-notes">
    <h4><a href="54701.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-07" title="2014-01-07 16:57">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198238-notes"><p>Hey Ernesto,</p>


	<p>i updated the code accordingly. At the moment there is no "dummy-TSFE" in backend context, but I think it's allright to set up TSFE->all for this.</p>


	<p>At the moment it simply does not work, because of the blocking issue <a href="54813.html" class="issue status-1 priority-1 child" title="BackendConfigurationManager figures out wrong pid (New)">#54813</a>.</p>


	<p>So we will have to fix that first.</p></div>
  </div>
  

  <div id="change-198239" class="journal has-notes">
    <h4><a href="54701.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-07" title="2014-01-07 16:59">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198239-notes"><p>Patch set 5 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-198623" class="journal has-notes">
    <h4><a href="54701.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 12:21">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198623-notes"><p>Patch set 6 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-198624" class="journal has-notes">
    <h4><a href="54701.html#note-10" class="journal-link">#10</a>
    
    <a name="note-10"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 12:24">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198624-notes"><p>Actually this patch now has become an extbase-only patch. :) so someone might just move that ticket ...</p></div>
  </div>
  

  <div id="change-198629" class="journal has-notes">
    <h4><a href="54701.html#note-11" class="journal-link">#11</a>
    
    <a name="note-11"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 13:00">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198629-notes"><p>Patch set 7 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-198630" class="journal has-notes">
    <h4><a href="54701.html#note-12" class="journal-link">#12</a>
    
    <a name="note-12"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 13:02">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198630-notes"><p>Patch set 8 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-198631" class="journal has-notes">
    <h4><a href="54701.html#note-13" class="journal-link">#13</a>
    
    <a name="note-13"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 13:03">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198631-notes"><p>Patch set 9 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-198678" class="journal has-notes">
    <h4><a href="54701.html#note-14" class="journal-link">#14</a>
    
    <a name="note-14"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-10" title="2014-01-10 17:04">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-198678-notes"><p>Patch set 10 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26618">https://review.typo3.org/26618</a></p></div>
  </div>
  

  <div id="change-199320" class="journal has-notes">
    <h4><a href="54701.html#note-15" class="journal-link">#15</a>
    
    <a name="note-15"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-15" title="2014-01-15 16:00">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199320-notes"><p>First of all: thanks to all of you for commenting. I would like to move the discussion from gerrit to forge to keep some overview.</p>


<blockquote>

	<p><strong>Alexander Stehlik</strong><br />This is definitely a breaking change. Before the templates included in the first root page were loaded. Now they are not available any more.</p>


</blockquote>

	<p>That is right. I am not entirely sure, but I think this was wrong in the first place. In a module without pagetree no page is present and thus no TypoScript from the pagetree should be loaded.</p>


<blockquote>

	<p><strong>Benjamin Mack</strong><br />can we also please get rid of the constant and the function "getDefaultBackendStoragePid()" as well in order to keep the code clean?</p>


</blockquote>

	<p>Oliver requested this constant and I thought it might make sense to use it instead of writing some magical integer into the code.</p>


	<p>Removing the method would need some more inspection. I think it's there between some interface-dependency and difference between backend- and frontend-configurationManager.</p></div>
  </div>
  

  <div id="change-199325" class="journal has-notes">
    <h4><a href="54701.html#note-16" class="journal-link">#16</a>
    
    <a name="note-16"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/414">Oliver Klee</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-15" title="2014-01-15 16:11">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199325-notes"><p>If we still need this number, we should keep it as a constant instead of a magic number. Magic numbers are no-gos as far as readability is concerned.</p></div>
  </div>
  

  <div id="change-199326" class="journal has-notes">
    <h4><a href="54701.html#note-17" class="journal-link">#17</a>
    
    <a name="note-17"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2632">Felix Oertel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-15" title="2014-01-15 16:13">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199326-notes"><p>Oliver Klee wrote:</p>


<blockquote>

	<p>If we still need this number</p>


</blockquote>

	<p>We will - anyway - need it, yes. ;)</p></div>
  </div>
  

  <div id="change-199365" class="journal has-notes">
    <h4><a href="54701.html#note-18" class="journal-link">#18</a>
    
    <a name="note-18"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2039">Alexander Stehlik</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-15" title="2014-01-15 21:02">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199365-notes"><p>I think Marc Bastian Heinrichs' idea is also quite interesting for generating the configuration in the Backend (quote from <a class="external" href="../../external.html?link=https://review.typo3.org/26675/">https://review.typo3.org/26675/</a>):</p>


<blockquote>

	<p>I would like to see this change reverted and have a better solution than having to use ext_typoscript_setup.txt, which is inofficially deprecated since ages. E.g. "registering" the backend context page id for a separated module where the typoscipt is integrated. By this solution the TS for BE and FE is separated and could be parsed in the single context.</p>


</blockquote>

	<p>Basically the only configuration that is independent from the Pagetree is Extension configuration or LocalConfiguration.</p>


	<p>As far as I can see we have these contexts where we do not have a PID:</p>


	<ul>
	<li>Scheduler tasks</li>
		<li>Backend Modules without Pagetree</li>
		<li>Command line controllers</li>
	</ul>


	<p>So what I suggest are two possibilities to influence the building of the TypoScript from the Pagetree in these cases:</p>


	<ol>
	<li>add an Extension setting (for the ExtensionManager) where a default PID can be set from which the configuration for pageless contexts should be build (maybe there can be one setting per case - scheduler, Backend Module, Command line?)</li>
		<li>allow passing the PID from which the configuration should be read to the ConfigurationManager so that Extensions can provide their own way to determine the PID from which the configuration should be build.</li>
	</ol>


	<p>I'm looking forward to your feedback.</p></div>
  </div>
  

  <div id="change-199394" class="journal has-notes">
    <h4><a href="54701.html#note-19" class="journal-link">#19</a>
    
    <a name="note-19"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/1322">Marc Bastian Heinrichs</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-15" title="2014-01-15 23:13">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199394-notes"><p>The new solution for all the frontend typoscript hassle in backend modules should also have in mind getting rid of all the ext_typoscript_setup.txt files in core backend modules, which need to work also without a pagetree.<br />So we should discuss, if also registering a typoscript file directly for backend modules could be a way to handle this.</p>


	<p>Because atm all the typoscript from the ext_typoscript_setup.txt files in core backend modules are parsed and available in frontend without need.</p></div>
  </div>
  

  <div id="change-199433" class="journal has-notes">
    <h4><a href="54701.html#note-20" class="journal-link">#20</a>
    
    <a name="note-20"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/50">Helmut Hummel</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-16" title="2014-01-16 10:04">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199433-notes"><p>Marc Bastian Heinrichs wrote:</p>


<blockquote>

	<p>So we should discuss, if also registering a typoscript file directly for backend modules could be a way to handle this.</p>


</blockquote>

	<p>I like this idea! Alternative would be to assume a certain location for extbase extension backend TypoScript-Configuration, e.g. Configuration/Backend/Module.ts<br />We could then load and cache the configuration for all modules of one extension.</p>


<blockquote>

	<p>Because atm all the typoscript from the ext_typoscript_setup.txt files in core backend modules are parsed and available in frontend without need.</p>


</blockquote>

	<p>Agreed.</p></div>
  </div>
  

  <div id="change-199488" class="journal has-notes">
    <h4><a href="54701.html#note-21" class="journal-link">#21</a>
    
    <a name="note-21"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-16" title="2014-01-16 15:15">over 1 year</a> ago</h4>

    
    <div class="wiki" id="journal-199488-notes"><p>Patch set 1 for branch <strong>master</strong> of project <strong>Packages/TYPO3.CMS</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=https://review.typo3.org/26876">https://review.typo3.org/26876</a></p></div>
  </div>
  

  <div id="change-201468" class="journal has-details">
    <h4><a href="54701.html#note-22" class="journal-link">#22</a>
    
    <a name="note-22"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/702">Ingo Schmitt</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2014-01-30" title="2014-01-30 16:38">over 1 year</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Parent task</strong> set to <i>#55079</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-243475" class="journal has-details">
    <h4><a href="54701.html#note-23" class="journal-link">#23</a>
    
    <a name="note-23"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36415">Wouter Wolters</a> <a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms-core/activity?from=2015-01-06" title="2015-01-06 21:00">7 months</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>New</i></li>
      
       <li><strong>Target version</strong> deleted (<strike><i>6.2.0</i></strike>)</li>
      
    </ul>
    
    
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-54701-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/54701.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="54701.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/54701 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:29:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
