<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from forge.typo3.org/issues/43457 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:04:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Feature #43457: Cacheable partials - TYPO3.Fluid - TYPO3 Forge</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../themes/TYPO3/stylesheets/applicationfaba.css?1437165176" media="all" rel="stylesheet" type="text/css" />
<script src="../javascripts/prototypefaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/effectsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/dragdropfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/controlsfaba.js?1437165176" type="text/javascript"></script>
<script src="../javascripts/applicationfaba.js?1437165176" type="text/javascript"></script>
<script src="../plugin_assets/flow_design_helpers/javascripts/custom-scriptsf881.js?1437165331" type="text/javascript"></script>

<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1437165176);}
    </style>
<![endif]-->
 <link href="../plugin_assets/redmine_backlogs/stylesheets/jquery/jquery.jqplot.minb674.css?1437165332" media="screen" rel="stylesheet" type="text/css" />

<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-1.6.2.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery-ui-1.8.16.custom.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jeditable.minib674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.scrollfollowb674.js?1437165332" type="text/javascript"></script>

<!--[if IE]>
<script src="/plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/excanvas.js?1437165332" type="text/javascript"></script>
<![endif]-->
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/jquery.jqplotb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.highlighterb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasTextRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.canvasAxisTickRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.jqplot/plugins/jqplot.enhancedLegendRenderer.minb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/jquery/jquery.cookieb674.js?1437165332" type="text/javascript"></script>

<script type="text/javascript"
        src="../rb/server_variables.js">
</script>
<script src="../plugin_assets/redmine_backlogs/javascripts/commonb674.js?1437165332" type="text/javascript"></script>
<script src="../plugin_assets/redmine_backlogs/javascripts/burndownb674.js?1437165332" type="text/javascript"></script>


<style type="text/css">

#header #right-area, #header #right-area h1, #header #right-area a {
  color:#FFFFFF;
}

</style>

<!-- page specific tags -->

    <link href="../../external.html?link=https://forge.typo3.org/issues/43457.atom" rel="alternate" title="TYPO3.Fluid - Feature #43457: Cacheable partials" type="application/atom+xml" />
    <link href="../themes/TYPO3/stylesheets/scmfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" />
<script src="../javascripts/context_menufaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/context_menufaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /><script src="../javascripts/jstoolbar/jstoolbarfaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/textilefaba.js?1437165176" type="text/javascript"></script><script src="../javascripts/jstoolbar/lang/jstoolbar-enfaba.js?1437165176" type="text/javascript"></script><link href="../stylesheets/jstoolbarfaba.css?1437165176" media="screen" rel="stylesheet" type="text/css" /></head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/login" class="login">Sign in</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../external.html?link=https://forge.typo3.org/" class="home">Home</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects" class="projects">Projects</a></li>
<li><a href="../../external.html?link=http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="header-left">
        <div id="header-menu">
            <a href="../../external.html?link=https://forge.typo3.org/" class="start">Start</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3cms" class="level-0 sorting-10">TYPO3 CMS</a><a href="../../external.html?link=https://forge.typo3.org/projects/typo3neos" class="level-0 sorting-20">TYPO3 Neos</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3" class="level-0 current sorting-20">TYPO3 Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/team-docteam" class="level-0 sorting-26">Documentation</a><a href="../../external.html?link=https://forge.typo3.org/projects/other" class="level-0 sorting-30">other</a>
        </div>
    </div>
    
    <div id="right-area"  style="background-color:#FFFFFF;background-image:url(../headerimages/517.jpg);">
        <div id="quick-search">
            <form action="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/search" method="get">
            <input name="issues" type="hidden" value="1" />
            <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/search" accesskey="4" style="color:#FFFFFF">Search</a>:
            <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
            </form>
        </div>

        <h1>TYPO3.Fluid</h1>
        <div id="quicklinks"><p>Wiki of the <a href="../../external.html?link=http://forge.typo3.org/projects/typo3v4-mvc/wiki" class="external">Extbase Project</a></p></div>
    </div>
    
    <div id="main-menu">
        <input class="projectsearch placeholder" id="projectname_project" name="projectname[project]" onfocus="this.value = &quot;&quot;; $(this).removeClassName(&quot;placeholder&quot;);" size="30" type="text" value="Project title search" /><div class="auto_complete" id="projectname_project_auto_complete"></div><script type="text/javascript">
//<![CDATA[
var projectname_project_auto_completer = new Ajax.Autocompleter('projectname_project', 'projectname_project_auto_complete', '/projects/auto_complete', {afterUpdateElement:function(element, value) { var identNode = $(value).select(".identifier"); window.location.href="/projects/"+identNode[0].innerHTML }})
//]]>
</script>
        <ul><li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid" class="overview">Overview</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity" class="activity">Activity</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/roadmap" class="roadmap">Roadmap</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues" class="issues selected">Issues</a></li>
<li><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/repository" class="repository">Repository</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="leftmenu">
        <a href="../../external.html?link=https://forge.typo3.org/projects/flow3-distribution-base" class="level-1 current sorting-0">TYPO3 Flow Base Distribution</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-eel" class="level-2 sorting-0">TYPO3.Eel</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-flow" class="level-2 sorting-0">TYPO3.Flow</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid" class="level-2 current sorting-0">TYPO3.Fluid</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-kickstart" class="level-2 sorting-0">TYPO3.Kickstart</a><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-welcome" class="level-2 sorting-0">TYPO3.Welcome</a><a href="../../external.html?link=https://forge.typo3.org/projects/packages" class="level-1 sorting-10">Packages</a><a href="../../external.html?link=https://forge.typo3.org/projects/flow3-apps" class="level-1 sorting-30">Applications</a>
    </div>
    <div id="sidebar">        
        
  <h3>Issues</h3>
<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?set_filter=1">View all issues</a><br />

<a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues/report">Summary</a><br />







<h3>Custom queries</h3><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=195" class="query">1.0 beta 1</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=133" class="query">Hierarchical Issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=322" class="query">Most wanted Bugfixes</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=321" class="query">Most wanted Features</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=167" class="query">My open issues</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=203" class="query">New &amp; Unassigned</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=90" class="query">Open Bugs</a><br /><a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/issues?query_id=204" class="query">Recently modified</a>



  
    <div id="watchers">
      

<h3>Watchers (1)</h3>

<ul><li><a href="../../external.html?link=https://forge.typo3.org/users/2409">Benno Weinzierl</a></li></ul>

    </div>
  

        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span class="issue-43457-watcher"></span>


</div>


<h2>Feature #43457</h2>

<div class="issue status-9 priority-2 closed details">
  

  

<div class="subject">
<div><h3>Cacheable partials</h3></div>
</div>
        <p class="author">
        Added by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-29" title="2012-11-29 16:59">over 2 years</a> ago.
        
        Updated <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2013-05-07" title="2013-05-07 18:44">about 2 years</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">Closed</td>
    <th class="start-date">Start date:</th><td class="start-date">2012-11-29</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Should have</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assigned To:</th><td class="assigned-to"><a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a></td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="todo" style="width: 100%;"></td></tr></table><p class="pourcent">0%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">View</td>
    
    <th></th>
    <td></td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version">-</td>
    
</tr>
<tr>
	<th>Has patch:</th><td>No</td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Idea: add a new argument to the <strong>render</strong> ViewHelper that allows to cache a partial:<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span>  <span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SomePartial</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code><br /></pre></p>


	<p>The cache identifier should be created based on a combination of the unique partial identifier &#38; it's arguments.</p>


	<p><strong>Note:</strong> Sections could be cacheable, too</p>
  </div>








<hr />
<div id="relations">
<div class="contextual">

</div>

<p><strong>Related issues</strong></p>


<form>
<table class="list issues">

<tr class="issue hascontextmenu" id="relation-7582">
<td class="checkbox"><input name="ids[]" type="checkbox" value="3291" /></td>
<td class="subject">related to 
    TYPO3.Fluid - 
    <a href="3291.html" class="issue status-4 priority-2">Feature #3291</a>: Cacheable viewhelpers
</td>
<td class="status">Needs Feedback</td>
<td class="start_date">2009-05-14</td>
<td class="due_date"></td>
<td class="buttons"></td>
</tr>

</table>
</form>


<form action="../../external.html?link=https://forge.typo3.org/issues/43457/relations" id="new-relation-form" method="post" onsubmit="new Ajax.Request('/issues/43457/relations', {asynchronous:true, evalScripts:true, method:'post', onComplete:function(request){Form.Element.focus('relation_issue_to_id');}, parameters:Form.serialize(this)}); return false;" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="IjgAk+sryuS7AAkPn7/ITUV652f6cwFBHN6GNTvW7o8=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates">related to</option>
<option value="duplicates">duplicates</option>
<option value="duplicated">duplicated by</option>
<option value="blocks">blocks</option>
<option value="blocked">blocked by</option>
<option value="precedes">precedes</option>
<option value="follows">follows</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="#" onclick="Element.toggle('new-relation-form'); this.blur(); return false;">Cancel</a>
</p>

<div id="related_issue_candidates" class="autocomplete"></div>
<script type="text/javascript">
//<![CDATA[
observeRelatedIssueField('/issues/auto_complete?id=43457&amp;project_id=package-typo3-fluid')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>

</div>


</div>




<div id="history">
<h3>History</h3>

  <div id="change-142869" class="journal has-notes has-details">
    <h4><a href="43457.html#note-1" class="journal-link">#1</a>
    
    <a name="note-1"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/36798">Gerrit Code Review</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-29" title="2012-11-29 17:03">over 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Accepted</i> to <i>Under Review</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-142869-notes"><p>Patch set 1 for branch <strong>master</strong> has been pushed to the review server.<br />It is available at <a class="external" href="../../external.html?link=http://review.typo3.org/16856">http://review.typo3.org/16856</a></p></div>
  </div>
  

  <div id="change-142879" class="journal has-notes">
    <h4><a href="43457.html#note-2" class="journal-link">#2</a>
    
    <a name="note-2"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2751">Adrian Föder</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-29" title="2012-11-29 17:46">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-142879-notes"><p>since it's common practice, meanwhile, to assign variables per default to every view, it's likely to happen that arguments are not explicitly passed by via attributes and are just expected to be present in the "target" partial (I, for example, have the authenticated {party} present everywhere).</p>


	<p>In this case, one would provide the "argument" attribute anyways in order to influence the caching, right?<br />For example,</p>


<pre><code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LastLogin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">arguments</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{party: party}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code></pre>

	<p>...even if the {party} would be present in the partial anyways.</p>


	<p>Is that correct?</p>


	<p>Additionally, what about a, for example, <code>vary</code> attribute (like the <code>Vary</code> HTTP header) that expects a set of implemented variabilities, for example the authenticated user or the current language? This could be, then</p>


<pre><code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LastLogin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">vary</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{0: 'Account', 1: 'CurrentLanguage'}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code></pre>

	<p>Note that Account and CurrentLanguage are keyword here which trigger a Handler maybe that provides the appropriate cache influencer (for Account that would maybe be the AccountIdentifier, and for CurrentLanguage that would be de-DE or the masterset (de) or so...</p>


	<p>aaaaaaaand does an expiration attribute make sense here, would that be the right place? This could either be a timestamp or even the keyword "session" for example.</p>


	<p>But I see, I'm adding functionality over functionality again here :)</p></div>
  </div>
  

  <div id="change-142883" class="journal has-notes">
    <h4><a href="43457.html#note-3" class="journal-link">#3</a>
    
    <a name="note-3"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-29" title="2012-11-29 17:53">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-142883-notes"><p>Adrian Föder wrote:</p>


<blockquote>

	<p>In this case, one would provide the "argument" attribute anyways in order to influence the caching, right?<br />For example,</p>


	<p>...even if the {party} would be present in the partial anyways.</p>


</blockquote>

	<p>How would {party} be present in the partial anyways?<br />Only settings and passed arguments are available.</p>


<blockquote>

	<p>Additionally, what about a, for example, <code>vary</code> attribute (like the <code>Vary</code> HTTP header) that expects a set of implemented variabilities,<br />for example the authenticated user or the current language?</p>


</blockquote>

	<p>At first sight I think that would make it too complex. Instead if you want to make the partial depending on the last login time, you could do<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LastLogin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">arguments</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{lastLogin: user.lastLogin}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code><br /></pre><br />or<br /><pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LastLogin</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">arguments</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{user: user, lastLogin: user.lastLogin}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code><br /></pre><br />to make it depending on user <strong>and</strong> last login time.</p>


<blockquote>

	<p>aaaaaaaand does an expiration attribute make sense here, would that be the right place?<br />This could either be a timestamp or even the keyword "session" for example.</p>


</blockquote>

	<p>Mh.. Same argument, though it would make sense of course..</p></div>
  </div>
  

  <div id="change-142973" class="journal has-notes">
    <h4><a href="43457.html#note-4" class="journal-link">#4</a>
    
    <a name="note-4"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2409">Benno Weinzierl</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-30" title="2012-11-30 09:54">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-142973-notes"><p>I like this solution very much!</p>


	<p>Would it make sense to have a config where you can bypass the arguments-check? <br />I dont know how much performance it will cost if there are large arrays/collections inside?</p>


	<p>My usecase is this:<br />I generate a tree of categories by using getChildren() on the parent category. This generates several sql-queries and therefore i want to cache it.<br />In this case i know exactly then a category is changed ant would prefere to clear the cache automatically when a category is changed/deleted/created.</p>


	<p>I will try it out at hte weekend and tell you my experience with it.</p></div>
  </div>
  

  <div id="change-142989" class="journal has-notes">
    <h4><a href="43457.html#note-5" class="journal-link">#5</a>
    
    <a name="note-5"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-11-30" title="2012-11-30 11:19">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-142989-notes"><p>Benno Weinzierl wrote:</p>


<blockquote>

	<p>I like this solution very much!</p>


</blockquote>

	<p>Thank you ;)</p>


<blockquote>

	<p>Would it make sense to have a config where you can bypass the arguments-check? <br />I dont know how much performance it will cost if there are large arrays/collections inside?</p>


</blockquote>

	<p>Yes, that would make sense.<br />I don't think that performance is a big problem (performance tests to come) but I had issues with this: e.g. I use some "data transfer object" (w/o identifier) to render a menu partial.<br />This will throw an exception because no cache identifier could be created from the object..</p>


	<p>I'm thinking about omitting the arguments for the cache identifier and instead add another argument "cacheVariables" or similar:</p>


<pre>
<code class="html syntaxhl"><span class="CodeRay"><span class="line-numbers">1</span><span class="tag">&lt;f:render</span> <span class="attribute-name">partial</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Foo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">arguments</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{has: 'noeffect'}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cache</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cacheVariables</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{has: 'aneffect'}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
</span></code><br /></pre>

	<p>What do you think?</p></div>
  </div>
  

  <div id="change-143210" class="journal has-notes">
    <h4><a href="43457.html#note-6" class="journal-link">#6</a>
    
    <a name="note-6"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/2409">Benno Weinzierl</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-12-02" title="2012-12-02 13:41">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-143210-notes"><p>Bastian Waidelich wrote:</p>


<blockquote>

	<p>I don't think that performance is a big problem (performance tests to come) but I had issues with this: e.g. I use some "data transfer object" (w/o identifier) to render a menu partial.<br />This will throw an exception because no cache identifier could be created from the object..</p>


</blockquote>

	<p>I did a little testing of your solution yesterday and there is another problem with objects which implement IteratorAggregate like i my case Doctrine\ORM\PersistentCollection. They are not handled right by AbstractTemplateView::convertObjectsToHashes(). They are handeld as objects (width no identifier) and not as arrays.</p>


	<p>I did change it in my local working copy but my solution is not realy usable in real live it only shows the general problem.</p>


<blockquote>

	<p>I'm thinking about omitting the arguments for the cache identifier and instead add another argument "cacheVariables" or similar:</p>


</blockquote>

	<p>Because i think it is not possible to handle every possible argument (large collections, objects with no identifier and so on) the cacheVariables approach may be better.<br />Maybe it is better to call it cacheIdentityVariables as they just define the cache identity?</p>


	<p>Another question:<br />If a persisted entity is changed the cache sould be cleared. How would that be handled? In my case the only solution would be a manual cache clean implemented by the developer. He would need to call a clearcache-method with the same cacheIdentityVariables?<br />In my case there is no way to determine the need to change the cache automatically because i just provide a collaction of categories and the active category to the partial (to generate a menu). In the partial i call getChildren which fetches completely new objects not known at the moment the partial is called.</p></div>
  </div>
  

  <div id="change-145102" class="journal has-notes has-details">
    <h4><a href="43457.html#note-7" class="journal-link">#7</a>
    
    <a name="note-7"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2012-12-12" title="2012-12-12 16:12">over 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> set to <i>2.1</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-145102-notes"><p>Benno Weinzierl wrote:</p>


	<p>Hi Benno, thanks for your feedback!</p>


<blockquote>

	<p>Bastian Waidelich wrote:</p>


</blockquote>

<blockquote>

	<p>I did a little testing of your solution yesterday and there is another problem with objects which implement IteratorAggregate like i my case Doctrine\ORM\PersistentCollection.<br />They are not handled right by AbstractTemplateView::convertObjectsToHashes(). They are handeld as objects (width no identifier) and not as arrays.</p>


</blockquote>

	<p>Yes, that's right.. With <a href="42715.html" class="issue status-7 priority-2 closed" title="ObjectSerializer not capable of Collections (Resolved)">#42715</a> we can properly serialize Collections it seems. That might be a solution..</p>


<blockquote><blockquote>

	<p>I'm thinking about omitting the arguments for the cache identifier and instead add another argument "cacheVariables" or similar:</p>


</blockquote>

	<p>Because i think it is not possible to handle every possible argument (large collections, objects with no identifier and so on) the cacheVariables approach may be better.</p>


</blockquote>

	<p>Yes, that's right. Besides, by default, all settings of the current package are added to the arguments by the render ViewHelper.</p>


<blockquote>

	<p>Maybe it is better to call it cacheIdentityVariables as they just define the cache identity?</p>


</blockquote>

	<p>Yes, I like that!</p>


<blockquote>

	<p>If a persisted entity is changed the cache sould be cleared. How would that be handled?</p>


</blockquote>

	<p>Absolutely. This is another issue we discussed recently. We'd also need that for <a href="29972.html" class="issue status-6 priority-2" title="Configurable Redirects (Under Review)">#29972</a> and some related features..<br />One approach is to use a generic service to determine a cacheIdentifier for an object (see <a class="external" href="../../external.html?link=https://github.com/mneuhaus/Community.CacheExtensions/blob/master/Classes/Community/CacheExtensions/Services/CacheIdentityService.php">https://github.com/mneuhaus/Community.CacheExtensions/blob/master/Classes/Community/CacheExtensions/Services/CacheIdentityService.php</a> for a draft from Marc Neuhaus) and then we probably need some generic callbacks for when an object is updated/removed in order to flush related caches and such..</p>


	<p>This won't make it into 2.0 unfortunately, but it won't be long until 2.1 I hope ;)</p></div>
  </div>
  

  <div id="change-147249" class="journal has-notes">
    <h4><a href="43457.html#note-8" class="journal-link">#8</a>
    
    <a name="note-8"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/4764">Alexander Berl</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2013-01-08" title="2013-01-08 18:11">over 2 years</a> ago</h4>

    
    <div class="wiki" id="journal-147249-notes"><p>Actually, I prefer the CacheViewHelper solution, as it is much more flexible and allows for whole templates or just small snippets to be cached.<br />As for the identifier, would using a mix of the current template/partial name + count be a solution? Not sure if that's possible at all, haven't been into FLOW code recently, but that idea just came up.<br />Alternatively, something similar to ruby could work, where you provide the cache identifier suffix:<br /><a class="external" href="../../external.html?link=http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching">http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching</a></p></div>
  </div>
  

  <div id="change-163797" class="journal has-notes has-details">
    <h4><a href="43457.html#note-9" class="journal-link">#9</a>
    
    <a name="note-9"></a>
    Updated by <a href="../../external.html?link=https://forge.typo3.org/users/61">Bastian Waidelich</a> <a href="../../external.html?link=https://forge.typo3.org/projects/package-typo3-fluid/activity?from=2013-05-07" title="2013-05-07 18:44">about 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>Under Review</i> to <i>Closed</i></li>
      
       <li><strong>Target version</strong> deleted (<strike><i>2.1</i></strike>)</li>
      
    </ul>
    
    <div class="wiki" id="journal-163797-notes"><p>Change has been abandoned (see <a class="external" href="../../external.html?link=https://review.typo3.org/#/c/16856/">https://review.typo3.org/#/c/16856/</a> for details).</p></div>
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-43457-watcher"></span>


</div>


<div style="clear: both;"></div>


<p class="other-formats">Also available in:
  <span><a href="../../external.html?link=https://forge.typo3.org/issues/43457.atom" class="atom" rel="nofollow">Atom</a></span>
  <span><a href="43457.pdf" class="pdf" rel="nofollow">PDF</a></span>
</p>







<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>
	
<div id="footer">
 Powered by <a href="../../external.html?link=http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang<br /><br />
 Hosting sponsor:<br /><br />
 <script type="text/javascript">var buttonStyle = "footer-grey-31";</script>
 <script src="../../typo3.org/fileadmin/t3org/images/FM-content/team-pages/server-team/sponsor-banners/sponsors.js"></script>
</div>
</div>

<script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.typo3.org/" : "http://piwik.typo3.org/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 14);
        piwikTracker.trackPageView();
        piwikTracker.enableLinkTracking();
    } catch( err ) {}
</script>
<noscript><span style="visibility: hidden";><img src="../../external.html?link=http://piwik.typo3.org/piwik.php?idsite=14" style="border:0" alt=""/></span></noscript>
</body>

<!-- Mirrored from forge.typo3.org/issues/43457 by HTTrack Website Copier/3.x [XR&CO'2008], Mon, 03 Aug 2015 22:04:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
</html>
